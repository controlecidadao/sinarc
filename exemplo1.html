<html>
    <head>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
        
            <script src="./pyvis/templates/lib/bindings/utils.js"></script>
            <link rel="stylesheet" href="./pyvis/templates/lib/vis-9.1.2/vis-network.css" />
            <script src="./pyvis/templates/lib/vis-9.1.2/vis-network.min.js" ></script>
            
        
<center>
<h1></h1>
</center>

<!-- <link rel="stylesheet" href="../node_modules/vis/dist/vis.min.css" type="text/css" />
<script type="text/javascript" src="../node_modules/vis/dist/vis.js"> </script>-->
        <link href="./pyvis/templates/lib/vis-9.1.2/bootstrap.min.css" rel="stylesheet" />
        <script src="./pyvis/templates/lib/vis-9.1.2/bootstrap.bundle.min.js" ></script>


        <center>
          <h1></h1>
        </center>
        <style type="text/css">

             #mynetwork {
                 width: 100%;
                 height: 800px;
                 background-color: #ffffff;
                 border: 1px solid lightgray;
                 position: relative;
                 float: left;
             }

             
             #loadingBar {
                 position:absolute;
                 top:0px;
                 left:0px;
                 width: 100%;
                 height: 800px;
                 background-color:rgba(200,200,200,0.8);
                 -webkit-transition: all 0.5s ease;
                 -moz-transition: all 0.5s ease;
                 -ms-transition: all 0.5s ease;
                 -o-transition: all 0.5s ease;
                 transition: all 0.5s ease;
                 opacity:1;
             }

             #bar {
                 position:absolute;
                 top:0px;
                 left:0px;
                 width:20px;
                 height:20px;
                 margin:auto auto auto auto;
                 border-radius:11px;
                 border:2px solid rgba(30,30,30,0.05);
                 background: rgb(0, 173, 246); /* Old browsers */
                 box-shadow: 2px 0px 4px rgba(0,0,0,0.4);
             }

             #border {
                 position:absolute;
                 top:10px;
                 left:10px;
                 width:500px;
                 height:23px;
                 margin:auto auto auto auto;
                 box-shadow: 0px 0px 4px rgba(0,0,0,0.2);
                 border-radius:10px;
             }

             #text {
                 position:absolute;
                 top:8px;
                 left:530px;
                 width:30px;
                 height:50px;
                 margin:auto auto auto auto;
                 font-size:22px;
                 color: #000000;
             }

             div.outerBorder {
                 position:relative;
                 top:400px;
                 width:600px;
                 height:44px;
                 margin:auto auto auto auto;
                 border:8px solid rgba(0,0,0,0.1);
                 background: rgb(252,252,252); /* Old browsers */
                 background: -moz-linear-gradient(top,  rgba(252,252,252,1) 0%, rgba(237,237,237,1) 100%); /* FF3.6+ */
                 background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(252,252,252,1)), color-stop(100%,rgba(237,237,237,1))); /* Chrome,Safari4+ */
                 background: -webkit-linear-gradient(top,  rgba(252,252,252,1) 0%,rgba(237,237,237,1) 100%); /* Chrome10+,Safari5.1+ */
                 background: -o-linear-gradient(top,  rgba(252,252,252,1) 0%,rgba(237,237,237,1) 100%); /* Opera 11.10+ */
                 background: -ms-linear-gradient(top,  rgba(252,252,252,1) 0%,rgba(237,237,237,1) 100%); /* IE10+ */
                 background: linear-gradient(to bottom,  rgba(252,252,252,1) 0%,rgba(237,237,237,1) 100%); /* W3C */
                 filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fcfcfc', endColorstr='#ededed',GradientType=0 ); /* IE6-9 */
                 border-radius:72px;
                 box-shadow: 0px 0px 10px rgba(0,0,0,0.2);
             }
             

             

             
        </style>
    </head>


    <body>
        <div class="card" style="width: 100%">
            
            
            <div id="mynetwork" class="card-body"></div>
        </div>

        
            <div id="loadingBar">
              <div class="outerBorder">
                <div id="text">0%</div>
                <div id="border">
                  <div id="bar"></div>
                </div>
              </div>
            </div>
        
        

        <script type="text/javascript">

              // initialize global variables.
              var edges;
              var nodes;
              var allNodes;
              var allEdges;
              var nodeColors;
              var originalNodes;
              var network;
              var container;
              var options, data;
              var filter = {
                  item : '',
                  property : '',
                  value : []
              };

              

              

              // This method is responsible for drawing the graph, returns the drawn network
              function drawGraph() {
                  var container = document.getElementById('mynetwork');

                  

                  // parsing and collecting nodes and edges from the python
                  nodes = new vis.DataSet([
  {
    "font": {
      "color": "#777777"
    },
    "id": "PF_***127448**-ROBERTO MASSAYUKI NISHIMURA",
    "image": "images\\pf_homem.png",
    "label": "ROBERTO MASSAYUKI NISHIMURA",
    "shape": "image",
    "size": 20,
    "title": "ROBERTO MASSAYUKI NISHIMURA (PF_***127448**)\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n--> PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (rep-sócio-Procurador)",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "color": {
      "border": "red",
      "background": "transparent",
      "hover": {
        "background": "transparent",
        "border": "red"
      },
      "highlight": {
        "background": "rgba(0, 255, 0, 0.3)",
        "border": "red"
      }
    },
    "borderWidth": 4,
    "shapeProperties": {
      "useBorderWithImage": true
    },
    "borderWidthSelected": 4,
    "id": "PJ_34023887000155",
    "image": "images\\pj_brasil_ativa.png",
    "label": "SINAPE SINALIZACAO VIARIA LTDA",
    "shape": "image",
    "size": 20,
    "title": "SINAPE SINALIZACAO VIARIA LTDA (PJ_34023887000155)\nSINAPE\nRUA DOMINGOS ZARA, 80 - DISTRITO INDUSTRIAL - BRODOWSKI - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 25):\n--> EM_financeiro@sinape.com.br\n--> EN_DOMINGOS ZARA 80-BRODOWSKI-SP\n--> PJ_ALIANCA VIARIA MS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO 3 S MINAS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO 5A - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO ALIANCA VIARIA - BA - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO ALIANCA VIARIA - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO ALIANCA VIARIA GO E MS - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO JS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO JSM . - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO MTS SINALIZACAO - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO OPERACOES VIARIAS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SIGNASUL/SINAPE - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SINAPE FAIXA - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SINAPENG - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO SMART VIAS RJ - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SS NATAL - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO SS SUSTENTAVEL - Baixada - (Sociedade Consorciada)\n--> PJ_SINAIS VERTICAIS INDUSTRIA E COMERCIO LTDA - Ativa - (Sócio)\n--> PJ_YORK SERVICOS LTDA - Ativa - (Sócio)\n--> TE_16 36358856\n--> TE_16 36646274\n<-- PF_ROBERTO MASSAYUKI NISHIMURA (rep-sócio-Procurador)\n<-- PF_THIAGO NISHIMURA (Administrador)\n<-- PJ_AGUIA DOS MARES PARTICIPACOES LTDA - Ativa - (Sócio)",
    "value": 25,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1,
    "_tooltip_html": "SINAPE SINALIZACAO VIARIA LTDA (PJ_34023887000155)\nSINAPE\nRUA DOMINGOS ZARA, 80 - DISTRITO INDUSTRIAL - BRODOWSKI - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 25):\n--> EM_financeiro@sinape.com.br\n--> EN_DOMINGOS ZARA 80-BRODOWSKI-SP\n--> PJ_ALIANCA VIARIA MS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO 3 S MINAS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO 5A - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO ALIANCA VIARIA - BA - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO ALIANCA VIARIA - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO ALIANCA VIARIA GO E MS - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO JS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO JSM . - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO MTS SINALIZACAO - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO OPERACOES VIARIAS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SIGNASUL/SINAPE - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SINAPE FAIXA - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SINAPENG - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO SMART VIAS RJ - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SS NATAL - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO SS SUSTENTAVEL - Baixada - (Sociedade Consorciada)\n--> PJ_SINAIS VERTICAIS INDUSTRIA E COMERCIO LTDA - Ativa - (Sócio)\n--> PJ_YORK SERVICOS LTDA - Ativa - (Sócio)\n--> TE_16 36358856\n--> TE_16 36646274\n<-- PF_ROBERTO MASSAYUKI NISHIMURA (rep-sócio-Procurador)\n<-- PF_THIAGO NISHIMURA (Administrador)\n<-- PJ_AGUIA DOS MARES PARTICIPACOES LTDA - Ativa - (Sócio)",
    "font": {
      "color": "#777777"
    }
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_11414504000174",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO 5A",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO 5A (PJ_11414504000174)\nRUA JOSE OLINTO FONTES, 158 - SALA: 02;-ELDORADO - CONTAGEM - MG\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_rmbh@terra.com.br\n--> TE_31 32221545\n--> TE_31 32711471\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_12217379000175",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO SIGNASUL/SINAPE",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SIGNASUL/SINAPE (PJ_12217379000175)\nSIGNASUL/SINAPE\nAVENIDA PROTASIO ALVES, 5851 - VILA JARDIM - PORTO ALEGRE - RS\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EN_ALVES PROTASIO 5851-PORTO ALEGRE-RS\n--> TE_51 33343836\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_12632230000152",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO JSM .",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO JSM . (PJ_12632230000152)\nRUA SANSAO ALVES DOS SANTOS, 20 - ANDAR 2-BROOKLIN NOVO - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EN_ALVES ANDAR SANSAO SANTOS 20 2-SAO PAULO-SP\n--> TE_11 55072007\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_14133732000164",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO SINAPENG",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SINAPENG (PJ_14133732000164)\nCONSORCIO SINAPE - MENG\nRUA MEXICO, 41 - SALA 1901-CASTELO - RIO DE JANEIRO - RJ\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 1):\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_18336225000189",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO 3 S MINAS",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO 3 S MINAS (PJ_18336225000189)\nRUA A, 850 - SALA: 07;-CDI JATOBA (BARREIRO) - BELO HORIZONTE - MG\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_rmbh@terra.com.br\n--> TE_31 32221545\n--> TE_31 32711471\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_18580626000180",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO MTS SINALIZACAO",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO MTS SINALIZACAO (PJ_18580626000180)\nCONSORCIO MTS SINALIZACAO\nRUA TAGUA, 200 - LIBERDADE - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_gustavo@meng.com.br\n--> TE_11 33855600\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_19388662000109",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO ALIANCA VIARIA GO E MS",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO ALIANCA VIARIA GO E MS (PJ_19388662000109)\nRUA DOUTOR OSCAR GUIMARAES, 3750 - JARDIM NOVO AEROPORTO - TRES LAGOAS - MS\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 5):\n--> EM_espaulocontabil@yahoo.com.br\n--> TE_67 30425722\n--> TE_67 30426867\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 5,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_19388666000197",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO ALIANCA VIARIA",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO ALIANCA VIARIA (PJ_19388666000197)\nRUA GOIANIA, 048 - VILA BOA BRANCO - VILA BOA - GO\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 6):\n--> EM_financeiro@sinape.com.br\n--> TE_16 36358856\n--> TE_16 36643478\n--> TE_16 36646274\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 6,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_22103852000147",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO ALIANCA VIARIA - BA",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO ALIANCA VIARIA - BA (PJ_22103852000147)\nRUA SAO FRANCISCO, 521 - JARDIM OURO BRANCO - BARREIRAS - BA\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 5):\n--> EM_c.parana.ba@hotmail.com\n--> EN_FRANCISCO SAO 521-BARREIRAS-BA\n--> TE_77 36118445\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 5,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_27870980000130",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO SS NATAL",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SS NATAL (PJ_27870980000130)\nRUA NESTOR GUISSO, S/N - BOA VISTA II - SERRA - ES\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_cerutti.contabil@terra.com.br\n--> TE_27 33191399\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_28029634000196",
    "image": "images\\pj_brasil_ativa.png",
    "label": "YORK SERVICOS LTDA",
    "shape": "image",
    "size": 20,
    "title": "YORK SERVICOS LTDA (PJ_28029634000196)\nAVENIDA DAS AMERICAS, 00700 - BLC 6 SAL 156-BARRA DA TIJUCA - RIO DE JANEIRO - RJ\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_financeiro@yorkservicos.com.br\n--> EN_AMERICAS BLC SAL 700 6 156-RIO DE JANEIRO-RJ\n--> TE_16 36646274\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sócio)",
    "value": 4,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_30371534000195",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO SS SUSTENTAVEL",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SS SUSTENTAVEL (PJ_30371534000195)\nRUA NESTOR GUISSO, S/Nº - BOA VISTA II - SERRA - ES\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_cerutti.contabil@terra.com.br\n--> TE_27 33191399\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_33045382000129",
    "image": "images\\pj_brasil_ativa.png",
    "label": "SINAIS VERTICAIS INDUSTRIA E COMERCIO LTDA",
    "shape": "image",
    "size": 20,
    "title": "SINAIS VERTICAIS INDUSTRIA E COMERCIO LTDA (PJ_33045382000129)\nRUA DOMINGOS ZARA, 100 - DISTRITO INDUSTRIAL - BRODOWSKI - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 2):\n--> TE_16 36646274\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sócio)",
    "value": 2,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_43721157000119",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO SINAPE FAIXA",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SINAPE FAIXA (PJ_43721157000119)\nAVENIDA SANTA ANA, 57 - JARDIM SANTA PAULA - IBIPORA - PR\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_financeiro@sinape.com.br\n--> TE_16 36646274\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1,
    "_tooltip_html": "CONSORCIO SINAPE FAIXA (PJ_43721157000119)\nAVENIDA SANTA ANA, 57 - JARDIM SANTA PAULA - IBIPORA - PR\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_financeiro@sinape.com.br\n--> TE_16 36646274\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)"
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_44762529000118",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO OPERACOES VIARIAS",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO OPERACOES VIARIAS (PJ_44762529000118)\nRUA DOMINGOS ZARA, 80 - DISTRITO INDUSTRIAL - BRODOWSKI - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_financeiro@sinape.com.br\n--> EN_DOMINGOS ZARA 80-BRODOWSKI-SP\n--> TE_16 36646274\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_47732562000193",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO JS",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO JS (PJ_47732562000193)\nRUA ARIOSTO MOTTA, 340 - A-CIDADE JARDIM GUAPIMIRIM - GUAPIMIRIM - RJ\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 2):\n--> EM_legalizacao@gma3.com.br\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 2,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_50870028000158",
    "image": "images\\pj_brasil_ativa.png",
    "label": "ALIANCA VIARIA MS",
    "shape": "image",
    "size": 20,
    "title": "ALIANCA VIARIA MS (PJ_50870028000158)\nALIANCA VIARIA MS\nRUA ROMALINO ALVES DE ALBRES, 1486 - QUADRA0000004 LOTE 0000004 SETOR 00003 79210000-ALTOS DA CIDADE - ANASTACIO - MS\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_63929274000180",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO SMART VIAS RJ",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SMART VIAS RJ (PJ_63929274000180)\nAVENIDA JUSCELINO KUBITSCHEK DE OLIVEIRA, 154 - CENTRO - VOTORANTIM - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_cjd@splice.com.br\n--> EN_JUSCELINO KUBITSCHEK OLIVEIRA 154-VOTORANTIM-SP\n--> TE_15 33538400\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_financeiro@sinape.com.br",
    "image": "images\\email.png",
    "label": "financeiro@sinape.com.br",
    "shape": "image",
    "size": 15,
    "title": "financeiro@sinape.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 5):\n<-- PJ_AGUIA DOS MARES PARTICIPACOES LTDA\n<-- PJ_CONSORCIO ALIANCA VIARIA\n<-- PJ_CONSORCIO OPERACOES VIARIAS\n<-- PJ_CONSORCIO SINAPE FAIXA\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA",
    "value": 5,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_16 36358856",
    "image": "images\\telefone.png",
    "label": "16 36358856",
    "shape": "image",
    "size": 15,
    "title": "16 36358856\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO ALIANCA VIARIA\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA",
    "value": 2,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_16 36646274",
    "image": "images\\telefone.png",
    "label": "16 36646274",
    "shape": "image",
    "size": 15,
    "title": "16 36646274\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 7):\n<-- PJ_AGUIA DOS MARES PARTICIPACOES LTDA\n<-- PJ_CONSORCIO ALIANCA VIARIA\n<-- PJ_CONSORCIO OPERACOES VIARIAS\n<-- PJ_CONSORCIO SINAPE FAIXA\n<-- PJ_SINAIS VERTICAIS INDUSTRIA E COMERCIO LTDA\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA\n<-- PJ_YORK SERVICOS LTDA",
    "value": 7,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_DOMINGOS ZARA 80-BRODOWSKI-SP",
    "image": "images\\endereco.png",
    "label": "BRODOWSKI - SP",
    "shape": "image",
    "size": 15,
    "title": "SP - BRODOWSKI - DISTRITO INDUSTRIAL - RUA DOMINGOS ZARA, 80\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO OPERACOES VIARIAS\n<-- PJ_SINAPE SINALIZACAO VIARIA LTDA",
    "value": 2,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "PF_***541197**-THIAGO NISHIMURA",
    "image": "images\\pf_homem.png",
    "label": "THIAGO NISHIMURA",
    "shape": "image",
    "size": 20,
    "title": "THIAGO NISHIMURA (PF_***541197**)\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n--> PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Administrador)",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_28659956000119",
    "image": "images\\pj_brasil_ativa.png",
    "label": "AGUIA DOS MARES PARTICIPACOES LTDA",
    "shape": "image",
    "size": 20,
    "title": "AGUIA DOS MARES PARTICIPACOES LTDA (PJ_28659956000119)\nAVENIDA GIUSEPPE CILENTO, 1215 - APT 84-JARDIM BOTANICO - RIBEIRAO PRETO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_financeiro@sinape.com.br\n--> EN_APARTAMENTO CILENTO GIUSEPPE 1215 84-RIBEIRAO PRETO-SP\n--> PJ_SINAPE SINALIZACAO VIARIA LTDA - Ativa - (Sócio)\n--> TE_16 36646274",
    "value": 4,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_APARTAMENTO CILENTO GIUSEPPE 1215 84-RIBEIRAO PRETO-SP",
    "image": "images\\endereco.png",
    "label": "RIBEIRAO PRETO - SP",
    "shape": "image",
    "size": 15,
    "title": "SP - RIBEIRAO PRETO - APT 84-JARDIM BOTANICO - AVENIDA GIUSEPPE CILENTO, 1215\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_AGUIA DOS MARES PARTICIPACOES LTDA",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_rmbh@terra.com.br",
    "image": "images\\email.png",
    "label": "rmbh@terra.com.br",
    "shape": "image",
    "size": 15,
    "title": "rmbh@terra.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO 3 S MINAS\n<-- PJ_CONSORCIO 5A",
    "value": 2,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_31 32221545",
    "image": "images\\telefone.png",
    "label": "31 32221545",
    "shape": "image",
    "size": 15,
    "title": "31 32221545\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO 3 S MINAS\n<-- PJ_CONSORCIO 5A",
    "value": 2,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_31 32711471",
    "image": "images\\telefone.png",
    "label": "31 32711471",
    "shape": "image",
    "size": 15,
    "title": "31 32711471\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO 3 S MINAS\n<-- PJ_CONSORCIO 5A",
    "value": 2,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_ALVES PROTASIO 5851-PORTO ALEGRE-RS",
    "image": "images\\endereco.png",
    "label": "PORTO ALEGRE - RS",
    "shape": "image",
    "size": 15,
    "title": "RS - PORTO ALEGRE - VILA JARDIM - AVENIDA PROTASIO ALVES, 5851\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO SIGNASUL/SINAPE",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_51 33343836",
    "image": "images\\telefone.png",
    "label": "51 33343836",
    "shape": "image",
    "size": 15,
    "title": "51 33343836\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO SIGNASUL/SINAPE",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_ALVES ANDAR SANSAO SANTOS 20 2-SAO PAULO-SP",
    "image": "images\\endereco.png",
    "label": "SAO PAULO - SP",
    "shape": "image",
    "size": 15,
    "title": "SP - SAO PAULO - ANDAR 2-BROOKLIN NOVO - RUA SANSAO ALVES DOS SANTOS, 20\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO JARSER\n<-- PJ_CONSORCIO JSM .",
    "value": 2,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 55072007",
    "image": "images\\telefone.png",
    "label": "11 55072007",
    "shape": "image",
    "size": 15,
    "title": "11 55072007\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO JARSER\n<-- PJ_CONSORCIO JSM .",
    "value": 2,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_gustavo@meng.com.br",
    "image": "images\\email.png",
    "label": "gustavo@meng.com.br",
    "shape": "image",
    "size": 15,
    "title": "gustavo@meng.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO MTS SINALIZACAO",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 33855600",
    "image": "images\\telefone.png",
    "label": "11 33855600",
    "shape": "image",
    "size": 15,
    "title": "11 33855600\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO MTS SINALIZACAO",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_espaulocontabil@yahoo.com.br",
    "image": "images\\email.png",
    "label": "espaulocontabil@yahoo.com.br",
    "shape": "image",
    "size": 15,
    "title": "espaulocontabil@yahoo.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO ALIANCA VIARIA GO E MS",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_67 30425722",
    "image": "images\\telefone.png",
    "label": "67 30425722",
    "shape": "image",
    "size": 15,
    "title": "67 30425722\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO ALIANCA VIARIA GO E MS",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_67 30426867",
    "image": "images\\telefone.png",
    "label": "67 30426867",
    "shape": "image",
    "size": 15,
    "title": "67 30426867\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO ALIANCA VIARIA GO E MS",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_16 36643478",
    "image": "images\\telefone.png",
    "label": "16 36643478",
    "shape": "image",
    "size": 15,
    "title": "16 36643478\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO ALIANCA VIARIA",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_c.parana.ba@hotmail.com",
    "image": "images\\email.png",
    "label": "c.parana.ba@hotmail.com",
    "shape": "image",
    "size": 15,
    "title": "c.parana.ba@hotmail.com\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO ALIANCA VIARIA - BA",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_FRANCISCO SAO 521-BARREIRAS-BA",
    "image": "images\\endereco.png",
    "label": "BARREIRAS - BA",
    "shape": "image",
    "size": 15,
    "title": "BA - BARREIRAS - JARDIM OURO BRANCO - RUA SAO FRANCISCO, 521\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO ALIANCA VIARIA - BA",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_77 36118445",
    "image": "images\\telefone.png",
    "label": "77 36118445",
    "shape": "image",
    "size": 15,
    "title": "77 36118445\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO ALIANCA VIARIA - BA",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_cerutti.contabil@terra.com.br",
    "image": "images\\email.png",
    "label": "cerutti.contabil@terra.com.br",
    "shape": "image",
    "size": 15,
    "title": "cerutti.contabil@terra.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO SS NATAL\n<-- PJ_CONSORCIO SS SUSTENTAVEL",
    "value": 2,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_27 33191399",
    "image": "images\\telefone.png",
    "label": "27 33191399",
    "shape": "image",
    "size": 15,
    "title": "27 33191399\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO SS NATAL\n<-- PJ_CONSORCIO SS SUSTENTAVEL",
    "value": 2,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_financeiro@yorkservicos.com.br",
    "image": "images\\email.png",
    "label": "financeiro@yorkservicos.com.br",
    "shape": "image",
    "size": 15,
    "title": "financeiro@yorkservicos.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_YORK SERVICOS LTDA",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_AMERICAS BLC SAL 700 6 156-RIO DE JANEIRO-RJ",
    "image": "images\\endereco.png",
    "label": "RIO DE JANEIRO - RJ",
    "shape": "image",
    "size": 15,
    "title": "RJ - RIO DE JANEIRO - BLC 6 SAL 156-BARRA DA TIJUCA - AVENIDA DAS AMERICAS, 00700\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_YORK SERVICOS LTDA",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_legalizacao@gma3.com.br",
    "image": "images\\email.png",
    "label": "legalizacao@gma3.com.br",
    "shape": "image",
    "size": 15,
    "title": "legalizacao@gma3.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO JS",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 33892727",
    "image": "images\\telefone.png",
    "label": "11 33892727",
    "shape": "image",
    "size": 15,
    "title": "11 33892727\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 20):\n<-- PJ_ALIANCA VIARIA MS\n<-- PJ_CONSORCIO CG SEGURA\n<-- PJ_CONSORCIO CMT CUIABA MONITORAMENTO DE TRANSITO/2020\n<-- PJ_CONSORCIO DATAPROCES-GO\n<-- PJ_CONSORCIO GRU-SINALIZACAO\n<-- PJ_CONSORCIO MONITORA PIRA\n<-- PJ_CONSORCIO MONITRAN GRU\n<-- PJ_CONSORCIO PIRA SEGURA\n<-- PJ_CONSORCIO RODOVIA SEGURA\n<-- PJ_CONSORCIO S. J. S SINAL\n<-- PJ_CONSORCIO SDE\n<-- PJ_CONSORCIO SERCONTEC MATO GROSSO\n<-- PJ_CONSORCIO SINAL GRU\n<-- PJ_CONSORCIO SINAL MT\n<-- PJ_CONSORCIO SINAL RO\n<-- PJ_CONSORCIO VARZEA MT\n<-- PJ_CTS - CONSORCIO TRANSITO SEGURO\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L2\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L5",
    "value": 20,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_cjd@splice.com.br",
    "image": "images\\email.png",
    "label": "cjd@splice.com.br",
    "shape": "image",
    "size": 15,
    "title": "cjd@splice.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO SMART VIAS RJ",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_JUSCELINO KUBITSCHEK OLIVEIRA 154-VOTORANTIM-SP",
    "image": "images\\endereco.png",
    "label": "VOTORANTIM - SP",
    "shape": "image",
    "size": 15,
    "title": "SP - VOTORANTIM - CENTRO - AVENIDA JUSCELINO KUBITSCHEK DE OLIVEIRA, 154\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO SMART VIAS RJ",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_15 33538400",
    "image": "images\\telefone.png",
    "label": "15 33538400",
    "shape": "image",
    "size": 15,
    "title": "15 33538400\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO SMART VIAS RJ",
    "value": 1,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 1
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "color": {
      "border": "red",
      "background": "transparent",
      "hover": {
        "background": "transparent",
        "border": "red"
      },
      "highlight": {
        "background": "rgba(0, 255, 0, 0.3)",
        "border": "red"
      }
    },
    "borderWidth": 4,
    "shapeProperties": {
      "useBorderWithImage": true,
      "borderDashes": [
        15,
        5
      ]
    },
    "borderWidthSelected": 4,
    "id": "PJ_02363619000196",
    "image": "images\\pj_brasil_ativa.png",
    "label": "SERGET MOBILIDADE VIARIA LTDA",
    "shape": "image",
    "size": 20,
    "title": "SERGET MOBILIDADE VIARIA LTDA (PJ_02363619000196)\nSERGET\nRUA DOM LUIS FELIPE DE ORLEANS, 426 - VILA MARIA BAIXA - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 55):\n--> EM_comercial@serget.com.br\n--> EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP\n--> PJ_ALIANCA VIARIA MS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO ALIANCA VIARIA - BA - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO ALIANCA VIARIA - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO ALIANCA VIARIA GO E MS - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO BRAVIAS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO CG SEGURA - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO CIDADE MORENA - CAMPO GRANDE-MS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO CMT - CUIABA MONITORAMENTO DE TRANSITO - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO CMT CUIABA MONITORAMENTO DE TRANSITO/2020 - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO DATAPROCES-GO - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO GERENCIAMENTO DO TRANSITO DE VILA VELHA - GETRAN. - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO GRU-SINALIZACAO - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO GUARDA BEM - SERGET - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO JARSER - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO MOBILIDADE SUL - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO MONITORA PIRA - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO MONITRAN - MONITORAMENTO ELETRONICO DE TRANSITO - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO MONITRAN GRU - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO MOVI-GRU - CONSORCIO MOBILIDADE VIARIA GUARULHOS - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO MT TUR - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO OSASCO MAIS SEGURA - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO PAULISTA DE FISCALIZACAO - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO PIRA SEGURA - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO PROCESSAMENTO E TECNOLOGIA - CPT - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO RODOVIA SEGURA - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO S. J. S SINAL - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SAO PAULO INTELIGENTE - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SDE - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO SERCONTEC MATO GROSSO - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SINAL GRU - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SINAL MT - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SINAL RO - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO SPTRANSITO - MONITORAMENTO E FISCALIZACAO ELETRONICA - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO TRANSEG GRU - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO VARZEA MT - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO VIARIO GRANDE JUNDIAI - Baixada - (Sociedade Consorciada)\n--> PJ_CONSORCIO VIAS ALENCARINAS - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO VIAS CAPITAL - Ativa - (Sociedade Consorciada)\n--> PJ_CONSORCIO VIAS CAPITAL 2020 - Baixada - (Sociedade Consorciada)\n--> PJ_CTS - CONSORCIO TRANSITO SEGURO - Baixada - (Sociedade Consorciada)\n--> PJ_CTS - CONSORCIO TRANSITO SEGURO 2022 - Ativa - (Sociedade Consorciada)\n--> PJ_SERGET MOBILIDADE VIARIA LTDA - SCP - Ativa - (Sócio Ostensivo)\n--> PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L1 - Baixada - (Sociedade Consorciada)\n--> PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L2 - Baixada - (Sociedade Consorciada)\n--> PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L3 - Baixada - (Sociedade Consorciada)\n--> PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L4 - Baixada - (Sociedade Consorciada)\n--> PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L5 - Baixada - (Sociedade Consorciada)\n--> TE_11 26362727\n--> TE_11 33892727\n<-- PF_MOISES DE MORAES (Administrador)\n<-- PF_RENATA DE MORAES (Administrador)\n<-- PJ_LUX AQUILA PARTICIPACOES S.A. - Ativa - (Sócio)\n<-- PJ_N.L PARTICIPACOES LTDA - Ativa - (Sócio)",
    "value": 55,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_03146137000147",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO GERENCIAMENTO DO TRANSITO DE VILA VELHA - GETRAN.",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO GERENCIAMENTO DO TRANSITO DE VILA VELHA - GETRAN. (PJ_03146137000147)\nRODOVIA CARLOS LINDEMBERG, 1514 - ARIBIRI - VILA VELHA - ES\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EN_CARLOS LINDEMBERG 1514-VILA VELHA-ES\n--> TE_27 3249050\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_11504152000148",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO BRAVIAS",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO BRAVIAS (PJ_11504152000148)\nAVENIDA ESTRADA DA ARROZEIRA, 820 - CENTRO - ELDORADO DO SUL - RS\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_fiscal@escriteccontabil.com.br\n--> EN_ARROZEIRA ESTRADA 820-ELDORADO DO SUL-RS\n--> TE_51 33424355\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_14417796000197",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO SDE",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SDE (PJ_14417796000197)\nCONSORCIO SDE\nRUA DOM LUIS FELIPE DE ORLEANS, 426 - VILA MARIA BAIXA - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_moises.moraes@serget.com.br\n--> EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_17071550000102",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO JARSER",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO JARSER (PJ_17071550000102)\n********\nRUA SANSAO ALVES DOS SANTOS, 20 - ANDAR 2-BROOKLIN NOVO - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EN_ALVES ANDAR SANSAO SANTOS 20 2-SAO PAULO-SP\n--> TE_11 55072007\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 1,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_17990510000156",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO VIARIO GRANDE JUNDIAI",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO VIARIO GRANDE JUNDIAI (PJ_17990510000156)\nALAMEDA ARAGUAIA, 933 - ANDAR 5 CONJ 51 SUB CONJ 1-ALPHAVILLE - BARUERI - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_jacqueline.panontin@serget.com.br\n--> TE_11 26362727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_19887098000179",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO SPTRANSITO - MONITORAMENTO E FISCALIZACAO ELETRONICA",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SPTRANSITO - MONITORAMENTO E FISCALIZACAO ELETRONICA (PJ_19887098000179)\nRUA AUGUSTA, 1836 - ANDAR 8-CERQUEIRA CESAR - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_eliane@slmassessoriacontabil.com.br\n--> TE_11 38316032\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_20190209000172",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO GUARDA BEM - SERGET",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO GUARDA BEM - SERGET (PJ_20190209000172)\nCONSORCIO GUARDA BEM - SERGET\nAVENIDA PRESIDENTE KENNEDY, 3903 - ANEXO: GALPAO C;-ROCHDALE - OSASCO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 5):\n--> EM_jorgemarco.rodrigues1@gmail.com\n--> TE_11 21085591\n--> TE_11 36865591\n--> TE_11 36867458\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 5,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0,
    "_tooltip_html": "CONSORCIO GUARDA BEM - SERGET (PJ_20190209000172)\nCONSORCIO GUARDA BEM - SERGET\nAVENIDA PRESIDENTE KENNEDY, 3903 - ANEXO: GALPAO C;-ROCHDALE - OSASCO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 5):\n--> EM_jorgemarco.rodrigues1@gmail.com\n--> TE_11 21085591\n--> TE_11 36865591\n--> TE_11 36867458\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)"
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_20655625000107",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO CMT - CUIABA MONITORAMENTO DE TRANSITO",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO CMT - CUIABA MONITORAMENTO DE TRANSITO (PJ_20655625000107)\nRUA CURUCA, 473 - VILA MARIA BAIXA - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EN_CURUCA 473-SAO PAULO-SP\n--> TE_11 36671213\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_21113837000117",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO MT TUR",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO MT TUR (PJ_21113837000117)\nAVENIDA FERNANDO CORREA DA COSTA, 8212 - SAO FRANCISCO - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 2):\n--> TE_65 36653088\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_21611768000171",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO MONITRAN - MONITORAMENTO ELETRONICO DE TRANSITO",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO MONITRAN - MONITORAMENTO ELETRONICO DE TRANSITO (PJ_21611768000171)\nCONSORCIO MONITRAN\nSETOR SAAN QUADRA 4, S/N - LOTE: 566 PARTE A;-ZONA INDUSTRIAL - BRASILIA - DF\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 2):\n--> TE_61 33637403\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_22041471000180",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO VIAS CAPITAL",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO VIAS CAPITAL (PJ_22041471000180)\nRUA JULIANO LUCCHI, 134 - JARDIM ELDORADO - PALHOCA - SC\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 5):\n--> EN_JULIANO LUCCHI 134-PALHOCA-SC\n--> TE_48 21063000\n--> TE_48 21063005\n--> TE_48 21063008\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 5,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_22095351000166",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO VIAS ALENCARINAS",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO VIAS ALENCARINAS (PJ_22095351000166)\nCONSORCIO VIAS ALENCARINAS\nRODOVIA BR-116, 10000 - : B - KM 09;-JANGURUSSU - FORTALEZA - CE\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_ailson@trana.com.br\n--> EN_B BR KM 116 10000 9-FORTALEZA-CE\n--> TE_85 40061200\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_25250406000153",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CTS - CONSORCIO TRANSITO SEGURO",
    "shape": "image",
    "size": 20,
    "title": "CTS - CONSORCIO TRANSITO SEGURO (PJ_25250406000153)\nCTS - CONSORCIO TRANSITO SEGURO\nRUA U, SN - RUA 21 LOTE 07 AO 13 QUADRA 2/7-DISTRITO INDUSTRIAL - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 5):\n--> EM_comercial@tecnoviasmt.com.br\n--> EN_AO LOTE QUADRA RUA U 21 7 13 2 7-CUIABA-MT\n--> TE_11 33892727\n--> TE_65 30289500\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 5,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_26643588000195",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO MOVI-GRU - CONSORCIO MOBILIDADE VIARIA GUARULHOS",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO MOVI-GRU - CONSORCIO MOBILIDADE VIARIA GUARULHOS (PJ_26643588000195)\nRUA DOM LUIS FELIPE DE ORLEANS, 426 - VILA MARIA BAIXA - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_srf.legal@meirafernandes.com.br\n--> EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP\n--> TE_11 35135000\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_28503496000135",
    "image": "images\\pj_brasil_ativa.png",
    "label": "SERGET MOBILIDADE VIARIA LTDA - SCP",
    "shape": "image",
    "size": 20,
    "title": "SERGET MOBILIDADE VIARIA LTDA - SCP (PJ_28503496000135)\nAVENIDA QUEIROZ FILHO, 1700 - BLOCO A SALA 902-VILA HAMBURGUESA - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 2):\n--> TE_11 38316032\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sócio Ostensivo)",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_31368259000113",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO CIDADE MORENA - CAMPO GRANDE-MS",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO CIDADE MORENA - CAMPO GRANDE-MS (PJ_31368259000113)\nCONSORCIO CIDADE MORENA\nRUA INAJA, 366 - CENTRO - PINHAIS - PR\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_contabilidade@perkons.com\n--> EN_INAJA 366-PINHAIS-PR\n--> TE_41 35443232\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_31549874000126",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO PROCESSAMENTO E TECNOLOGIA - CPT",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO PROCESSAMENTO E TECNOLOGIA - CPT (PJ_31549874000126)\nQUADRA SAUS QUADRA 1, S/N - BLOCO N LOJA 101 EDIF TERRA BRASILIS PARTE H-ASA SUL - BRASILIA - DF\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 1):\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_31688915000165",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO GRU-SINALIZACAO",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO GRU-SINALIZACAO (PJ_31688915000165)\nRUA DOM LUIS FELIPE DE ORLEANS, N426 - VILA MARIA BAIXA - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_jacqueline.ponontin@serget.com.br\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_37590732000199",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO CMT CUIABA MONITORAMENTO DE TRANSITO/2020",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO CMT CUIABA MONITORAMENTO DE TRANSITO/2020 (PJ_37590732000199)\nCONSORCIO CMT CUIABA MONITORAMENTO DE TRANSITO/2020\nAVENIDA FERNANDO CORREA DA COSTA, 248 - PISO SUPERIOR SALA 05-POCAO - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> TE_11 33892727\n--> TE_11 35135000\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_39568322000177",
    "image": "images\\pj_brasil_inativa.png",
    "label": "CONSORCIO VIAS CAPITAL 2020",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO VIAS CAPITAL 2020 (PJ_39568322000177)\nCONSORCIO VIAS CAPITAL\nRUA JULIANO LUCCHI, 134 - JARDIM ELDORADO - PALHOCA - SC\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_jair@sinasc.com.br\n--> EN_JULIANO LUCCHI 134-PALHOCA-SC\n--> TE_48 21063000\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_39808214000124",
    "image": "images\\pj_brasil_inativa.png",
    "label": "SMC - CONSORCIO RODOVIAS SEGURAS MT - L5",
    "shape": "image",
    "size": 20,
    "title": "SMC - CONSORCIO RODOVIAS SEGURAS MT - L5 (PJ_39808214000124)\nSMC - CONSORCIO RODOVIAS SEGURAS MT\nRUA U, SN - RUA 21 LOTE 07 AO 13 QUADRA 2/7 SALA SMC-DISTRITO INDUSTRIAL - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com.br\n--> EN_AO LOTE QUADRA RUA SALA SMC U 21 7 13 2 7-CUIABA-MT\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_39841452000131",
    "image": "images\\pj_brasil_inativa.png",
    "label": "SMC - CONSORCIO RODOVIAS SEGURAS MT - L1",
    "shape": "image",
    "size": 20,
    "title": "SMC - CONSORCIO RODOVIAS SEGURAS MT - L1 (PJ_39841452000131)\nSMC - CONSORCIO RODOVIAS SEGURAS MT\nRUA U, SN - RUA 21 LOTE 07 AO 13 QUADRA 2/7 SALA SMC-DISTRITO INDUSTRIAL - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com.br\n--> EN_AO LOTE QUADRA RUA SALA SMC U 21 7 13 2 7-CUIABA-MT\n--> TE_65 36254410\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_39841467000108",
    "image": "images\\pj_brasil_inativa.png",
    "label": "SMC - CONSORCIO RODOVIAS SEGURAS MT - L2",
    "shape": "image",
    "size": 20,
    "title": "SMC - CONSORCIO RODOVIAS SEGURAS MT - L2 (PJ_39841467000108)\nSMC - CONSORCIO RODOVIAS SEGURAS MT\nRUA U, SN - RUA 21 LOTE 07 AO 13 QUADRA 2/7 SALA SMC-DISTRITO INDUSTRIAL - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com.br\n--> EN_AO LOTE QUADRA RUA SALA SMC U 21 7 13 2 7-CUIABA-MT\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_39912350000160",
    "image": "images\\pj_brasil_inativa.png",
    "label": "SMC - CONSORCIO RODOVIAS SEGURAS MT - L4",
    "shape": "image",
    "size": 20,
    "title": "SMC - CONSORCIO RODOVIAS SEGURAS MT - L4 (PJ_39912350000160)\nSMC - CONSORCIO RODOVIAS SEGURAS MT\nRUA U, SN - RUA 21 LOTE 07 AO 13 QUADRA 2/7 SALA SMC-DISTRITO INDUSTRIAL - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com.br\n--> EN_AO LOTE QUADRA RUA SALA SMC U 21 7 13 2 7-CUIABA-MT\n--> TE_65 41415031\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_39912386000143",
    "image": "images\\pj_brasil_inativa.png",
    "label": "SMC - CONSORCIO RODOVIAS SEGURAS MT - L3",
    "shape": "image",
    "size": 20,
    "title": "SMC - CONSORCIO RODOVIAS SEGURAS MT - L3 (PJ_39912386000143)\nSMC - CONSORCIO RODOVIAS SEGURAS MT\nRUA U, SN - RUA 21 LOTE 07 AO 13 QUADRA 2/7 SALA SMC-DISTRITO INDUSTRIAL - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com.br\n--> EN_AO LOTE QUADRA RUA SALA SMC U 21 7 13 2 7-CUIABA-MT\n--> TE_65 41415031\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_42422233000122",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO SINAL GRU",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SINAL GRU (PJ_42422233000122)\nRUA TAGUA, 206 - 208-LIBERDADE - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com\n--> EN_TAGUA 206 208-SAO PAULO-SP\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_43455189000110",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO SINAL RO",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SINAL RO (PJ_43455189000110)\nRUA PRUDENTE DE MORAES, 2528 - SALA 01 PISO 01-CENTRO - PORTO VELHO - RO\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_comercial@serget.com.br\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_43698648000196",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO MOBILIDADE SUL",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO MOBILIDADE SUL (PJ_43698648000196)\nRODOVIA PR-423, S/N - CAMPO DO MEIO - CAMPO LARGO - PR\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_sitran@sitran.com.br\n--> EN_PRAIA 423-CAMPO LARGO-PR\n--> TE_31 33893900\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_44661720000173",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO DATAPROCES-GO",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO DATAPROCES-GO (PJ_44661720000173)\nRUA DOM LUIS FELIPE DE ORLEANS, 426 - VILA MARIA BAIXA - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_jacqueline.ponontin@serget.com.br\n--> EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_45036083000107",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CTS - CONSORCIO TRANSITO SEGURO 2022",
    "shape": "image",
    "size": 20,
    "title": "CTS - CONSORCIO TRANSITO SEGURO 2022 (PJ_45036083000107)\nCTS - CONSORCIO TRANSITO SEGURO 2022\nRUA U, SN - RUA 21 LOTE 7 AO 13 QUADRA 2/7 SALA CTS-DISTRITO INDUSTRIAL - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com.br\n--> EN_AO CTS LOTE QUADRA RUA SALA U 21 7 13 2 7-CUIABA-MT\n--> TE_65 36254410\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_46495989000152",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO RODOVIA SEGURA",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO RODOVIA SEGURA (PJ_46495989000152)\nCONSORCIO RODOVIA SEGURA\nRUA U, SN - RUA 21 LOTE 7 AO 13 QUADRA 2/7 SALA CTS-DISTRITO INDUSTRIAL - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com.br\n--> EN_AO CTS LOTE QUADRA RUA SALA U 21 7 13 2 7-CUIABA-MT\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0,
    "_tooltip_html": "CONSORCIO RODOVIA SEGURA (PJ_46495989000152)\nCONSORCIO RODOVIA SEGURA\nRUA U, SN - RUA 21 LOTE 7 AO 13 QUADRA 2/7 SALA CTS-DISTRITO INDUSTRIAL - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com.br\n--> EN_AO CTS LOTE QUADRA RUA SALA U 21 7 13 2 7-CUIABA-MT\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)"
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_46797505000120",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO S. J. S SINAL",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO S. J. S SINAL (PJ_46797505000120)\nRUA DOM LUIS FELIPE DE ORLEANS, 426 - VILA MARIA BAIXA - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com\n--> EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_47701262000147",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO MONITRAN GRU",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO MONITRAN GRU (PJ_47701262000147)\nAVENIDA BRIGADEIRO FARIA LIMA, 3287 - COCAIA - GUARULHOS - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_comercial@serget.com.br\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_47783811000170",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO SERCONTEC MATO GROSSO",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SERCONTEC MATO GROSSO (PJ_47783811000170)\nCONSORCIO SERCONTEC MATO GROSSO\nRUA U, SN - RUA 21 LOTE 7 AO 13 QUADRA 2/7 SL CONS SERCONTEC-DISTRITO INDUSTRIAL - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_comercial@serget.com.br\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_48700605000111",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO VARZEA MT",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO VARZEA MT (PJ_48700605000111)\nCONSORCIO VARZEA MT\nRUA HAVANA (RES ALAMEDA), 23 - QUADRA199 LOTE 231-PONTE NOVA - VARZEA GRANDE - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_comercial@serget.com.br\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_53060957000190",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO SAO PAULO INTELIGENTE",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SAO PAULO INTELIGENTE (PJ_53060957000190)\nAVENIDA PRESIDENTE ALTINO, 1925 - GALPAO2 BLOCO C-JAGUARE - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 6):\n--> EM_fiscal@tecnologiagto.com.br\n--> EN_ALTINO BLOCO C GALPAO PRESIDENTE 1925 2-SAO PAULO-SP\n--> TE_11 38316032\n--> TE_11 38316033\n--> TE_11 38316034\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 6,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_55892124000110",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO PIRA SEGURA",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO PIRA SEGURA (PJ_55892124000110)\nRUA ANTONIO ALCANTARA MACHADO, 331 - VILA PACAEMBU - PIRACICABA - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com.br\n--> EN_ALCANTARA ANTONIO MACHADO 331-PIRACICABA-SP\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_56932533000166",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO MONITORA PIRA",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO MONITORA PIRA (PJ_56932533000166)\nRUA ANTONIO ALCANTARA MACHADO, 331 - VILA PACAEMBU - PIRACICABA - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_comercial@serget.com.br\n--> EN_ALCANTARA ANTONIO MACHADO 331-PIRACICABA-SP\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_56943390000198",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO SINAL MT",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO SINAL MT (PJ_56943390000198)\nCONSORCIO SINAL MT\nAVENIDA GENERAL VALE, 182 - SALA 309 D-POCAO - CUIABA - MT\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_comercial@serget.com.br\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_57931070000180",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO OSASCO MAIS SEGURA",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO OSASCO MAIS SEGURA (PJ_57931070000180)\nOSASCO MAIS SEGURA\nRUA MARIA APARECIDA PRADO, 110 - JARDIM SANTA MARIA - JACAREI - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EN_APARECIDA MARIA PRADO 110-JACAREI-SP\n--> TE_12 21341414\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_59088144000194",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO PAULISTA DE FISCALIZACAO",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO PAULISTA DE FISCALIZACAO (PJ_59088144000194)\nAVENIDA PRESIDENTE ALTINO, 1925 - JAGUARE - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 5):\n--> EM_fiscal@tecnologiagto.com.br\n--> EN_ALTINO PRESIDENTE 1925-SAO PAULO-SP\n--> TE_11 38316032\n--> TE_11 59041787\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 5,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_62357503000176",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO TRANSEG GRU",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO TRANSEG GRU (PJ_62357503000176)\nAVENIDA BRIGADEIRO FARIA LIMA, 1478 - ANDAR 20 CONJ 2004-COCAIA - GUARULHOS - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 2):\n--> TE_11 94108885\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_62783861000140",
    "image": "images\\pj_brasil_ativa.png",
    "label": "CONSORCIO CG SEGURA",
    "shape": "image",
    "size": 20,
    "title": "CONSORCIO CG SEGURA (PJ_62783861000140)\nRUA DOM LUIS FELIPE DE ORLEANS, 426 - VILA MARIA BAIXA - SAO PAULO - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 4):\n--> EM_moises.moraes@serget.com.br\n--> EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP\n--> TE_11 33892727\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sociedade Consorciada)",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_comercial@serget.com.br",
    "image": "images\\email.png",
    "label": "comercial@serget.com.br",
    "shape": "image",
    "size": 15,
    "title": "comercial@serget.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 15):\n<-- PJ_CONSORCIO MONITORA PIRA\n<-- PJ_CONSORCIO MONITRAN GRU\n<-- PJ_CONSORCIO PIRA SEGURA\n<-- PJ_CONSORCIO RODOVIA SEGURA\n<-- PJ_CONSORCIO SERCONTEC MATO GROSSO\n<-- PJ_CONSORCIO SINAL MT\n<-- PJ_CONSORCIO SINAL RO\n<-- PJ_CONSORCIO VARZEA MT\n<-- PJ_CTS - CONSORCIO TRANSITO SEGURO 2022\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L1\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L2\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L3\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L4\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L5",
    "value": 15,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP",
    "image": "images\\endereco.png",
    "label": "SAO PAULO - SP",
    "shape": "image",
    "size": 15,
    "title": "SP - SAO PAULO - VILA MARIA BAIXA - RUA DOM LUIS FELIPE DE ORLEANS, 426\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 6):\n<-- PJ_CONSORCIO CG SEGURA\n<-- PJ_CONSORCIO DATAPROCES-GO\n<-- PJ_CONSORCIO MOVI-GRU - CONSORCIO MOBILIDADE VIARIA GUARULHOS\n<-- PJ_CONSORCIO S. J. S SINAL\n<-- PJ_CONSORCIO SDE\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA",
    "value": 6,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 26362727",
    "image": "images\\telefone.png",
    "label": "11 26362727",
    "shape": "image",
    "size": 15,
    "title": "11 26362727\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO VIARIO GRANDE JUNDIAI\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_CARLOS LINDEMBERG 1514-VILA VELHA-ES",
    "image": "images\\endereco.png",
    "label": "VILA VELHA - ES",
    "shape": "image",
    "size": 15,
    "title": "ES - VILA VELHA - ARIBIRI - RODOVIA CARLOS LINDEMBERG, 1514\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO GERENCIAMENTO DO TRANSITO DE VILA VELHA - GETRAN.",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_27 3249050",
    "image": "images\\telefone.png",
    "label": "27 3249050",
    "shape": "image",
    "size": 15,
    "title": "27 3249050\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO GERENCIAMENTO DO TRANSITO DE VILA VELHA - GETRAN.",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_fiscal@escriteccontabil.com.br",
    "image": "images\\email.png",
    "label": "fiscal@escriteccontabil.com.br",
    "shape": "image",
    "size": 15,
    "title": "fiscal@escriteccontabil.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO BRAVIAS",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_ARROZEIRA ESTRADA 820-ELDORADO DO SUL-RS",
    "image": "images\\endereco.png",
    "label": "ELDORADO DO SUL - RS",
    "shape": "image",
    "size": 15,
    "title": "RS - ELDORADO DO SUL - CENTRO - AVENIDA ESTRADA DA ARROZEIRA, 820\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO BRAVIAS",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_51 33424355",
    "image": "images\\telefone.png",
    "label": "51 33424355",
    "shape": "image",
    "size": 15,
    "title": "51 33424355\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO BRAVIAS",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_moises.moraes@serget.com.br",
    "image": "images\\email.png",
    "label": "moises.moraes@serget.com.br",
    "shape": "image",
    "size": 15,
    "title": "moises.moraes@serget.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO CG SEGURA\n<-- PJ_CONSORCIO SDE",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_jacqueline.panontin@serget.com.br",
    "image": "images\\email.png",
    "label": "jacqueline.panontin@serget.com.br",
    "shape": "image",
    "size": 15,
    "title": "jacqueline.panontin@serget.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO VIARIO GRANDE JUNDIAI",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_eliane@slmassessoriacontabil.com.br",
    "image": "images\\email.png",
    "label": "eliane@slmassessoriacontabil.com.br",
    "shape": "image",
    "size": 15,
    "title": "eliane@slmassessoriacontabil.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO SPTRANSITO - MONITORAMENTO E FISCALIZACAO ELETRONICA",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 38316032",
    "image": "images\\telefone.png",
    "label": "11 38316032",
    "shape": "image",
    "size": 15,
    "title": "11 38316032\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 4):\n<-- PJ_CONSORCIO PAULISTA DE FISCALIZACAO\n<-- PJ_CONSORCIO SAO PAULO INTELIGENTE\n<-- PJ_CONSORCIO SPTRANSITO - MONITORAMENTO E FISCALIZACAO ELETRONICA\n<-- PJ_SERGET MOBILIDADE VIARIA LTDA - SCP",
    "value": 4,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_jorgemarco.rodrigues1@gmail.com",
    "image": "images\\email.png",
    "label": "jorgemarco.rodrigues1@gmail.com",
    "shape": "image",
    "size": 15,
    "title": "jorgemarco.rodrigues1@gmail.com\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO GUARDA BEM - SERGET",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 21085591",
    "image": "images\\telefone.png",
    "label": "11 21085591",
    "shape": "image",
    "size": 15,
    "title": "11 21085591\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO GUARDA BEM - SERGET",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 36865591",
    "image": "images\\telefone.png",
    "label": "11 36865591",
    "shape": "image",
    "size": 15,
    "title": "11 36865591\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO GUARDA BEM - SERGET",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 36867458",
    "image": "images\\telefone.png",
    "label": "11 36867458",
    "shape": "image",
    "size": 15,
    "title": "11 36867458\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO GUARDA BEM - SERGET",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_CURUCA 473-SAO PAULO-SP",
    "image": "images\\endereco.png",
    "label": "SAO PAULO - SP",
    "shape": "image",
    "size": 15,
    "title": "SP - SAO PAULO - VILA MARIA BAIXA - RUA CURUCA, 473\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO CMT - CUIABA MONITORAMENTO DE TRANSITO",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 36671213",
    "image": "images\\telefone.png",
    "label": "11 36671213",
    "shape": "image",
    "size": 15,
    "title": "11 36671213\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO CMT - CUIABA MONITORAMENTO DE TRANSITO",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_65 36653088",
    "image": "images\\telefone.png",
    "label": "65 36653088",
    "shape": "image",
    "size": 15,
    "title": "65 36653088\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO MT TUR",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_61 33637403",
    "image": "images\\telefone.png",
    "label": "61 33637403",
    "shape": "image",
    "size": 15,
    "title": "61 33637403\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO MONITRAN - MONITORAMENTO ELETRONICO DE TRANSITO",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_JULIANO LUCCHI 134-PALHOCA-SC",
    "image": "images\\endereco.png",
    "label": "PALHOCA - SC",
    "shape": "image",
    "size": 15,
    "title": "SC - PALHOCA - JARDIM ELDORADO - RUA JULIANO LUCCHI, 134\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO VIAS CAPITAL\n<-- PJ_CONSORCIO VIAS CAPITAL 2020",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_48 21063000",
    "image": "images\\telefone.png",
    "label": "48 21063000",
    "shape": "image",
    "size": 15,
    "title": "48 21063000\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO VIAS CAPITAL\n<-- PJ_CONSORCIO VIAS CAPITAL 2020",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_48 21063005",
    "image": "images\\telefone.png",
    "label": "48 21063005",
    "shape": "image",
    "size": 15,
    "title": "48 21063005\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO VIAS CAPITAL",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_48 21063008",
    "image": "images\\telefone.png",
    "label": "48 21063008",
    "shape": "image",
    "size": 15,
    "title": "48 21063008\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO VIAS CAPITAL",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_ailson@trana.com.br",
    "image": "images\\email.png",
    "label": "ailson@trana.com.br",
    "shape": "image",
    "size": 15,
    "title": "ailson@trana.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO VIAS ALENCARINAS",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_B BR KM 116 10000 9-FORTALEZA-CE",
    "image": "images\\endereco.png",
    "label": "FORTALEZA - CE",
    "shape": "image",
    "size": 15,
    "title": "CE - FORTALEZA - : B - KM 09;-JANGURUSSU - RODOVIA BR-116, 10000\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO VIAS ALENCARINAS",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_85 40061200",
    "image": "images\\telefone.png",
    "label": "85 40061200",
    "shape": "image",
    "size": 15,
    "title": "85 40061200\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO VIAS ALENCARINAS",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_comercial@tecnoviasmt.com.br",
    "image": "images\\email.png",
    "label": "comercial@tecnoviasmt.com.br",
    "shape": "image",
    "size": 15,
    "title": "comercial@tecnoviasmt.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CTS - CONSORCIO TRANSITO SEGURO",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_AO LOTE QUADRA RUA U 21 7 13 2 7-CUIABA-MT",
    "image": "images\\endereco.png",
    "label": "CUIABA - MT",
    "shape": "image",
    "size": 15,
    "title": "MT - CUIABA - RUA 21 LOTE 07 AO 13 QUADRA 2/7-DISTRITO INDUSTRIAL - RUA U, SN\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CTS - CONSORCIO TRANSITO SEGURO",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_65 30289500",
    "image": "images\\telefone.png",
    "label": "65 30289500",
    "shape": "image",
    "size": 15,
    "title": "65 30289500\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CTS - CONSORCIO TRANSITO SEGURO",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_srf.legal@meirafernandes.com.br",
    "image": "images\\email.png",
    "label": "srf.legal@meirafernandes.com.br",
    "shape": "image",
    "size": 15,
    "title": "srf.legal@meirafernandes.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO MOVI-GRU - CONSORCIO MOBILIDADE VIARIA GUARULHOS",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 35135000",
    "image": "images\\telefone.png",
    "label": "11 35135000",
    "shape": "image",
    "size": 15,
    "title": "11 35135000\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO CMT CUIABA MONITORAMENTO DE TRANSITO/2020\n<-- PJ_CONSORCIO MOVI-GRU - CONSORCIO MOBILIDADE VIARIA GUARULHOS",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_contabilidade@perkons.com",
    "image": "images\\email.png",
    "label": "contabilidade@perkons.com",
    "shape": "image",
    "size": 15,
    "title": "contabilidade@perkons.com\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO CIDADE MORENA - CAMPO GRANDE-MS",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_INAJA 366-PINHAIS-PR",
    "image": "images\\endereco.png",
    "label": "PINHAIS - PR",
    "shape": "image",
    "size": 15,
    "title": "PR - PINHAIS - CENTRO - RUA INAJA, 366\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO CIDADE MORENA - CAMPO GRANDE-MS",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_41 35443232",
    "image": "images\\telefone.png",
    "label": "41 35443232",
    "shape": "image",
    "size": 15,
    "title": "41 35443232\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO CIDADE MORENA - CAMPO GRANDE-MS",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_jacqueline.ponontin@serget.com.br",
    "image": "images\\email.png",
    "label": "jacqueline.ponontin@serget.com.br",
    "shape": "image",
    "size": 15,
    "title": "jacqueline.ponontin@serget.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO DATAPROCES-GO\n<-- PJ_CONSORCIO GRU-SINALIZACAO",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_jair@sinasc.com.br",
    "image": "images\\email.png",
    "label": "jair@sinasc.com.br",
    "shape": "image",
    "size": 15,
    "title": "jair@sinasc.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO VIAS CAPITAL 2020",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_AO LOTE QUADRA RUA SALA SMC U 21 7 13 2 7-CUIABA-MT",
    "image": "images\\endereco.png",
    "label": "CUIABA - MT",
    "shape": "image",
    "size": 15,
    "title": "MT - CUIABA - RUA 21 LOTE 07 AO 13 QUADRA 2/7 SALA SMC-DISTRITO INDUSTRIAL - RUA U, SN\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 5):\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L1\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L2\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L3\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L4\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L5",
    "value": 5,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_65 36254410",
    "image": "images\\telefone.png",
    "label": "65 36254410",
    "shape": "image",
    "size": 15,
    "title": "65 36254410\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CTS - CONSORCIO TRANSITO SEGURO 2022\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L1",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_65 41415031",
    "image": "images\\telefone.png",
    "label": "65 41415031",
    "shape": "image",
    "size": 15,
    "title": "65 41415031\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L3\n<-- PJ_SMC - CONSORCIO RODOVIAS SEGURAS MT - L4",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_comercial@serget.com",
    "image": "images\\email.png",
    "label": "comercial@serget.com",
    "shape": "image",
    "size": 15,
    "title": "comercial@serget.com\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO S. J. S SINAL\n<-- PJ_CONSORCIO SINAL GRU",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_TAGUA 206 208-SAO PAULO-SP",
    "image": "images\\endereco.png",
    "label": "SAO PAULO - SP",
    "shape": "image",
    "size": 15,
    "title": "SP - SAO PAULO - 208-LIBERDADE - RUA TAGUA, 206\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO SINAL GRU",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_sitran@sitran.com.br",
    "image": "images\\email.png",
    "label": "sitran@sitran.com.br",
    "shape": "image",
    "size": 15,
    "title": "sitran@sitran.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO MOBILIDADE SUL",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_PRAIA 423-CAMPO LARGO-PR",
    "image": "images\\endereco.png",
    "label": "CAMPO LARGO - PR",
    "shape": "image",
    "size": 15,
    "title": "PR - CAMPO LARGO - CAMPO DO MEIO - RODOVIA PR-423, S/N\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO MOBILIDADE SUL",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_31 33893900",
    "image": "images\\telefone.png",
    "label": "31 33893900",
    "shape": "image",
    "size": 15,
    "title": "31 33893900\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO MOBILIDADE SUL",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_AO CTS LOTE QUADRA RUA SALA U 21 7 13 2 7-CUIABA-MT",
    "image": "images\\endereco.png",
    "label": "CUIABA - MT",
    "shape": "image",
    "size": 15,
    "title": "MT - CUIABA - RUA 21 LOTE 7 AO 13 QUADRA 2/7 SALA CTS-DISTRITO INDUSTRIAL - RUA U, SN\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO RODOVIA SEGURA\n<-- PJ_CTS - CONSORCIO TRANSITO SEGURO 2022",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_fiscal@tecnologiagto.com.br",
    "image": "images\\email.png",
    "label": "fiscal@tecnologiagto.com.br",
    "shape": "image",
    "size": 15,
    "title": "fiscal@tecnologiagto.com.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO PAULISTA DE FISCALIZACAO\n<-- PJ_CONSORCIO SAO PAULO INTELIGENTE",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_ALTINO BLOCO C GALPAO PRESIDENTE 1925 2-SAO PAULO-SP",
    "image": "images\\endereco.png",
    "label": "SAO PAULO - SP",
    "shape": "image",
    "size": 15,
    "title": "SP - SAO PAULO - GALPAO2 BLOCO C-JAGUARE - AVENIDA PRESIDENTE ALTINO, 1925\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO SAO PAULO INTELIGENTE",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 38316033",
    "image": "images\\telefone.png",
    "label": "11 38316033",
    "shape": "image",
    "size": 15,
    "title": "11 38316033\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO SAO PAULO INTELIGENTE",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 38316034",
    "image": "images\\telefone.png",
    "label": "11 38316034",
    "shape": "image",
    "size": 15,
    "title": "11 38316034\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO SAO PAULO INTELIGENTE",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_ALCANTARA ANTONIO MACHADO 331-PIRACICABA-SP",
    "image": "images\\endereco.png",
    "label": "PIRACICABA - SP",
    "shape": "image",
    "size": 15,
    "title": "SP - PIRACICABA - VILA PACAEMBU - RUA ANTONIO ALCANTARA MACHADO, 331\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 2):\n<-- PJ_CONSORCIO MONITORA PIRA\n<-- PJ_CONSORCIO PIRA SEGURA",
    "value": 2,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_APARECIDA MARIA PRADO 110-JACAREI-SP",
    "image": "images\\endereco.png",
    "label": "JACAREI - SP",
    "shape": "image",
    "size": 15,
    "title": "SP - JACAREI - JARDIM SANTA MARIA - RUA MARIA APARECIDA PRADO, 110\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO OSASCO MAIS SEGURA",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_12 21341414",
    "image": "images\\telefone.png",
    "label": "12 21341414",
    "shape": "image",
    "size": 15,
    "title": "12 21341414\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO OSASCO MAIS SEGURA",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EN_ALTINO PRESIDENTE 1925-SAO PAULO-SP",
    "image": "images\\endereco.png",
    "label": "SAO PAULO - SP",
    "shape": "image",
    "size": 15,
    "title": "SP - SAO PAULO - JAGUARE - AVENIDA PRESIDENTE ALTINO, 1925\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO PAULISTA DE FISCALIZACAO",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 59041787",
    "image": "images\\telefone.png",
    "label": "11 59041787",
    "shape": "image",
    "size": 15,
    "title": "11 59041787\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO PAULISTA DE FISCALIZACAO",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_11 94108885",
    "image": "images\\telefone.png",
    "label": "11 94108885",
    "shape": "image",
    "size": 15,
    "title": "11 94108885\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_CONSORCIO TRANSEG GRU",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "PF_***133798**-RENATA DE MORAES",
    "image": "images\\pf_mulher.png",
    "label": "RENATA DE MORAES",
    "shape": "image",
    "size": 20,
    "title": "RENATA DE MORAES (PF_***133798**)\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n--> PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Administrador)",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "PF_***201908**-MOISES DE MORAES",
    "image": "images\\pf_homem.png",
    "label": "MOISES DE MORAES",
    "shape": "image",
    "size": 20,
    "title": "MOISES DE MORAES (PF_***201908**)\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n--> PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Administrador)",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_52201596000191",
    "image": "images\\pj_brasil_ativa.png",
    "label": "N.L PARTICIPACOES LTDA",
    "shape": "image",
    "size": 20,
    "title": "N.L PARTICIPACOES LTDA (PJ_52201596000191)\nN.L PARTICIPACOES\nRUA BICOS DE PAPAGAIO, 180 - NOVA CEREJEIRA - ATIBAIA - SP\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 1):\n--> PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sócio)",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "algoritmos": "Betweenness Centrality: SERGET MOBILIDADE VIARIA LTDA\nCloseness Centrality:      SERGET MOBILIDADE VIARIA LTDA\nEigenvector Centrality:   SERGET MOBILIDADE VIARIA LTDA\nDegree Centrality:          SERGET MOBILIDADE VIARIA LTDA\nPagerank (Bidirecional): SERGET MOBILIDADE VIARIA LTDA\n\n#####  BETWEENNESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 2118.0\n2) SINAPE SINALIZACAO VIARIA LTDA: 1023.0\n3) CONSORCIO ALIANCA VIARIA GO E MS: 216.0\n#####  CLOSENESS CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.663\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.507\n3) CONSORCIO ALIANCA VIARIA: 0.507\n#####  EIGENVECTOR CENTRALITY  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.698\n2) CONSORCIO ALIANCA VIARIA GO E MS: 0.111\n3) CONSORCIO ALIANCA VIARIA: 0.111\n#####  PAGERANK (ARESTAS BIDIRECIONAIS)  #####\n1) SERGET MOBILIDADE VIARIA LTDA: 0.329\n2) SINAPE SINALIZACAO VIARIA LTDA: 0.133\n3) CONSORCIO ALIANCA VIARIA GO E MS: 0.013",
    "camadas_solicitadas": 1,
    "font": {
      "color": "#777777"
    },
    "id": "PJ_59739356000194",
    "image": "images\\pj_brasil_ativa.png",
    "label": "LUX AQUILA PARTICIPACOES S.A.",
    "shape": "image",
    "size": 20,
    "title": "LUX AQUILA PARTICIPACOES S.A. (PJ_59739356000194)\nRUA ARACAJU, 209 - ANDAR TERREO SALA 2 CXPST 504-MOURA - GRAMADO - RS\n\nNÓ - Distância Alvo: -\n GRAFO - Nós: 158, Arestas: 236, Camadas Solicitadas: 1, Conectado: Sim\nMensagem: \n Nós Adjacentes (Grau 3):\n--> EM_contato@ber.adv.br\n--> PJ_SERGET MOBILIDADE VIARIA LTDA - Ativa - (Sócio)\n--> TE_51 30393500",
    "value": 3,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "EM_contato@ber.adv.br",
    "image": "images\\email.png",
    "label": "contato@ber.adv.br",
    "shape": "image",
    "size": 15,
    "title": "contato@ber.adv.br\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_LUX AQUILA PARTICIPACOES S.A.",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  },
  {
    "font": {
      "color": "#777777"
    },
    "id": "TE_51 30393500",
    "image": "images\\telefone.png",
    "label": "51 30393500",
    "shape": "image",
    "size": 15,
    "title": "51 30393500\n\nNÓ - Distância Alvo: -\nNós Adjacentes (Grau 1):\n<-- PJ_LUX AQUILA PARTICIPACOES S.A.",
    "value": 1,
    "z_group": 2,
    "z_group_total": 2,
    "z_novo": 0
  }
]);
                  edges = new vis.DataSet([
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PF_***127448**-ROBERTO MASSAYUKI NISHIMURA",
    "label": "rep-sócio-Procurador",
    "title": "rep-sócio-Procurador",
    "to": "PJ_34023887000155",
    "width": 1,
    "id": "551ad361-3c11-4dbe-b470-a57785b8ae1d"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_11414504000174",
    "width": 1,
    "id": "d02c05e6-65b6-4d09-b776-1fa2d715f27d"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_12217379000175",
    "width": 1,
    "id": "07aceb4b-7188-486a-a96f-e61ac703f168"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_12632230000152",
    "width": 1,
    "id": "7cd0c93d-a087-467f-b9b6-ad935168daee"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_14133732000164",
    "width": 1,
    "id": "cd6b9542-96b6-49c2-b975-2129565e7d40"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_18336225000189",
    "width": 1,
    "id": "d412dce0-3cb3-4ac3-a4dd-f2a788994d7e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_18580626000180",
    "width": 1,
    "id": "24db6b5f-bc80-4890-bd2e-0a5d9787bc76"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "color": "#1ac938",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_19388662000109",
    "value": 12,
    "width": 1,
    "id": "36a766b3-cde0-4900-bb3e-5cc329dc7236"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "color": "#8b2be2",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_19388666000197",
    "value": 12,
    "width": 1,
    "id": "23236927-0610-40c4-9c1c-3d6c951e32a0"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "color": "#9f4800",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_22103852000147",
    "value": 12,
    "width": 1,
    "id": "233cf3c4-9d18-4cc4-9d3b-8b5d7a034cab"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_27870980000130",
    "width": 1,
    "id": "880746ef-0166-4337-9fd9-b3609c814552"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sócio",
    "title": "Sócio",
    "to": "PJ_28029634000196",
    "width": 1,
    "id": "c2b00127-fe8c-4f90-a640-10190f421c8e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_30371534000195",
    "width": 1,
    "id": "2b59c607-cc18-4670-89af-4bcf11ea7059"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sócio",
    "title": "Sócio",
    "to": "PJ_33045382000129",
    "width": 1,
    "id": "edf70f9f-a596-4925-96f2-91a46bb116f3"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_43721157000119",
    "width": 1,
    "id": "03e3ab00-d1af-432a-b7e9-3027a7f115b5"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_44762529000118",
    "width": 1,
    "id": "9ef6005a-c76e-4a6d-b95f-bb28b10e6d9a"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_47732562000193",
    "width": 1,
    "id": "899d3129-1238-4011-9888-e732de5ece0f"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "color": "#f14cc1",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_50870028000158",
    "value": 12,
    "width": 1,
    "id": "d4d6b1b0-b431-4b40-8dc7-bb8376e83a05"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_63929274000180",
    "width": 1,
    "id": "cbacf8f9-167f-41ed-9996-bae4c4e901c8"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "",
    "to": "EM_financeiro@sinape.com.br",
    "width": 1,
    "id": "d3a3f392-0831-4871-a0cc-98e5fa8e3441"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "",
    "to": "TE_16 36358856",
    "width": 1,
    "id": "37bfb2cd-1afa-4a9a-bab0-0e75848f0e68"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "",
    "to": "TE_16 36646274",
    "width": 1,
    "id": "a70d4b93-fcdc-44ea-a644-b1fcd7f64499"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_34023887000155",
    "label": "",
    "to": "EN_DOMINGOS ZARA 80-BRODOWSKI-SP",
    "width": 1,
    "id": "96db6f1e-4ea7-44bc-ac70-bdfd5c919cdb"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PF_***541197**-THIAGO NISHIMURA",
    "label": "Administrador",
    "title": "Administrador",
    "to": "PJ_34023887000155",
    "width": 1,
    "id": "a40ae9da-278e-42fd-a27f-ecfb4144e6c4"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_28659956000119",
    "label": "Sócio",
    "title": "Sócio",
    "to": "PJ_34023887000155",
    "width": 1,
    "id": "e0f59654-364e-4cff-a262-256aa39274f5"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_28659956000119",
    "label": "",
    "to": "EM_financeiro@sinape.com.br",
    "width": 1,
    "id": "3d031306-4bbb-4a9e-a4d8-aa9121e0192f"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_28659956000119",
    "label": "",
    "to": "TE_16 36646274",
    "width": 1,
    "id": "1bd1cc60-20e6-4d7f-ad34-52cb65661d50"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_28659956000119",
    "label": "",
    "to": "EN_APARTAMENTO CILENTO GIUSEPPE 1215 84-RIBEIRAO PRETO-SP",
    "width": 1,
    "id": "f503c519-50fa-47c8-9471-facbfea1d612"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_11414504000174",
    "label": "",
    "to": "EM_rmbh@terra.com.br",
    "width": 1,
    "id": "3d2de6ae-a036-4955-9e54-45cb7ada23be"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_11414504000174",
    "label": "",
    "to": "TE_31 32221545",
    "width": 1,
    "id": "4f2df6b2-7b52-4676-ae1a-70bae724c8e3"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_11414504000174",
    "label": "",
    "to": "TE_31 32711471",
    "width": 1,
    "id": "b8cb4282-d17f-4755-9a93-a6a161269e02"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_12217379000175",
    "label": "",
    "to": "EN_ALVES PROTASIO 5851-PORTO ALEGRE-RS",
    "width": 1,
    "id": "5aef9c8e-5397-47cb-8470-9863df1779a9"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_12217379000175",
    "label": "",
    "to": "TE_51 33343836",
    "width": 1,
    "id": "6850d21e-078f-4e7e-a169-cf3a9fca0c87"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_12632230000152",
    "label": "",
    "to": "EN_ALVES ANDAR SANSAO SANTOS 20 2-SAO PAULO-SP",
    "width": 1,
    "id": "a21e5c84-4da4-4dbf-b8de-ea352b08672b"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_12632230000152",
    "label": "",
    "to": "TE_11 55072007",
    "width": 1,
    "id": "63290ab3-f49a-4014-9416-1989547b3c2e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_18336225000189",
    "label": "",
    "to": "EM_rmbh@terra.com.br",
    "width": 1,
    "id": "938d1557-973f-4978-acd8-7d001f4e5686"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_18336225000189",
    "label": "",
    "to": "TE_31 32221545",
    "width": 1,
    "id": "76b5af74-2781-4c6c-9022-584539c78c7e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_18336225000189",
    "label": "",
    "to": "TE_31 32711471",
    "width": 1,
    "id": "2cd476e2-7711-44e5-8f91-0597281ab64c"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_18580626000180",
    "label": "",
    "to": "EM_gustavo@meng.com.br",
    "width": 1,
    "id": "a8fea5f6-e498-4f3f-924d-fbd959884622"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_18580626000180",
    "label": "",
    "to": "TE_11 33855600",
    "width": 1,
    "id": "93b8bd81-a6da-4604-981d-abc5033b5d0e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_19388662000109",
    "label": "",
    "to": "EM_espaulocontabil@yahoo.com.br",
    "width": 1,
    "id": "f6353696-b8c4-492d-9d58-27e628d7e19a"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_19388662000109",
    "label": "",
    "to": "TE_67 30425722",
    "width": 1,
    "id": "f454d2d0-331e-42a8-ab47-dd754898d8c3"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_19388662000109",
    "label": "",
    "to": "TE_67 30426867",
    "width": 1,
    "id": "9fdeaa72-1028-49fe-813e-003691b0390e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_19388666000197",
    "label": "",
    "to": "EM_financeiro@sinape.com.br",
    "width": 1,
    "id": "d6b155b3-d53c-4d85-9e6f-0e98c6885058"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_19388666000197",
    "label": "",
    "to": "TE_16 36358856",
    "width": 1,
    "id": "5c75fe49-8798-4e52-bd6a-8d598b3c40bd"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_19388666000197",
    "label": "",
    "to": "TE_16 36643478",
    "width": 1,
    "id": "edfb05eb-0c23-4913-aade-a06c56e41a3a"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_19388666000197",
    "label": "",
    "to": "TE_16 36646274",
    "width": 1,
    "id": "8a7fc3f9-e6a8-40f8-aafc-fa0d8c4af798"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_22103852000147",
    "label": "",
    "to": "EM_c.parana.ba@hotmail.com",
    "width": 1,
    "id": "f1b63bb7-9050-4143-b8d5-03d21ca6c3cf"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_22103852000147",
    "label": "",
    "to": "EN_FRANCISCO SAO 521-BARREIRAS-BA",
    "width": 1,
    "id": "58d72e46-755f-47f3-95ca-b41c9e5b8a75"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_22103852000147",
    "label": "",
    "to": "TE_77 36118445",
    "width": 1,
    "id": "69cbd4bc-b99a-4cc8-8329-a340690544c2"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_27870980000130",
    "label": "",
    "to": "EM_cerutti.contabil@terra.com.br",
    "width": 1,
    "id": "8920cccf-ccc6-40d5-8197-cbe34c666ef9"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_27870980000130",
    "label": "",
    "to": "TE_27 33191399",
    "width": 1,
    "id": "754188a7-0ea1-4c03-838c-2402cfbb3976"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_28029634000196",
    "label": "",
    "to": "TE_16 36646274",
    "width": 1,
    "id": "e9eb8160-810e-4600-915c-bedd4fde6a56"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_28029634000196",
    "label": "",
    "to": "EM_financeiro@yorkservicos.com.br",
    "width": 1,
    "id": "acf52e7f-5c06-4283-89f9-e6b2054570dc"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_28029634000196",
    "label": "",
    "to": "EN_AMERICAS BLC SAL 700 6 156-RIO DE JANEIRO-RJ",
    "width": 1,
    "id": "e0eb5358-76a8-4944-bae7-6d3e789fb9f6"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_30371534000195",
    "label": "",
    "to": "EM_cerutti.contabil@terra.com.br",
    "width": 1,
    "id": "5647b5be-70dc-4cbd-857b-891f2e6ff6c0"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_30371534000195",
    "label": "",
    "to": "TE_27 33191399",
    "width": 1,
    "id": "0cb76419-af2e-4c93-a0e2-a457c9c5d3d9"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_33045382000129",
    "label": "",
    "to": "TE_16 36646274",
    "width": 1,
    "id": "98ce8472-f4d9-42ba-8d40-a5031719cb73"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_43721157000119",
    "label": "",
    "to": "EM_financeiro@sinape.com.br",
    "width": 1,
    "id": "a12a70cd-2d3b-4758-8efa-477fefc4608d"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_43721157000119",
    "label": "",
    "to": "TE_16 36646274",
    "width": 1,
    "id": "d2f6f007-0210-4d65-be1e-cf0d0d6ac019"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_44762529000118",
    "label": "",
    "to": "EM_financeiro@sinape.com.br",
    "width": 1,
    "id": "251ca3c0-5fde-4489-9813-ed0148258113"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_44762529000118",
    "label": "",
    "to": "TE_16 36646274",
    "width": 1,
    "id": "a70a5d36-4b16-4007-8308-8298ed6cd5cd"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_44762529000118",
    "label": "",
    "to": "EN_DOMINGOS ZARA 80-BRODOWSKI-SP",
    "width": 1,
    "id": "715a4405-c424-45c3-b086-0e6ab3800713"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_47732562000193",
    "label": "",
    "to": "EM_legalizacao@gma3.com.br",
    "width": 1,
    "id": "379424cb-8e9e-4b83-83e6-da7c1a554531"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_50870028000158",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "30069725-9989-4029-a878-4fd3b834441c"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_63929274000180",
    "label": "",
    "to": "EM_cjd@splice.com.br",
    "width": 1,
    "id": "cc1a3b77-91cd-43fd-bfee-7719e3cd00c9"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_63929274000180",
    "label": "",
    "to": "EN_JUSCELINO KUBITSCHEK OLIVEIRA 154-VOTORANTIM-SP",
    "width": 1,
    "id": "b3725219-7d06-4307-9926-cc72f8141c1a"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_63929274000180",
    "label": "",
    "to": "TE_15 33538400",
    "width": 1,
    "id": "dd4e3890-5fa9-4adb-a4d1-cc8595d21167"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "color": "#1ac938",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_19388662000109",
    "value": 12,
    "width": 1,
    "id": "1ca98bb4-3fdc-4516-a89d-28e719451f34"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "color": "#8b2be2",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_19388666000197",
    "value": 12,
    "width": 1,
    "id": "619bfd88-8dc7-46e0-81cd-4ca30f2af983"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "color": "#9f4800",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_22103852000147",
    "value": 12,
    "width": 1,
    "id": "ae1419c9-e769-488a-9a56-8db66e223b7b"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "color": "#f14cc1",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_50870028000158",
    "value": 12,
    "width": 1,
    "id": "4abafad0-8e36-43ac-b393-11c01b18c6eb"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "dd85d29e-27fc-4799-8409-22a5b5d62858"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_03146137000147",
    "width": 1,
    "id": "98a0b3b6-b09b-43f3-858a-d66793bcab25"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_11504152000148",
    "width": 1,
    "id": "8da216c5-7fdd-4acc-8f3e-9e0b42bd5d60"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_14417796000197",
    "width": 1,
    "id": "0ea153c0-9612-4f3c-82a9-4a10056ad68b"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_17071550000102",
    "width": 1,
    "id": "4482ad85-10cb-4ffc-b1b6-d770697259d9"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_17990510000156",
    "width": 1,
    "id": "6330e340-fdb0-4c03-8eb8-436ba1fef05d"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_19887098000179",
    "width": 1,
    "id": "e933e883-6643-4ca1-9731-72f602e4d3d3"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_20190209000172",
    "width": 1,
    "id": "201a90d2-8cc5-4066-813a-4ca0c0c3ad87"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_20655625000107",
    "width": 1,
    "id": "ac7822a1-9ab9-43e2-b4fa-04430d262f00"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_21113837000117",
    "width": 1,
    "id": "1f3aad18-07ba-4b0e-95ae-ef4c2ce25f6e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_21611768000171",
    "width": 1,
    "id": "13c820b7-c469-46a9-a06b-ff0e56567b56"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_22041471000180",
    "width": 1,
    "id": "12006c84-55ae-420a-9e1a-924f06167b95"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_22095351000166",
    "width": 1,
    "id": "5d2da271-1a73-4b29-9223-d0c40353d591"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_25250406000153",
    "width": 1,
    "id": "6394ba70-a9e4-4138-a56f-036401445253"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_26643588000195",
    "width": 1,
    "id": "96e7000d-0134-46e8-abf2-51b2f800eceb"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sócio Ostensivo",
    "title": "Sócio Ostensivo",
    "to": "PJ_28503496000135",
    "width": 1,
    "id": "8b7d88d0-6828-4d1f-95a0-8ac761322687"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_31368259000113",
    "width": 1,
    "id": "282f7b65-d1de-4840-adf9-91e744c516b5"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_31549874000126",
    "width": 1,
    "id": "aa062834-261e-4d79-b5a1-e7e96a8cbfa2"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_31688915000165",
    "width": 1,
    "id": "321c9c16-02a7-46ba-afea-5f3d4a95c72e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_37590732000199",
    "width": 1,
    "id": "6309d8db-f511-4b5b-97de-e901ed4f4c37"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_39568322000177",
    "width": 1,
    "id": "fd007a14-92ad-4244-9d5c-cc895a3411ad"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_39808214000124",
    "width": 1,
    "id": "75899f9f-c792-4d36-bd23-98f09bc25a89"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_39841452000131",
    "width": 1,
    "id": "2c4914fa-50be-4119-8bad-68ad8165c1b5"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_39841467000108",
    "width": 1,
    "id": "528b8eb4-1244-4dbf-b683-1a52382e8108"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_39912350000160",
    "width": 1,
    "id": "6a225d9c-8da6-41eb-8768-f19b5ae6e7c8"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_39912386000143",
    "width": 1,
    "id": "f05867ee-de4e-45c2-8ef7-68b1dd34d6d1"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_42422233000122",
    "width": 1,
    "id": "06b1f5fd-33c4-4fe1-b6e1-0883762c05ea"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_43455189000110",
    "width": 1,
    "id": "fa7d0d59-5aa0-4c99-88aa-b78384278b3d"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_43698648000196",
    "width": 1,
    "id": "ac27d1bd-5f71-49a6-8faa-b869138dd371"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_44661720000173",
    "width": 1,
    "id": "6de38d53-92ea-4cbf-b471-0cbb259069ed"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_45036083000107",
    "width": 1,
    "id": "d9f34021-ba01-481a-820a-b281cc4bfd2e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_46495989000152",
    "width": 1,
    "id": "e45d0aa8-3952-48b1-a25a-a78ec2e70a94"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_46797505000120",
    "width": 1,
    "id": "737abc16-8979-42f8-a378-c4d2815c6e35"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_47701262000147",
    "width": 1,
    "id": "a6d03df4-38fd-46da-ba7a-2eb53193a178"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_47783811000170",
    "width": 1,
    "id": "cd7d085b-9388-46bb-9769-e1805d99a275"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_48700605000111",
    "width": 1,
    "id": "3fb9a6f1-d8fd-4e17-848d-1fbfb10fbb50"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_53060957000190",
    "width": 1,
    "id": "864f82ca-6430-490f-af29-aaffd32891ca"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_55892124000110",
    "width": 1,
    "id": "d1f20a0a-db2c-4b7c-bbc4-a6f654598533"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_56932533000166",
    "width": 1,
    "id": "9f64715a-a0fa-4af7-ba21-9251afe8e089"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_56943390000198",
    "width": 1,
    "id": "b161ba63-24f1-4a60-b2e6-a104172032d8"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_57931070000180",
    "width": 1,
    "id": "5dca0ec2-7fd6-4b69-a129-0b285dd7a608"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_59088144000194",
    "width": 1,
    "id": "61eb7e64-503b-42c8-b280-f3dc7a1b843f"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_62357503000176",
    "width": 1,
    "id": "02c3d0f4-cf32-45a0-8d3b-aed093b1b1c3"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "Sociedade Consorciada",
    "title": "Sociedade Consorciada",
    "to": "PJ_62783861000140",
    "width": 1,
    "id": "42b415df-2686-4970-ae34-fb0935970236"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "63c1e801-207e-4039-83e4-b7e5bcb8e77f"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "",
    "to": "EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP",
    "width": 1,
    "id": "ba5ea58f-e932-4a54-a715-8c67ad644bb5"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_02363619000196",
    "label": "",
    "to": "TE_11 26362727",
    "width": 1,
    "id": "f0daa597-8cfb-4a6f-ac9b-16bb526bc388"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_03146137000147",
    "label": "",
    "to": "EN_CARLOS LINDEMBERG 1514-VILA VELHA-ES",
    "width": 1,
    "id": "19a12f40-9f82-4199-aab4-7c6494912257"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_03146137000147",
    "label": "",
    "to": "TE_27 3249050",
    "width": 1,
    "id": "991bb801-12f7-43de-9e7f-b004f14bdc20"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_11504152000148",
    "label": "",
    "to": "EM_fiscal@escriteccontabil.com.br",
    "width": 1,
    "id": "15cef3da-58aa-4854-8ae2-0fe4f56662bb"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_11504152000148",
    "label": "",
    "to": "EN_ARROZEIRA ESTRADA 820-ELDORADO DO SUL-RS",
    "width": 1,
    "id": "cef09737-6040-4349-9840-20e9f099de4e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_11504152000148",
    "label": "",
    "to": "TE_51 33424355",
    "width": 1,
    "id": "9067f67a-0ad8-47d9-b56e-7e753d24fd99"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_14417796000197",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "f941d9e8-86db-4f5c-8468-bf5b4eeae891"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_14417796000197",
    "label": "",
    "to": "EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP",
    "width": 1,
    "id": "6d530833-71bd-4a87-9dbc-08f795339ac2"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_14417796000197",
    "label": "",
    "to": "EM_moises.moraes@serget.com.br",
    "width": 1,
    "id": "bea6a0ff-071f-4fa0-8587-37581668ac9b"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_17071550000102",
    "label": "",
    "to": "EN_ALVES ANDAR SANSAO SANTOS 20 2-SAO PAULO-SP",
    "width": 1,
    "id": "0060dc70-0768-47fb-a246-ca2d30d20975"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_17071550000102",
    "label": "",
    "to": "TE_11 55072007",
    "width": 1,
    "id": "a19d119d-94f8-45ea-b1e8-dc4538dd1b83"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_17990510000156",
    "label": "",
    "to": "TE_11 26362727",
    "width": 1,
    "id": "85798151-2e93-4b66-a231-aa405b8d2591"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_17990510000156",
    "label": "",
    "to": "EM_jacqueline.panontin@serget.com.br",
    "width": 1,
    "id": "22c34a4e-837d-49fc-b089-026aa7b86dfd"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_19887098000179",
    "label": "",
    "to": "EM_eliane@slmassessoriacontabil.com.br",
    "width": 1,
    "id": "77d4cdf3-bad5-405f-8c52-d31ef428ce88"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_19887098000179",
    "label": "",
    "to": "TE_11 38316032",
    "width": 1,
    "id": "c97fd213-f853-4b80-9e9c-45858e0a5cb3"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_20190209000172",
    "label": "",
    "to": "EM_jorgemarco.rodrigues1@gmail.com",
    "width": 1,
    "id": "bf083c74-a498-4d1f-8806-7c9123beea5c"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_20190209000172",
    "label": "",
    "to": "TE_11 21085591",
    "width": 1,
    "id": "c0833aaa-73e9-4b01-8eff-a47a0955c6e8"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_20190209000172",
    "label": "",
    "to": "TE_11 36865591",
    "width": 1,
    "id": "535e3a93-d839-4a02-90b8-199661a4993b"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_20190209000172",
    "label": "",
    "to": "TE_11 36867458",
    "width": 1,
    "id": "34bdf991-324d-49c6-9cd9-2fd3dafd1d32"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_20655625000107",
    "label": "",
    "to": "EN_CURUCA 473-SAO PAULO-SP",
    "width": 1,
    "id": "cb440d4a-8bad-4f12-8cd5-571a76b5fda9"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_20655625000107",
    "label": "",
    "to": "TE_11 36671213",
    "width": 1,
    "id": "c7067703-7c94-4ce0-a092-1cf7a755684a"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_21113837000117",
    "label": "",
    "to": "TE_65 36653088",
    "width": 1,
    "id": "a9f87407-6c79-48b5-955f-e556b36ea70b"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_21611768000171",
    "label": "",
    "to": "TE_61 33637403",
    "width": 1,
    "id": "82744b3c-ef59-475a-8f8a-d4143fbda2ea"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_22041471000180",
    "label": "",
    "to": "EN_JULIANO LUCCHI 134-PALHOCA-SC",
    "width": 1,
    "id": "236f050b-7264-4beb-ae04-579ca40571e5"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_22041471000180",
    "label": "",
    "to": "TE_48 21063000",
    "width": 1,
    "id": "8c9d413a-548c-4707-a2d3-a39fba8db435"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_22041471000180",
    "label": "",
    "to": "TE_48 21063005",
    "width": 1,
    "id": "367c4f72-a0a2-415e-a29b-caa19073921c"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_22041471000180",
    "label": "",
    "to": "TE_48 21063008",
    "width": 1,
    "id": "c3b2210e-167d-46bf-9d81-e1efc5e1af73"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_22095351000166",
    "label": "",
    "to": "EM_ailson@trana.com.br",
    "width": 1,
    "id": "7a4c17c4-4a69-449d-9528-a87ee449a593"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_22095351000166",
    "label": "",
    "to": "EN_B BR KM 116 10000 9-FORTALEZA-CE",
    "width": 1,
    "id": "d904c1c3-de06-48bf-a48e-a4191bb788f0"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_22095351000166",
    "label": "",
    "to": "TE_85 40061200",
    "width": 1,
    "id": "e075e9ce-fadb-46de-8e18-78245480f855"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_25250406000153",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "3f2bdeda-4e35-4176-a843-cf1ebf4b6ebe"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_25250406000153",
    "label": "",
    "to": "EM_comercial@tecnoviasmt.com.br",
    "width": 1,
    "id": "3ca10f9d-12d2-47b3-95cf-de70bda04b5d"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_25250406000153",
    "label": "",
    "to": "EN_AO LOTE QUADRA RUA U 21 7 13 2 7-CUIABA-MT",
    "width": 1,
    "id": "cdea3ecd-a775-4951-ae3f-cc8b5e779802"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_25250406000153",
    "label": "",
    "to": "TE_65 30289500",
    "width": 1,
    "id": "3fe4588a-dab2-4221-953c-29415d4280b7"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_26643588000195",
    "label": "",
    "to": "EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP",
    "width": 1,
    "id": "16cd62cb-2f36-46f5-a0b3-b506f2c9023f"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_26643588000195",
    "label": "",
    "to": "EM_srf.legal@meirafernandes.com.br",
    "width": 1,
    "id": "8e8439a9-cc66-4fdf-8610-5dfe54527052"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_26643588000195",
    "label": "",
    "to": "TE_11 35135000",
    "width": 1,
    "id": "ae785b33-0558-4d54-8d14-83bc7da5c476"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_28503496000135",
    "label": "",
    "to": "TE_11 38316032",
    "width": 1,
    "id": "dd0f8240-4da9-449f-901a-1a984320f009"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_31368259000113",
    "label": "",
    "to": "EM_contabilidade@perkons.com",
    "width": 1,
    "id": "15d784a7-abf2-4c30-a9c7-c50630dc5641"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_31368259000113",
    "label": "",
    "to": "EN_INAJA 366-PINHAIS-PR",
    "width": 1,
    "id": "b5746cb6-042d-4fa1-9e46-4d676bdf466f"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_31368259000113",
    "label": "",
    "to": "TE_41 35443232",
    "width": 1,
    "id": "b5e8afaf-bcd0-4b71-a5f3-ee6d9957019e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_31688915000165",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "f725140a-3ce2-4be8-9824-01b2796d13a5"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_31688915000165",
    "label": "",
    "to": "EM_jacqueline.ponontin@serget.com.br",
    "width": 1,
    "id": "774ba7d9-fbad-49d3-b0d4-aaf97dd35ce7"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_37590732000199",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "5359680c-7096-4945-9568-522bb9c1a67c"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_37590732000199",
    "label": "",
    "to": "TE_11 35135000",
    "width": 1,
    "id": "5529070a-2d1f-4397-bf2a-ebebe8c02e08"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39568322000177",
    "label": "",
    "to": "EN_JULIANO LUCCHI 134-PALHOCA-SC",
    "width": 1,
    "id": "399a6ae3-cb70-436d-a47a-e12000cfb622"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39568322000177",
    "label": "",
    "to": "TE_48 21063000",
    "width": 1,
    "id": "75e99350-dcb2-41c0-a1af-f829696e5ba1"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39568322000177",
    "label": "",
    "to": "EM_jair@sinasc.com.br",
    "width": 1,
    "id": "1575ada2-4679-48a2-9497-d9fc02b7373f"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39808214000124",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "3626c741-c4a6-458d-9229-18314c599072"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39808214000124",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "30662c56-d636-41ed-bc86-f3dd8236ae74"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39808214000124",
    "label": "",
    "to": "EN_AO LOTE QUADRA RUA SALA SMC U 21 7 13 2 7-CUIABA-MT",
    "width": 1,
    "id": "b047d27d-8e99-48cb-aa9c-de41e73bef09"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39841452000131",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "0ab84541-559b-417a-acf8-7d7749535305"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39841452000131",
    "label": "",
    "to": "EN_AO LOTE QUADRA RUA SALA SMC U 21 7 13 2 7-CUIABA-MT",
    "width": 1,
    "id": "773ba954-8f06-4c4a-bc15-d7a82be6632b"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39841452000131",
    "label": "",
    "to": "TE_65 36254410",
    "width": 1,
    "id": "c37a3397-9e28-4407-8e9e-5eab3ef44dd3"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39841467000108",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "41d04ca1-f0cc-435d-938c-3a7a73cf17a1"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39841467000108",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "58432a22-c195-415b-a17b-39a6a8f36417"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39841467000108",
    "label": "",
    "to": "EN_AO LOTE QUADRA RUA SALA SMC U 21 7 13 2 7-CUIABA-MT",
    "width": 1,
    "id": "dbd3524a-7a3a-4686-ae4b-03b34a0c4f17"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39912350000160",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "07f7dbed-4121-4b25-b76a-551c68749d20"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39912350000160",
    "label": "",
    "to": "EN_AO LOTE QUADRA RUA SALA SMC U 21 7 13 2 7-CUIABA-MT",
    "width": 1,
    "id": "530cdbcc-7fd6-4bd5-be4f-e546949f970e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39912350000160",
    "label": "",
    "to": "TE_65 41415031",
    "width": 1,
    "id": "fa583989-43b1-45d1-88f0-2cb4e5e3001e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39912386000143",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "23b067be-871d-4d4d-bc61-5fb25df3fb30"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39912386000143",
    "label": "",
    "to": "EN_AO LOTE QUADRA RUA SALA SMC U 21 7 13 2 7-CUIABA-MT",
    "width": 1,
    "id": "6b55275d-f71d-4933-81f5-d61f77e9f8fb"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_39912386000143",
    "label": "",
    "to": "TE_65 41415031",
    "width": 1,
    "id": "fddf1c22-758b-4066-a9d9-5b392f66176e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_42422233000122",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "78e99c49-5668-4942-90c6-53333a6802dd"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_42422233000122",
    "label": "",
    "to": "EM_comercial@serget.com",
    "width": 1,
    "id": "13b4ba47-08ea-4a86-963f-a0712ff0a5fa"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_42422233000122",
    "label": "",
    "to": "EN_TAGUA 206 208-SAO PAULO-SP",
    "width": 1,
    "id": "6905a822-2a95-4194-996d-8549ac7f99f0"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_43455189000110",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "6ac2ebc8-847a-462e-a628-db1fd9ae1632"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_43455189000110",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "e5cd2abd-7a53-44a9-a85f-e92c892fa79c"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_43698648000196",
    "label": "",
    "to": "EM_sitran@sitran.com.br",
    "width": 1,
    "id": "04bf4809-a508-4d16-88dd-3ab48e722a54"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_43698648000196",
    "label": "",
    "to": "EN_PRAIA 423-CAMPO LARGO-PR",
    "width": 1,
    "id": "302a89af-e4f9-4d1f-a3ac-2c4108078a40"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_43698648000196",
    "label": "",
    "to": "TE_31 33893900",
    "width": 1,
    "id": "e28493e7-f769-437d-b111-d2063c76c9da"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_44661720000173",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "1472ef66-43f4-4e25-9678-eb6899074348"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_44661720000173",
    "label": "",
    "to": "EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP",
    "width": 1,
    "id": "519d5077-edb0-4068-8ae9-a5440f09455e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_44661720000173",
    "label": "",
    "to": "EM_jacqueline.ponontin@serget.com.br",
    "width": 1,
    "id": "87f72401-20da-4cd7-8b32-2f50359c8c16"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_45036083000107",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "d62bd1b0-d7ea-457d-8971-e64badad73c9"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_45036083000107",
    "label": "",
    "to": "TE_65 36254410",
    "width": 1,
    "id": "5f704d21-3e7c-42b2-bade-f02b19189be7"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_45036083000107",
    "label": "",
    "to": "EN_AO CTS LOTE QUADRA RUA SALA U 21 7 13 2 7-CUIABA-MT",
    "width": 1,
    "id": "2afc82c9-35de-43b3-85c0-3a691d7cc853"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_46495989000152",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "4abd8d76-5785-40ed-a5bd-110e22b0e46f"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_46495989000152",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "5b647893-007e-48cd-a9a8-c8ec87c3900a"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_46495989000152",
    "label": "",
    "to": "EN_AO CTS LOTE QUADRA RUA SALA U 21 7 13 2 7-CUIABA-MT",
    "width": 1,
    "id": "c8dc0100-b770-4dca-9a9e-08347211ce8a"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_46797505000120",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "369e54ce-de4b-4bec-b570-5241f8ff1cff"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_46797505000120",
    "label": "",
    "to": "EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP",
    "width": 1,
    "id": "a6977870-b95e-4ba7-acdb-33a4a4523b1b"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_46797505000120",
    "label": "",
    "to": "EM_comercial@serget.com",
    "width": 1,
    "id": "d6446f88-9eff-45a1-8349-dc4475f134e0"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_47701262000147",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "f62b789d-e8cf-460e-ae9c-824cd57afbbc"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_47701262000147",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "1cd10ff6-0720-450b-b620-3287acd15d2b"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_47783811000170",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "963afeb4-2d10-4778-bb64-9fbb2f646ab3"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_47783811000170",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "c3b56b14-0020-44d8-a3d5-3d4ca312fe36"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_48700605000111",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "02c015c9-cde5-459f-85b5-30634ecec70e"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_48700605000111",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "395b95a8-5b7e-4f77-8110-ee22481d78b4"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_53060957000190",
    "label": "",
    "to": "TE_11 38316032",
    "width": 1,
    "id": "24b32c09-16d2-4b0d-a6f6-fe25716096c9"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_53060957000190",
    "label": "",
    "to": "EM_fiscal@tecnologiagto.com.br",
    "width": 1,
    "id": "974613f1-d44a-427c-9f6d-8b53d1873a59"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_53060957000190",
    "label": "",
    "to": "EN_ALTINO BLOCO C GALPAO PRESIDENTE 1925 2-SAO PAULO-SP",
    "width": 1,
    "id": "6317eef8-83b5-45f6-b5f7-26fc8a32c957"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_53060957000190",
    "label": "",
    "to": "TE_11 38316033",
    "width": 1,
    "id": "a087c409-1827-46cd-b0fa-8ce81dc23350"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_53060957000190",
    "label": "",
    "to": "TE_11 38316034",
    "width": 1,
    "id": "e181e376-020f-4e48-91d1-6aa993ef1f03"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_55892124000110",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "e589e94a-8bab-4fba-a09d-d8767270b5ba"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_55892124000110",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "bda2c57c-d6be-4a6a-bb3b-1d00592cc955"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_55892124000110",
    "label": "",
    "to": "EN_ALCANTARA ANTONIO MACHADO 331-PIRACICABA-SP",
    "width": 1,
    "id": "91b48347-14c2-4075-88b2-151bced56fd1"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_56932533000166",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "552a76f0-c99d-44fa-9358-d8de93b76d24"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_56932533000166",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "5e1d1192-c672-4216-8d6e-3a8a8e2c7457"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_56932533000166",
    "label": "",
    "to": "EN_ALCANTARA ANTONIO MACHADO 331-PIRACICABA-SP",
    "width": 1,
    "id": "817ff06e-a8cf-45a8-9e5f-bc1e7539dd7d"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_56943390000198",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "05ef969f-fe12-46bf-ae0d-1cc5f31111d3"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_56943390000198",
    "label": "",
    "to": "EM_comercial@serget.com.br",
    "width": 1,
    "id": "fcb0d893-4777-4650-952d-9621b3948ed0"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_57931070000180",
    "label": "",
    "to": "EN_APARECIDA MARIA PRADO 110-JACAREI-SP",
    "width": 1,
    "id": "c0cd91bb-b1f6-44ae-a8a8-d43eda465f33"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_57931070000180",
    "label": "",
    "to": "TE_12 21341414",
    "width": 1,
    "id": "bf57d988-b29a-4049-b0ce-a9c9148ddef5"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_59088144000194",
    "label": "",
    "to": "TE_11 38316032",
    "width": 1,
    "id": "475388ad-aefe-4533-aeb5-8189ae9803e4"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_59088144000194",
    "label": "",
    "to": "EM_fiscal@tecnologiagto.com.br",
    "width": 1,
    "id": "13a59709-d0f7-469b-9d14-eba522e27dab"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_59088144000194",
    "label": "",
    "to": "EN_ALTINO PRESIDENTE 1925-SAO PAULO-SP",
    "width": 1,
    "id": "928691be-c423-4220-b88c-536ccce068da"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_59088144000194",
    "label": "",
    "to": "TE_11 59041787",
    "width": 1,
    "id": "ede0248c-eca6-4edc-94be-13881db48e18"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_62357503000176",
    "label": "",
    "to": "TE_11 94108885",
    "width": 1,
    "id": "99e7a727-c135-4d1d-9503-9a97e628dae1"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_62783861000140",
    "label": "",
    "to": "TE_11 33892727",
    "width": 1,
    "id": "4911e462-064e-46bd-bd40-c74799e5d282"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_62783861000140",
    "label": "",
    "to": "EN_DOM FELIPE LUIS ORLEANS 426-SAO PAULO-SP",
    "width": 1,
    "id": "37c6dc75-f8c7-479a-b4e0-612c730b8c22"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_62783861000140",
    "label": "",
    "to": "EM_moises.moraes@serget.com.br",
    "width": 1,
    "id": "3870fc5f-03f5-4781-9fdc-d3c6a24748e0"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PF_***133798**-RENATA DE MORAES",
    "label": "Administrador",
    "title": "Administrador",
    "to": "PJ_02363619000196",
    "width": 1,
    "id": "11849aba-d872-4e3f-9f52-9be510c2c5f3"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PF_***201908**-MOISES DE MORAES",
    "label": "Administrador",
    "title": "Administrador",
    "to": "PJ_02363619000196",
    "width": 1,
    "id": "8741b3a0-f34a-44c1-81b8-341475cc3995"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_52201596000191",
    "label": "Sócio",
    "title": "Sócio",
    "to": "PJ_02363619000196",
    "width": 1,
    "id": "f1febc82-3e65-4f27-98b3-cec3a781168f"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_59739356000194",
    "label": "Sócio",
    "title": "Sócio",
    "to": "PJ_02363619000196",
    "width": 1,
    "id": "5ba07413-8533-4a82-8c67-b8fa669338d8"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_59739356000194",
    "label": "",
    "to": "EM_contato@ber.adv.br",
    "width": 1,
    "id": "9d81ae96-148e-4049-8a02-3b6fe71b6fef"
  },
  {
    "arrowStrikethrough": false,
    "arrows": "to",
    "from": "PJ_59739356000194",
    "label": "",
    "to": "TE_51 30393500",
    "width": 1,
    "id": "4ca0a3c0-7eb0-4da5-b083-2200ebeb1ca3"
  }
]);

                  nodeColors = {};
                  allNodes = nodes.get({ returnType: "Object" });
                  for (nodeId in allNodes) {
                    nodeColors[nodeId] = allNodes[nodeId].color;
                  }
                  allEdges = edges.get({ returnType: "Object" });
                  // adding nodes and edges to the graph
                  data = {nodes: nodes, edges: edges};

                  var options = {"autoResize": true, "height": "100%", "width": "100%", "configure": {"enabled": false, "showButton": true, "filter": true}, "nodes": {"color": {"border": "transparent", "background": "transparent", "highlight": {"border": "transparent", "background": "rgba(0,255,0,0.3)"}, "hover": {"border": "transparent", "background": "transparent"}}, "shapeProperties": {"useBorderWithImage": true, "interpolation": true}, "scaling": {"min": 20, "max": 100, "label": {"enabled": true, "min": 15, "max": 40, "maxVisible": 30, "drawThreshold": 8}}, "font": {"color": "#777777", "strokeWidth": 4, "strokeColor": "#ffffff", "bold": {"color": "#ff0000"}}}, "edges": {"hoverWidth": 4, "smooth": {"enabled": false}, "scaling": {"label": {"enabled": true, "min": 30, "max": 40, "maxVisible": 30, "drawThreshold": 8}}, "font": {"align": "top", "color": "#777777", "size": 15}, "selectionWidth": 4, "color": {"color": "#2B7CE9", "highlight": "#FF0000", "inherit": false, "hover": "#FF0000"}, "arrowStrikethrough": false}, "interaction": {"hover": true, "multiselect": true, "navigationButtons": false, "hideEdgesOnDrag": true, "hideEdgesOnZoom": true, "tooltipDelay": 9999999999}, "physics": {"enabled": true, "barnesHut": {"gravitationalConstant": -10000, "springLength": 200, "avoidOverlap": 0}}, "layout": {"improvedLayout": true}};

                  


                  

                  network = new vis.Network(container, data, options);

                  

                  

                  


                  
                      network.on("stabilizationProgress", function(params) {
                          document.getElementById('loadingBar').removeAttribute("style");
                          var maxWidth = 496;
                          var minWidth = 20;
                          var widthFactor = params.iterations/params.total;
                          var width = Math.max(minWidth,maxWidth * widthFactor);
                          document.getElementById('bar').style.width = width + 'px';
                          document.getElementById('text').innerHTML = Math.round(widthFactor*100) + '%';
                      });
                      network.once("stabilizationIterationsDone", function() {
                          document.getElementById('text').innerHTML = '100%';
                          document.getElementById('bar').style.width = '496px';
                          document.getElementById('loadingBar').style.opacity = 0;
                          // really clean the dom element
                          setTimeout(function () {document.getElementById('loadingBar').style.display = 'none';}, 500);
                      });
                  

                  return network;

              }
              drawGraph();
        



        

        
        // ===============================================================
        // WRAPPER GLOBAL PARA INTERCEPTAR TODAS AS DELEÇÕES DE NÓS
        // ===============================================================
        // Colocar logo após a criação do network (depois de: var network = new vis.Network(...))

        (function() {
            // Guardar referência original
            const deleteSelectedOriginal = network.deleteSelected.bind(network);
            
            // Sobrescrever com wrapper
            network.deleteSelected = function() {
                // Capturar nós que serão deletados ANTES da deleção
                const nodosADeletar = network.getSelectedNodes();
                
                if (nodosADeletar.length > 0) {
                    console.log(`🔄 Interceptando deleção de ${nodosADeletar.length} nós...`);
                    
                    // Identificar nós adjacentes que precisarão ser recalculados
                    let nosParaAtualizar = new Set();
                    nodosADeletar.forEach(nodeId => {
                        try {
                            let vizinhos = network.getConnectedNodes(nodeId);
                            vizinhos.forEach(v => nosParaAtualizar.add(v));
                        } catch (e) {}
                    });
                    
                    // Executar deleção original
                    deleteSelectedOriginal();
                    




                    // Recalcular tamanhos após a deleção (pequeno delay)
                    setTimeout(() => {
                        let atualizacoes = [];
                        nosParaAtualizar.forEach(nodeId => {
                            try {
                                
                                if (!nodes.get(nodeId)) return;
                                let arestas = network.getConnectedEdges(nodeId);

                                atualizacoes.push({
                                    id: nodeId,
                                    value: arestas.length
                                });
                            } catch (e) {}
                        });
                        
                        if (atualizacoes.length > 0) {
                            nodes.update(atualizacoes);
                            console.log(`✓ ${atualizacoes.length} nós adjacentes redimensionados`);

                            setTimeout(() => {

                                network.fit({
                                    animation: {
                                        duration: 500,
                                        easingFunction: 'easeInOutQuad'
                                    }
                                });

                                network.once("animationFinished", function () {

                                    // Força reativação da física (especialmente para grafos pequenos)
                                    network.setOptions({
                                        physics: { enabled: false }
                                    });

                                    requestAnimationFrame(() => {
                                        network.setOptions({
                                            physics: { enabled: true }
                                        });
                                    });

                                    const ids = nodes.getIds();
                                    if (ids.length === 0) return;

                                    // Escolhe um nó qualquer
                                    const id = ids[0];
                                    const pos = network.getPositions([id])[id];

                                    if (!pos) return;

                                    // Micro deslocamento imperceptível
                                    nodes.update({
                                        id: id,
                                        x: pos.x + 0.001,
                                        y: pos.y
                                    });

                                    // Agora sim: física volta SEMPRE
                                    network.setOptions({
                                        physics: { enabled: true }
                                    });
                                });
                            }, 100);
                        }
                    }, 50);






                } else {
                    // Se não há nós selecionados, apenas executar original
                    deleteSelectedOriginal();
                }
            };
            
            //console.log("✓ Wrapper de deleção instalado - recálculo automático ativado");
        })();


        // ===============================================================
        // HANDLER PARA nodes.remove() - USADO PELO BOTÃO OTIMIZAÇÃO
        // ===============================================================

        (function() {
            // Guardar referência original do DataSet
            const nodesDataSet = nodes;
            const removeOriginal = nodesDataSet.remove.bind(nodesDataSet);
            
            // Sobrescrever com wrapper
            nodesDataSet.remove = function(ids) {
                // Normalizar ids para array
                const nodosADeletar = Array.isArray(ids) ? ids : [ids];
                
                if (nodosADeletar.length > 0) {
                    console.log(`🔄 Interceptando nodes.remove() de ${nodosADeletar.length} nós...`);
                    
                    // Identificar nós adjacentes
                    let nosParaAtualizar = new Set();
                    nodosADeletar.forEach(nodeId => {
                        try {
                            let vizinhos = network.getConnectedNodes(nodeId);
                            vizinhos.forEach(v => nosParaAtualizar.add(v));
                        } catch (e) {}
                    });
                    
                    // Executar remoção original
                    removeOriginal(ids);
                    
                    // Recalcular tamanhos após remoção
                    setTimeout(() => {
                        let atualizacoes = [];
                        nosParaAtualizar.forEach(nodeId => {
                            try {

                                //let arestas = network.getConnectedEdges(nodeId);
                                if (!nodes.get(nodeId)) return;
                                let arestas = network.getConnectedEdges(nodeId);

                                atualizacoes.push({
                                    id: nodeId,
                                    value: arestas.length
                                });
                            } catch (e) {}
                        });
                        
                        
                        if (atualizacoes.length > 0) {
                            nodesDataSet.update(atualizacoes);
                            console.log(`✓ ${atualizacoes.length} nós adjacentes redimensionados (via remove)`);

                            // ← ADICIONAR ESTAS LINHAS:
                            //network.physics.physicsEnabled = true;
                            //network.startSimulation();

                            
                            setTimeout(() => {

                                //network.fit({
                                //    animation: {
                                //        duration: 500,
                                //        easingFunction: 'easeInOutQuad'
                                //    }
                                //});
                                
                                network.once("animationFinished", function () {

                                    // Força reativação da física (especialmente para grafos pequenos)
                                    network.setOptions({
                                        physics: { enabled: false }
                                    });

                                    requestAnimationFrame(() => {
                                        network.setOptions({
                                            physics: { enabled: true }
                                        });
                                    });

                                    const ids = nodes.getIds();
                                    if (ids.length === 0) return;

                                    // Escolhe um nó qualquer
                                    const id = ids[0];
                                    const pos = network.getPositions([id])[id];

                                    if (!pos) return;

                                    // Micro deslocamento imperceptível
                                    nodes.update({
                                        id: id,
                                        x: pos.x + 0.001,
                                        y: pos.y
                                    });

                                    // Agora sim: física volta SEMPRE
                                    network.setOptions({
                                        physics: { enabled: true }
                                    });
                                });
                            }, 100);                            
                        }
                    }, 50);

                } else {
                    removeOriginal(ids);
                }
            };
            
            //console.log("✓ Wrapper de nodes.remove() instalado");
        })();
        









        // ####################################
        // CRIA FUNÇÃO DE MENSAGENS TEMPORÁRIAS
        // ####################################

        // As mensagens são exibidas na tela pelo tempo definido no parâmetro da função
        // 178, 255, 178, 1

        var timerId;
        function tempAlert(msg, duration) {

            let divRemover = document.getElementById("el-id");

            // verifica se a div existe
            if (divRemover) {

                // Cancela o temporizador anterior
                clearTimeout(timerId);
                
                // Remova a div usando o método remove()
                divRemover.remove();
            }


            var el = document.createElement("div");
            el.id = "el-id";
            el.setAttribute("style","position:absolute;top:30px;right:21px;max-width:calc(100% - 86px);width:fit-content;border:5px solid rgba(245, 245, 245, 1);border-radius: 5px;background-color:rgba(245, 245, 245, 1);height: auto;");
            el.innerHTML = msg;
            timerId = setTimeout(function(){
                el.parentNode.removeChild(el);
            }, duration);
            document.body.appendChild(el);
        }



        // #################################################
        // CRIA FUNÇÃO QUE AVISA QUANDO CAPSLOCK FOI ATIVADA
        // #################################################

        // EXIBE AVISO DE CAPSLOCK ATIVADA
        function capsLockAtivada(msg, duration) {
            var el = document.createElement("div");
            el.setAttribute("style","position:absolute;top:30px;left:61px;border:5px solid rgba(255, 255, 123, 1);border-radius: 5px;background-color:rgba(255, 255, 123, 1);");
            el.innerHTML = msg;
            setTimeout(function(){
            el.parentNode.removeChild(el);
            },duration);
            document.body.appendChild(el);
        }

        // EXIBE AVISO DE CAPSLOCK DESATIVADA
        function capsLockDesativada(msg, duration) {
            var el = document.createElement("div");
            el.setAttribute("style","position:absolute;top:30px;left:61px;border:5px solid rgba(178, 255, 178, 1);border-radius: 5px;background-color:rgba(178, 255, 178, 1);");
            el.innerHTML = msg;
            setTimeout(function(){
            el.parentNode.removeChild(el);
            },duration);
            document.body.appendChild(el);
        }



        var el_2 = ''
        var toggle_caps = 0;
        document.addEventListener('keydown', (event) => {

            if(event.code === "CapsLock"){

                let isCapsLockOn = event.getModifierState("CapsLock");

                if(isCapsLockOn) {

                    el_2 = document.createElement("div");
                    el_2.setAttribute("style","position:absolute;top:30px;left:61px;border:5px solid rgba(255, 255, 123, 1);border-radius: 5px;background-color:rgba(255, 255, 123, 1);");
                    el_2.innerHTML = "Tecla CapsLock Ativada";
                    document.body.appendChild(el_2);
                    //console.log("Caps Lock turned on");

                    toggle_caps = 1;

                } else if (!isCapsLockOn && toggle_caps == 1) {

                    el_2.style.display = "none";
                    capsLockDesativada("Tecla CapsLock Desativada", 3000);
                    //console.log("Caps Lock turned off");

                }
            }
        });


        // EXIBE AVISO NO CARREGAMENTO DA PÁGINA DE QUE A TECLA CAPSLOCK ESTÁ ATIVADA
        //document.addEventListener("DOMContentLoaded", function(event) {
        //    if (event.getModifierState("CapsLock")) {
        //        //el_2 = document.createElement("div");
        //        //el_2.setAttribute("style","position:absolute;top:30px;left:61px;border:5px solid rgba(255, 255, 123, 1);border-radius: 5px;background-color:rgba(255, 255, 123, 1);");
        //        //el_2.innerHTML = "Tecla CapsLock Ativada";
        //        //document.body.appendChild(el_2);
        //    }
        //});



        //setInterval(function() {
        //    var capsLockOn = navigator.getKeyboardState ? navigator.getKeyboardState()[0].shiftKey : false; // verifica se Caps Lock está ativado
            
        //    if (capsLockOn) {
        //        var div = document.createElement('div'); // cria um novo elemento de div
        //        div.textContent = 'A tecla Caps Lock está ativada!'; // define o conteúdo da div
        //        div.style.color = 'red'; // define a cor da fonte da div
        //        div.style.fontSize = '20px'; // define o tamanho da fonte da div
        //        div.style.fontWeight = 'bold'; // define o peso da fonte da div
        //        div.style.marginTop = '10px'; // define a margem superior da div
                
        //        var container = document.getElementById('visualization'); // obtém o elemento do contêiner da biblioteca vis.js
        //        container.appendChild(div); // adiciona a div ao contêiner
        //        console.log('oi')
        //    }
        //}, 2000); // verifica o estado da tecla Caps Lock a cada segundo




        // ##########################
        // ACUMULA NÓS - TECLAS + E -
        // ##########################

        // OS ITENS DO ARRAY SALVO NO 'localStorage' SÃO ABERTOS PELA TECLA 'y'

        // localStorage: https://codetheweb.blog/javascript-localstorage/
        
        // CRIA ARRAY VAZIO SE ELE AINDA NÃO EXISTIR E SALVA EM 'localStorage'
        if (localStorage.getItem("nos_acum") == null) {
            var empty_array = new Array();
            localStorage.setItem('nos_acum', JSON.stringify(empty_array));
        }
        
        document.addEventListener('keydown', (event) => {

                // INCLUI NÓS SELECIONADOS NO ARRAY 'nos_acum' E SALVA EESSE ARRAY NO 'localStorage'
                if (event.key == '+') {
                    
                    let s = network.getSelectedNodes();

                    let nos_acum = []

                    if (s.length > 0) {
                    
                        for (let i=0; i<s.length; i++) {
                            nos_acum.push(s[i]);
                        }

                        // RESTAURA O ARRAY
                        let temp = JSON.parse(localStorage.getItem("nos_acum"));

                        // ADICIONA ITENS AO ARRAY
                        temp = temp.concat(nos_acum)

                        // ELIMINA DUPLICIDADES DO ARRAY
                        temp = [...new Set(temp)];

                        // GRAVA NOVO ARRAY NO 'localStorage' (SUBSTITUI O ANTERIOR)
                        localStorage.setItem('nos_acum', JSON.stringify(temp));

                        // EXIBE NOVO ARRAY
                        tempAlert(`Tecla (${event.key}) - Adiciona item à lista de nós-alvos (${temp.length}): ${temp.join(' ||| ')}`, 3000);
                    
                    
                    // EXIBE ARRAY SE NENHUM NÓ ESTIVER SELECIONADO
                    } else {

                        // RESTAURA O ARRAY
                        let temp = JSON.parse(localStorage.getItem("nos_acum"));

                        tempAlert(`Tecla (${event.key}) - Lista de nós-alvos (${temp.length}): ${temp.join(' ||| ')}`, 3000);
                    }
                    
                // EXCLUI ÚLTIMO ITEM DO ARRAY 'nos_acum' SALVO NO 'localStorage'
                } else if (event.key == '-') {

                    // RESTAURA O ARRAY
                    let temp = JSON.parse(localStorage.getItem("nos_acum"));

                    // EXCLUI ÚLTIMO ITEM DO ARRAY
                    temp.pop();

                    // GRAVA NOVO ARRAY NO 'localStorage' (SUBSTITUI O ANTERIOR)
                    localStorage.setItem('nos_acum', JSON.stringify(temp));

                    tempAlert(`Tecla (${event.key}) - Remove último item da lista de nós-alvos (${temp.length}): ${temp.join(' ||| ')}`, 3000);
                }            
        });



        // ###########################################
        // ATIVA E DESATIVA O MODO DE CAPTURA - TECLA |
        // ###########################################

        var toggle_ponto_e_virgula = true

        document.addEventListener('keydown', (event) => {

            if (event.key == '|' && toggle_ponto_e_virgula == true) {

                async function capturaDesativa(param) {
                    await navigator.clipboard.writeText(param)
                }

                let no_unico = network.getSelectedNodes();
                let idno = ''
                if (no_unico.length == 1) {
                    idno = no_unico[0]
                }

                let temp = "AAAdesativaAAA" + idno;
                
                setTimeout(() => {capturaDesativa(temp)}, 0)

                toggle_ponto_e_virgula = false

                el_1 = document.createElement("div");
                el_1.setAttribute("style","position:absolute;top:30px;left:61px;border:5px solid rgba(255, 255, 123, 1);border-radius: 5px;background-color:rgba(255, 255, 123, 1);");
                el_1.innerHTML = `Tecla ${event.key} - Modo de captura desativado`;
                document.body.appendChild(el_1);
            
            } else if (event.key == '|' && toggle_ponto_e_virgula == false) {

                async function capturaAtiva(param) {
                    await navigator.clipboard.writeText(param)
                }

                let temp = "AAAativaAAA";
                
                setTimeout(() => {capturaAtiva(temp)}, 0)

                el = document.createElement("div");
                el.setAttribute("style","position:absolute;top:30px;left:61px;border:5px solid rgba(255, 255, 123, 1);border-radius: 5px;background-color:rgba(255, 255, 123, 1);");
                el.innerHTML = `Tecla ${event.key} - Modo de captura ativado`;

                toggle_ponto_e_virgula = true

                el_1.style.display = "none";

                // Exibe informações na tela
                capsLockDesativada(`Tecla ${event.key} - Modo de captura ativado`, 3000);
            }
        });



        // ########################################################
        // ABRE PÁGINA COM PESQUISA AVANÇADA - TECLA 1 A 9
        // ########################################################

        document.addEventListener('keydown', (event) => {

            // TECLA 1 - VALIDAR DADOS DO CNPJ NO SITE DA RECEITA FEDERAL
            if (event.key == '1') {
                let sel = network.getSelectedNodes();
                if (sel.length == 1 && sel[0].slice(0, 3) == 'PJ_') {
                    let cnpj = sel[0].slice(3);
                    let link_consulta_cnpj = "https://solucoes.receita.fazenda.gov.br/servicos/cnpjreva/Cnpjreva_Solicitacao.asp?cnpj=" + cnpj;
                    window.open(link_consulta_cnpj, target="_blank", windowFeature='left=50,top=100,width=800,height=600');
                    
                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Validar CNPJ no site da Receita Federal`, 3000);
                }
            }



            // TECLA 2 - VALIDAR CEIS, CEPIM, CNEP e Acordo de Leniência
            if (event.key == '2') {

                let sel = network.getSelectedNodes();
                if (sel.length == 1 && sel[0].slice(0, 3) == 'PJ_') {
                    let cnpj = sel[0].slice(3);
                    let link_consulta_cnpj = `https://portaldatransparencia.gov.br/sancoes/consulta?paginacaoSimples=true&tamanhoPagina=&offset=&direcaoOrdenacao=asc&cpfCnpj=${cnpj}&colunasSelecionadas=linkDetalhamento%2Ccadastro%2CcpfCnpj%2CnomeSancionado%2CufSancionado%2Corgao%2CcategoriaSancao%2CdataPublicacao%2CvalorMulta%2Cquantidade`;
                    window.open(link_consulta_cnpj, target="_blank", windowFeature='left=50,top=100,width=800,height=600');
                    
                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Validar CNPJ no site da Receita Federal`, 3000);
                }
            }



            // TECLA 3 - VALIDAR DÍVIDAS COM A UNIÃO
            // Ainda não implementado



            // TECLA 4 - ABRE ARQUIVOS EXCEL COM NÓS E ARESTAS
            if (event.key == '4') {
                
                async function copyOperation(param) {
                    await navigator.clipboard.writeText(param)
                };

                setTimeout(() => {copyOperation('***ABRE-EXCEL***')}, 0)

                tempAlert(`Tecla ${event.key} - Abre arquivos Excel de nós e de arestas`, 3000);
            }



            // TECLA 5 - ABRE SITE REDE CNPJ
            if (event.key == "5") {

                window.open("https://www.redecnpj.com.br/rede/", "_blank", "left=50,top=100,width=600,height=600");

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Abre site Rede CNPJ`, 3000);

            }
            


            // TECLA 6 - EXIBE PÁGINA DA RECEITA FEDERAL E DA PGFN CONTENDO BASES DE DADOS
            if (event.key == '6') {

                let link_pep = "https://portaldatransparencia.gov.br/download-de-dados/pep";
                window.open(url=link_pep, target="_blank", windowFeature='left=200,top=140,width=600,height=500');
                
                let link_cnpj = "https://dados.gov.br/dados/conjuntos-dados/cadastro-nacional-da-pessoa-juridica---cnpj";
                window.open(url=link_cnpj, target="_blank", windowFeature='left=150,top=110,width=600,height=500');

                let link_cgu = "https://portaldatransparencia.gov.br/sancoes";
                window.open(url=link_cgu, target="_blank", windowFeature='left=100,top=80,width=600,height=500');

                let link_pgfn = "https://www.gov.br/pgfn/pt-br/assuntos/divida-ativa-da-uniao/transparencia-fiscal-1/copy_of_dados-abertos"
                window.open(url=link_pgfn, target="_blank", windowFeature='left=50,top=50,width=600,height=500');

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Bases de dados da Receita Federal e da PGFN`, 3000);
            }



            // TECLA 7 - EXIBE ARQUIVO JSON DA EMPRESA
            if (event.key == '7') {
                let sel = network.getSelectedNodes();
                if (sel.length == 1) {
                    if (sel[0].slice(0, 3) == 'PJ_') {
                        let parametro = sel[0].slice(3);
                        let link = "http://jsonviewer.stack.hu/#http://publica.cnpj.ws/cnpj/" + parametro;
                        window.open(link, target="_blank", windowFeature='left=50,top=100,width=600,height=600');
                    }

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Dados da empresa no formato JSON`, 3000);

                }
            }



            // TECLA 8 - PESQUISA POR FORNECEDORES PJ - UNIÃO
            if (event.key == '8') {

                let sel = network.getSelectedNodes();

                if (sel.length == 1) {

                    // PESSOA JURÍDICA
                    if (sel[0].slice(0, 3) == 'PJ_') {
                        let parametro = nodes.get(sel[0]);
                        parametro = parametro.id.slice(3)

                        let link_fornecedores_uniao = "https://compras.dados.gov.br/fornecedores/doc/fornecedor_pj/" + parametro;
                        window.open(url=link_fornecedores_uniao, target="_blank", windowFeature='left=50,top=50,width=600,height=500');
                    }

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Pesquisa nó selecionado entre fornecedores da União`, 3000);
                }
            }



            // TECLA 9 - BAIXA ARQUIVOS JSON DO VIS.JS (nodes.json e edges.json)
            if (event.key == '9') {

                function salvarGrafoJSON() {
                    // Captura os dados atuais
                    const nodesAtuais = network.body.data.nodes.get({returnType: "Object"});
                    const edgesAtuais = network.body.data.edges.get({returnType: "Object"});
                    
                    // Converte para arrays
                    const nodesArray = Object.values(nodesAtuais);
                    const edgesArray = Object.values(edgesAtuais);
                    
                    // Função auxiliar para fazer download
                    function downloadJSON(data, filename) {
                        const json = JSON.stringify(data, null, 2);
                        const blob = new Blob([json], {type: 'application/json;charset=utf-8'});
                        const url = URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.href = url;
                        link.download = filename;
                        link.click();
                        URL.revokeObjectURL(url);
                    }
                    
                    // Salva os dois arquivos
                    downloadJSON(nodesArray, `nodes.json`);
                    setTimeout(() => {
                        downloadJSON(edgesArray, `edges.json`);
                    }, 200);
                }
                
                // Chama a função (FORA da definição)
                salvarGrafoJSON();
                
                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Baixa arquivos JSON com nós e arestas`, 3000);
            }



            //  TECLA 0 - NÃO ATRIBUIR ATALHO PARA A TECLA 0, POIS IMPEDE AJUSTAR O ZOOM DO NAVEGADOR AO VALOR PADRÃO (100%) POR MEIO DE CTRL + 0

        });



        // ################################
        // SELECIONA TODOS OS NÓS - TECLA A
        // ################################

        document.addEventListener('keydown', (event) => {
            if (event.key == "A") {
                network.selectNodes(nodes.getIds());
                
                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Seleciona todos os nós (${network.getSelectedNodes().length})`, 3000);
            }

        })



        // ###############################################################################################
        // SELECIONA NÓS ADJACENTES AOS NÓS SELECIONADOS DE FORMA ACUMULATIVA, CAMADA POR CAMADA - TECLA a
        // ###############################################################################################

        var sel_anterior = [];
        document.addEventListener('keydown', (event) => {

            if (event.key == "a" && network.getSelectedNodes().length > 0) {

                // Desseleciona todos os nós quando a seleção alcança todos os nós
                if (network.getSelectedNodes().length > 0 && network.getSelectedNodes().length == nodes.getIds().length) {
                    tempAlert(`Tecla ${event.key} - Desseleciona todos os nós (${nodes.getIds().length})`, 3000);
                }

                // Exibe mensagem informativa
                //if (network.getSelectedNodes().length > 0 && network.getSelectedNodes().length == nodes.getIds().length) {
                //    tempAlert(`Tecla ${event.key} - Desseleciona todos os nós (${nodes.getIds().length})`, 3000);
                //}


                // DESATIVA A FÍSICA NO INÍCIO DA SELEÇÃO
                //network.physics.physicsEnabled = false;
                //network.physics.stopSimulation();

                // VERIFICA SE TODOS OS NÓS FORAM SELECIONADOS
                if ([...new Set(sel_anterior)].length == nodes.getIds().length) {
                    network.unselectAll();
                    sel_anterior = [];
                }

                let sel = network.getSelectedNodes();

                // IMPEDE QUE DOIS OU MAIS NÓS SEJAM SELECIONADOS NO INÍCIO DO SCRIPT
                if (sel.length > 1 && sel_anterior.length == 0) {
                    for (let i=0; i<sel.length; i++) {
                        nodes.update({id: sel[i], font: {color: '#777777'}})
                    }
                    network.unselectAll();
                    network.physics.physicsEnabled = true;
                    network.physics.startSimulation();
                    return;
                }

                for (let i=0; i<sel.length; i++) {
                    if (!(sel[i] in sel_anterior)) {
                        let temp_a = network.getConnectedNodes(sel[i]);
                        sel_anterior = sel_anterior.concat(temp_a);
                    }
                }
                
                if (sel.length == 1) {
                    sel_anterior = sel_anterior.concat(sel);
                    network.selectNodes(sel_anterior);
                    nodes.update({id: sel[0], font: {color: '#777777'}});
                } else {
                    network.selectNodes(sel_anterior);
                }

                // REATIVA A FÍSICA APÓS A ÚLTIMA CAMADA SER SELECIONADA E TODA A REDEE SER DESSELECIONADA
                //if (network.getSelectedNodes().length == 0) {
                //    network.physics.physicsEnabled = true;
                //    network.physics.startSimulation();
                //}


                if (network.getSelectedNodes().length > 0) {
                    tempAlert(`Tecla ${event.key} - Seleciona nós adjacentes (${network.getSelectedNodes().length}/${nodes.getIds().length})`, 3000);
                }
            
            } else if (event.key == "a" && network.getSelectedNodes().length == 0) {
                tempAlert(`Tecla ${event.key} - Selecione um nó para selecionar seus nós adjacentes`, 3000);
            }
        });
        


        // ######################################################
        // AJUSTE AUTOMÁTICO DA ALTURA DA ÁREA DO GRAFO - TECLA b
        // ######################################################
        
        document.addEventListener('keydown', (event) => {
            if (event.key == 'b') {
                    // EXTRAI DIMENSÕES DA ÁREA DO GRAFO
                    //let box = document.querySelector('#mynetwork');
                    //let width = box.offsetWidth;
                    //let height = box.offsetHeight;
                    
                    // EXTRAI DIMENSÕES DA JANELA DO NAVEGADOR
                    //var w = window.innerWidth;
                    var h = window.innerHeight;
                    
                    // AJUSTA ALTURA DA ÁREA DO GRAFO À ALTURA DA JANELA
                    document.querySelector('#mynetwork').style.height = h - 20;

                    // ENQUADRA GRAFO. FUNCIONA APENAS APÓS A ALTURA TER SIDO AJUSTADA ()
                    //network.fit();

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Ajusta altura da janela de visualização`, 3000);

            }
        });


        // ##############################################
        // CENTRALIZA NÓS SELECIONADOS - TECLA c (CENTER)
        // ##############################################

        /* var toggle_c = true;

        document.addEventListener('keydown', (event) => {
            
            // SÓ FUNCIONA NO LAYOUT BARNES-HUT E COM APENAS UM NÓ SELECIONADO
            if (event.key == 'c' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length == 1 && toggle_c == true) {

                // DESABILITA ELEMENTOS PARA EVITAR TRAVAMENTO DA IMAGEM (MELHORA DESEMPENHO)
                network.physics.physicsEnabled = false;
                network.physics.stopSimulation();

                // PARTE PRINCIPAL
                //network.fit({nodes: con_nodes, maxZoomLevel: 1, animation: false});

                let ss = network.getSelectedNodes();

                // PARTE PRINCIPAL
                for (let i=0; i<ss.length; i++) {
                    p = network.getPosition(ss[i]);
                    network.moveTo({
                        position: {x: p['x'], y: p['y']},
                        scale: 1,
                        offset: {x:0, y:0}
                    });
                }
            
                toggle_c = false;

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Centraliza nó selecionado`, 3000);

                

            // EXIBE NÓS CONECTADOS AOS NÓS SELECIONADOS
            } else if (event.key == 'c' && network.physics.options.solver == 'barnesHut') {

                // DESABILITA ELEMENTOS PARA EVITAR TRAVAMENTO DA IMAGEM (MELHORA DESEMPENHO)
                network.physics.physicsEnabled = false;
                network.physics.stopSimulation();

                let sel_nodes = network.getSelectedNodes();

                // EXTRAI NOS CONECTADOS AO NÓ SELECIONADO
                let con_nodes = []
                let temp = []
                if (sel_nodes.length > 0) {
                    for (var i=0; i<sel_nodes.length; i++) {
                        temp = network.getConnectedNodes(sel_nodes[i]);
                        temp2 = temp.concat(sel_nodes);
                        con_nodes = con_nodes.concat(temp2)
                    }
                }

                // PARTE PRINCIPAL
                network.fit({nodes: con_nodes, maxZoomLevel: 1, animation: false});
                toggle_c = true

                // Exibe informações na tela
                if (network.getSelectedNodes().length == 0) {                  
                    tempAlert(`Tecla ${event.key} - Enquadra todos os nós`, 3000);
                } else {
                    tempAlert(`Tecla ${event.key} - Enquadra nós adjacentes aos nós selecionados`, 3000);
                }
            }
        }); */



        // NOVA FUNÇÃO

        var toggle_c = 0;

        document.addEventListener('keydown', (event) => {
            
            // 1) UM NÓ SELECIONADO (SÓ FUNCIONA NO LAYOUT BARNES-HUT)
            if (event.key == 'c' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length == 1 && toggle_c == 0) {

                // DESABILITA ELEMENTOS PARA EVITAR TRAVAMENTO DA IMAGEM (MELHORA DESEMPENHO)
                network.physics.physicsEnabled = false;
                network.physics.stopSimulation();

                let ss = network.getSelectedNodes();

                // PARTE PRINCIPAL
                for (let i=0; i<ss.length; i++) {
                    p = network.getPosition(ss[i]);

                    network.moveTo({
                        position: {x: p['x'], y: p['y']},
                        scale: 1,
                        offset: {x:0, y:0}
                    });                    
                }
            
                toggle_c = 1;

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Centraliza nó selecionado`, 3000);

                

            // 2) UM NÓ SELECIONADO - EXIBE NÓS CONECTADOS AO NÓ ÚNICO SELECIONADO
            } else if (event.key == 'c' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length == 1 && toggle_c == 1) {

                // DESABILITA ELEMENTOS PARA EVITAR TRAVAMENTO DA IMAGEM (MELHORA DESEMPENHO)
                network.physics.physicsEnabled = false;
                network.physics.stopSimulation();

                let sel_nodes = network.getSelectedNodes();

                // EXTRAI NOS CONECTADOS AO NÓ SELECIONADO
                let con_nodes = []
                let temp = []
                if (sel_nodes.length > 0) {
                    for (var i=0; i<sel_nodes.length; i++) {
                        temp = network.getConnectedNodes(sel_nodes[i]);
                        temp2 = temp.concat(sel_nodes);
                        con_nodes = con_nodes.concat(temp2)
                    }
                }                

                setTimeout(() => {
                    network.fit({
                        nodes: con_nodes,
                        animation: {
                            duration: 500,
                            easingFunction: 'easeInOutQuad'
                        }
                    });
                    setTimeout(() => {
                        network.startSimulation();
                        network.physics.physicsEnabled = true;
                    }, 600);
                }, 100);

                toggle_c = 2

                tempAlert(`Tecla ${event.key} - Enquadra nós adjacentes ao nó selecionado`, 3000);



            // 3) UM NÓ SELECIONADO - ENQUADRA TODOS OS NÓS
            } else if (event.key == 'c' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length == 1 && toggle_c == 2) {

                // DESABILITA ELEMENTOS PARA EVITAR TRAVAMENTO DA IMAGEM (MELHORA DESEMPENHO)

                setTimeout(() => {
                    network.fit({
                        animation: {
                            duration: 500,
                            easingFunction: 'easeInOutQuad'
                        }
                    });
                    setTimeout(() => {
                        network.startSimulation();
                        network.physics.physicsEnabled = true;
                    }, 600);
                }, 100);
  
                tempAlert(`Tecla ${event.key} - Enquadra todos os nós (sem nós selecionados)`, 3000);

                toggle_c = 0

                
            // ============================================
                
            
            // 4) DOIS OU MAIS NÓS SELECIONADOS - EXIBE NÓS CONECTADOS AOS NÓS SELECIONADOS
            } else if (event.key == 'c' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length > 1 && toggle_c == 0) {

                // DESABILITA ELEMENTOS PARA EVITAR TRAVAMENTO DA IMAGEM (MELHORA DESEMPENHO)
                network.physics.physicsEnabled = false;
                network.physics.stopSimulation();

                let sel_nodes = network.getSelectedNodes();

                // EXTRAI NOS CONECTADOS AO NÓ SELECIONADO
                let con_nodes = []
                let temp = []
                if (sel_nodes.length > 0) {
                    for (var i=0; i<sel_nodes.length; i++) {
                        temp = network.getConnectedNodes(sel_nodes[i]);
                        temp2 = temp.concat(sel_nodes);
                        con_nodes = con_nodes.concat(temp2)
                    }
                }                

                setTimeout(() => {
                    network.fit({
                        nodes: con_nodes,
                        animation: {
                            duration: 500,
                            easingFunction: 'easeInOutQuad'
                        }
                    });
                    setTimeout(() => {
                        network.startSimulation();
                        network.physics.physicsEnabled = true;
                    }, 600);
                }, 100);

                toggle_c = 1

                tempAlert(`Tecla ${event.key} - Enquadra nós adjacentes aos nós selecionados`, 3000);



            // 5) MAIS DE UM NÓ SELECIONADOS - ENQUADRA TODOS OS NÓS
            } else if (event.key == 'c' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length > 1 && toggle_c == 1) {

                // DESABILITA ELEMENTOS PARA EVITAR TRAVAMENTO DA IMAGEM (MELHORA DESEMPENHO)
                setTimeout(() => {
                    network.fit({
                        animation: {
                            duration: 500,
                            easingFunction: 'easeInOutQuad'
                        }
                    });
                    setTimeout(() => {
                        network.startSimulation();
                        network.physics.physicsEnabled = true;
                    }, 600);
                }, 100);
  
                tempAlert(`Tecla ${event.key} - Enquadra todos os nós (sem nós selecionados)`, 3000);

                toggle_c = 0

                
            // ============================================

            // && network.physics.options.solver == 'barnesHut' 
            // 6) NENHUM NÓ SELECIONADO - ENQUADRA TODOS OS NÓS
            } else if (event.key == 'c' && network.getSelectedNodes().length == 0) {

                // DESABILITA ELEMENTOS PARA EVITAR TRAVAMENTO DA IMAGEM (MELHORA DESEMPENHO)
                network.physics.stopSimulation();
                
                setTimeout(() => {
                    network.fit({
                        animation: {
                            duration: 500,
                            easingFunction: 'easeInOutQuad'
                        }
                    });
                    setTimeout(() => {
                        network.startSimulation();
                    }, 600);
                }, 100);

                toggle_c = 0
  
                tempAlert(`Tecla ${event.key} - Enquadra todos os nós (sem nós selecionados)`, 3000);
            }
        });




        // ##########################################
        // GERA QR CODE PARA A URL DO GRAFO - TECLA C
        // ##########################################

        // document.addEventListener('keydown', (event) => {
        //     if (event.key == 'C') {
        //         // Verificar se é uma URL válida (http ou https)
        //         const urlAtual = window.location.href;
        //         const isURL = urlAtual.startsWith('http://') || urlAtual.startsWith('https://');
                
        //         if (!isURL) {
        //             // Exibir mensagem se não for URL
        //             tempAlert(`Tecla ${event.key} - Funcionalidade disponível apenas para versão web do SINARC`, 3000);
        //             return;
        //         }

        //         tempAlert(`Tecla ${event.key} - Exibe QR Code para compartilhamento da URL do grafo`, 3000);
                
        //         // Criar overlay de fundo
        //         const overlay = document.createElement('div');
        //         overlay.style.cssText = `
        //             position: fixed;
        //             top: 0;
        //             left: 0;
        //             width: 100%;
        //             height: 100%;
        //             background-color: rgba(0, 0, 0, 0.5);
        //             display: flex;
        //             justify-content: center;
        //             align-items: center;
        //             z-index: 9999;
        //             cursor: pointer;
        //         `;
                
        //         // Criar container do QR Code
        //         const container = document.createElement('div');
        //         container.style.cssText = `
        //             background-color: white;
        //             padding: 30px;
        //             border-radius: 10px;
        //             box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        //             text-align: center;
        //         `;
                
        //         // Adicionar título
        //         const titulo = document.createElement('h2');
        //         titulo.textContent = 'Escaneie o QR Code';
        //         titulo.style.marginBottom = '20px';
        //         titulo.style.color = '#333';
        //         container.appendChild(titulo);
                
        //         // Criar imagem do QR Code usando API pública
        //         const urlEncoded = encodeURIComponent(urlAtual);
        //         const qrCodeImg = document.createElement('img');
        //         qrCodeImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${urlEncoded}`;
        //         qrCodeImg.alt = 'QR Code da página';
        //         qrCodeImg.style.cssText = `
        //             width: 300px;
        //             height: 300px;
        //             display: block;
        //             margin: 0 auto;
        //         `;
        //         container.appendChild(qrCodeImg);
                
        //         // Adicionar URL abaixo do QR Code
        //         const urlText = document.createElement('p');
        //         urlText.textContent = urlAtual;
        //         urlText.style.cssText = `
        //             margin-top: 15px;
        //             font-size: 12px;
        //             color: #666;
        //             word-break: break-all;
        //             max-width: 300px;
        //         `;
        //         container.appendChild(urlText);
                
        //         // Adicionar instrução para fechar
        //         const instrucao = document.createElement('p');
        //         instrucao.textContent = 'Clique em qualquer lugar para fechar';
        //         instrucao.style.cssText = `
        //             margin-top: 10px;
        //             font-size: 14px;
        //             color: #999;
        //         `;
        //         container.appendChild(instrucao);
                
        //         // Adicionar container ao overlay
        //         overlay.appendChild(container);
                
        //         // Fechar ao clicar no overlay
        //         overlay.addEventListener('click', function(e) {
        //             if (e.target === overlay) {
        //                 document.body.removeChild(overlay);
        //             }
        //         });
                
        //         // Prevenir fechamento ao clicar no container
        //         container.addEventListener('click', function(e) {
        //             e.stopPropagation();
        //         });
                
        //         // Adicionar ao body
        //         document.body.appendChild(overlay);
        //     }
        // });



        // #####################################################################
        // SELECIONA NÓS ÚNICOS (EN, EM E TE) PARA SIMPLIFICAR O GRAFO - TECLA ç
        // #####################################################################

        var toggle_ç = 0;
        document.addEventListener("keypress", function(event) {

            // if (event.key === "ç" && network.getSelectedNodes().length == 0 && toggle_ç == 0) {
            if (event.key === "ç" && toggle_ç == 0) {


            
                // TRECHO INCLUÍDO PARA DESSELECIONAR TODOS OS NÓS ANTES DE APLICAR A NOVA SELEÇÃO
                network.unselectAll();

                // Obtém todos os nós
                let allNodeIds = nodes.getIds();

                // Cria array de atualizações
                let updatedNodes = [];
                for (let i = 0; i < allNodeIds.length; i++) {
                    updatedNodes.push({
                        id: allNodeIds[i],
                        font: {
                            color: "#777777",
                            bold: false  // Remove negrito que causa cor vermelha
                        }
                    });
                }

                // Atualiza todos os nós de uma vez
                nodes.update(updatedNodes);

                network.redraw();

                


                let nod = nodes.getIds();
                let nodToSelect = [];
                for (var i = 0; i < nod.length; i++) {
                    if ((nod[i].slice(0, 3) == "TE_") || (nod[i].slice(0, 3) == "EN_") || (nod[i].slice(0, 3) == "EM_")) {
                        if (network.body.nodes[nod[i]].edges.length == 1) {
                            nodToSelect.push(nod[i]);
                            //console.log(nod[i]);
                        }
                    }
                }
                network.selectNodes(nodToSelect);

                let percentual = (nodToSelect.length / nod.length) * 100;
                percentual = percentual.toFixed(1);

                tempAlert(`Tecla ${event.key} - Seleciona nós EN, EM e TE com aresta única (${nodToSelect.length}) ${percentual}%`, 3000);

                toggle_ç = 1;
            
            } else if (event.key === "ç" && toggle_ç == 1) {
                let nod = nodes.getIds();
                let nodToSelect = [];
                for (var i = 0; i < nod.length; i++) {
                    if ((nod[i].slice(0, 3) == "TE_") || (nod[i].slice(0, 3) == "EN_") || (nod[i].slice(0, 3) == "EM_")) {
                        nodToSelect.push(nod[i]);
                    }
                }
                network.selectNodes(nodToSelect);

                let percentual = (nodToSelect.length / nod.length) * 100;
                percentual = percentual.toFixed(1);

                tempAlert(`Tecla ${event.key} - Seleciona todos os nós EN, EM e TE (${nodToSelect.length}) ${percentual}%`, 3000);

                toggle_ç = 2;



            //} else if (event.key === "ç" && toggle_ç == 2) {

            //    let nod = nodes.getIds();
            //    let nodToSelect = [];
            //    for (var i = 0; i < nod.length; i++) {
            //        if (network.body.nodes[nod[i]].edges.length == 1) {
            //            nodToSelect.push(nod[i]);
            //        }
            //    }
            //    network.selectNodes(nodToSelect);

            //    let percentual = (nodToSelect.length / nod.length) * 100;
            //    percentual = percentual.toFixed(1);

            //    tempAlert(`Tecla ${event.key} - Seleciona todos os nós com apenas uma aresta (${nodToSelect.length}) ${percentual}%`, 3000);

            //    toggle_ç = 3;
            //}




            } else if (event.key === "ç" && toggle_ç == 2) {
                network.unselectAll();

                tempAlert(`Tecla ${event.key} - Desseleciona todos os nós (${nodes.getIds().length})`, 3000);

                toggle_ç = 0;
            }
        });



        // ######################################################################
        // ALTERNA ENTRE A SELEÇÃO DE NÓS COM BASE NO NÚMERO DE ARESTAS - TECLA Ç
        // ######################################################################

        var count_Ç = 0;

        document.addEventListener("keypress", function(event) {
            
            if (event.key === "Ç") {

                network.unselectAll();
                
                let nod = nodes.getIds();
                
                let num_arestas = [];
                for (var i = 0; i < nod.length; i++) {
                    let temp = network.body.nodes[nod[i]].edges.length;
                    temp = parseInt(temp);
                    num_arestas.push(temp);
                }

                num_arestas = [...new Set(num_arestas)];

                num_arestas.sort((a, b) => a - b); // Ordem CRESCENTE (menor → maior)
                //num_arestas.sort((a, b) => b - a);  // Ordem DECRESCENTE (maior → menor)
                
                //console.log(num_arestas);

                let nodToSelect = [];
                for (var i = 0; i < nod.length; i++) {
                    if (network.body.nodes[nod[i]].edges.length == num_arestas[count_Ç]) {
                        nodToSelect.push(nod[i]);
                    }
                }
                
                network.selectNodes(nodToSelect);
            
                let percentual = (nodToSelect.length / nod.length) * 100;
                percentual = percentual.toFixed(1);


                if (num_arestas.length == count_Ç) {
                    tempAlert(`Tecla ${event.key} - Desseleciona todos os nós`, 3000);
                    count_Ç = 0;
                
                } else {
                    tempAlert(`Tecla ${event.key} - Seleciona nós com ${num_arestas[count_Ç]} arestas (${nodToSelect.length}) ${percentual}%`, 3000);
                    count_Ç += 1;
                }
            }
        });



        // #####################################################
        // ABRE PÁGINA COM DETALHES DA PESSOA JURÍDICA - TECLA d
        // #####################################################

        document.addEventListener('keydown', (event) => {
            if (event.key == 'd' && network.getSelectedNodes().length == 1) {
                var sel = network.getSelectedNodes();
                for (var i=0; i<sel.length; i++) {
                    if (sel.length > 0) {
                        for (var i=0; i<sel.length; i++) {

                            // PARA CONSULTA DE CNPJ
                            if (sel[i].slice(0, 3) == "PJ_") {
                                var cnpj = sel[i].slice(3);
                                //var link = "http://cnpj.info/" + cnpj;
                                //window.open(link, 'popup','left=50,top=100,width=600,height=600');

                                consultarCNPJ(cnpj);

                            // PARA CONSULTA DE ENDEREÇO
                            } else if (sel[i].slice(0, 3) == "EN_") {
                                var endereco = sel[i].slice(3).replace();
                                endereco = endereco.replaceAll(' ', '+');
                                var link = "https://maps.google.com/maps?q=" + endereco;
                                window.open(link, 'popup','left=50,top=100,width=600,height=600');

                            // PARA CONSULTA DE E-MAIL
                            } else if (sel[i].slice(0, 3) == "EM_") {
                                var email = sel[i].slice(3).replace();
                                email = email.replaceAll(' ', '+').replace('@', '%40');
                                var link = "https://maps.google.com/search?q=" + '"' + email + '"';
                                window.open(link, 'popup','left=50,top=100,width=600,height=600');
                            
                            // PARA CONSULTA DE PESSOA FÍSICA
                            } else if (sel[i].slice(0, 3) == "PF_") {
                                var nome_socio = sel[i].slice(15);
                                nome_socio = nome_socio.replaceAll(' ', '+');
                                //var link = "http://www.consultasocio.com/q/sa/" + nome_socio;
                                var link = "https://www.diretoriobrasil.net/buscar-socio/?termo=" + nome_socio + "&acao=Buscar"
                                window.open(link, 'popup','left=50,top=100,width=600,height=600');
                            }

                            // Exibe informações na tela
                            tempAlert(`Tecla ${event.key} - Exibe detalhes do nó selecionado (exceto TE)`, 3000);

                        }
                    }
                }

            } else if (event.key == 'd' && network.getSelectedNodes().length != 1) {
                tempAlert(`Tecla ${event.key} - Selecione um nó para exibir detalhes (exceto TE)`, 3000);
            }
        });


        // -----------------------------------------
        // FUNÇÃO ADICIONAL PARA TECLA d (APENAS PJ)
        // -----------------------------------------

        /*async function consultarCNPJ(cnpj) {
            const cnpjLimpo = cnpj.replace(/\D/g, '');
            
            if (cnpjLimpo.length !== 14) {
                throw new Error('CNPJ inválido! Deve conter 14 dígitos.');
            }
            
            const response = await fetch('https://minhareceita.org/' + cnpjLimpo);
            
            if (!response.ok) {
                throw new Error('Erro ao consultar CNPJ. Verifique se o CNPJ está correto.');
            }
            
            const dados = await response.json();
            const html = gerarHTML(dados);
            
            // MODIFICADO AQUI:
            const novaJanela = window.open('', 'popup', 'left=50,top=50,width=1100,height=500,scrollbars=yes,resizable=yes');
            novaJanela.document.write(html);
            novaJanela.document.close();
        }*/

        

        async function consultarCNPJ(cnpj) {
            const cnpjLimpo = cnpj.replace(/\D/g, '');

            if (cnpjLimpo.length !== 14) {
                alert('CNPJ inválido! Deve conter 14 dígitos.');
                return;
            }

            const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);

            let novaJanela = null;

            // 📱 MOBILE → abre imediatamente
            if (isMobile) {
                novaJanela = window.open('', '_blank');
                if (!novaJanela) {
                    alert('Pop-up bloqueado pelo navegador.');
                    return;
                }
                novaJanela.document.write(
                    '<p style="font-family:sans-serif;padding:20px">Carregando dados do CNPJ...</p>'
                );
            }

            try {
                const response = await fetch('https://minhareceita.org/' + cnpjLimpo);

                if (!response.ok) {
                    throw new Error('Erro ao consultar CNPJ.');
                }

                const dados = await response.json();
                const html = gerarHTML(dados);

                // 💻 DESKTOP → abre após o fetch
                if (!isMobile) {
                    novaJanela = window.open(
                        '',
                        'popup',
                        'left=50,top=50,width=1100,height=500,scrollbars=yes,resizable=yes'
                    );
                }

                if (!novaJanela) {
                    alert('Não foi possível abrir a nova janela.');
                    return;
                }

                novaJanela.document.open();
                novaJanela.document.write(html);
                novaJanela.document.close();

                } catch (error) {
                    if (novaJanela) {
                        novaJanela.document.write(
                            '<p style="font-family:sans-serif;padding:20px;color:red">Erro ao carregar dados.</p>'
                        );
                    }
                    console.error(error);
                    alert(error.message);
                }
            }



        // ##########################################################
        // ABRE PÁGINA COM DETALHES DA PESSOA JURÍDICA - DUPLO CLIQUE
        // ##########################################################

        document.addEventListener('dblclick', () => {
            if (network.getSelectedNodes().length === 1) {
                const sel = network.getSelectedNodes()[0];
                if (sel.startsWith('PJ_')) {
                    consultarCNPJ(sel.slice(3));
                }
            }
        });







        function formatarCNPJ(cnpj) {
            if (!cnpj) return '<span style="color: #bbb; font-style: italic;">-</span>';
            return cnpj.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/, '$1.$2.$3/$4-$5');
        }

        function formatarData(data) {
            if (!data) return '<span style="color: #bbb; font-style: italic;">-</span>';
            const partes = data.split('-');
            return partes[2] + '/' + partes[1] + '/' + partes[0];
        }

        function formatarMoeda(valor) {
            if (!valor) return '<span style="color: #bbb; font-style: italic;">-</span>';
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(valor);
        }
        
        function formatarTelefone(tel) {
            if (!tel) return '<span style="color: #bbb; font-style: italic;">-</span>';
            const ddd = tel.substring(0, 2);
            const numero = tel.substring(2);
            if (numero.length === 9) {
                return '(' + ddd + ') ' + numero.substring(0, 5) + '-' + numero.substring(5);
            } else if (numero.length === 8) {
                return '(' + ddd + ') ' + numero.substring(0, 4) + '-' + numero.substring(4);
            }
            return '(' + ddd + ') ' + numero;
        }
        
        function formatarFaixaEtaria(faixa) {
            if (!faixa) return '<span style="color: #bbb; font-style: italic;">-</span>';
            const match = faixa.match(/\d+\s+a\s+\d+/);
            return match ? match[0] : faixa;
        }


        // DEFINE TEXTO DE PESQUISA GLOBALMENTE
        // PROMPT ORIGINAL


        /*
        const textoPesquisa = `Realize uma pesquisa profunda e detalhada sobre o histórico de conformidade e integridade relacionado ao alvo a seguir. 
            O objetivo é identificar riscos reputacionais por meio de uma análise forense com foco no controle externo da Administração Pública e na produção de insights para a defesa do interesse público. 
            Utilize inteligência com fontes abertas (OSINT) para coletar dados relevantes disponíveis na internet, incluindo notícias, registros públicos, listas de sanções, portais de transparência, redes sociais e outras fontes confiáveis. 
            Concentre-se em aspectos que possam indicar envolvimento em práticas ilícitas, má conduta empresarial ou qualquer outro fator que possa comprometer a integridade e a reputação das pessoas ou entidades vinculadas ao alvo investigado.
            Por favor, forneça as informações estruturadas da seguinte forma: 
            1. Identificação de Vínculos: Identifique pessoas físicas, pessoas jurídicas, endereços, telefones e e-mails associados ao alvo. Descreva o tipo de vínculo encontrado (proprietário, sócio, usuário, sede, contato, etc.).
            2. Notícias e Irregularidades: Liste menções em investigações, processos judiciais e administrativos públicos, inquéritos ou notícias sobre fraudes, corrupção e irregularidades envolvendo a Administração Pública e o interesse coletivo. 
            3. Rede de Ligações: Identifique sócios, empresas coligadas, parceiros de negócios ou outras entidades frequentemente citadas em conjunto com o alvo ou seus vínculos. 
            4. Presença em Listas: Verifique se o alvo ou entidades vinculadas constam em portais de transparência, listas de sanções ou registros de empresas e pessoas suspensas ou impedidas de contratar com a Administração Pública (CEIS, CNEP, CEPIM, CEAF, CNIA, Acordo de Leniência, PEP).
            5. Atividades Comerciais: Descreva o setor de atuação, principais atividades comerciais e qualquer histórico de contratos com o setor público relacionados ao alvo ou entidades vinculadas. 
            6. Reputação Online: Analise avaliações, comentários, reclamações e discussões em redes sociais, fóruns, sites de reclamação (Reclame Aqui, Procon) e sites especializados que mencionem o alvo.
            7. Análise de Padrões Suspeitos: Verifique se o alvo apresenta características típicas de uso irregular, como: endereços compartilhados por muitas empresas (endereço de fachada), telefones associados a fraudes ou golpes, e-mails vinculados a vazamentos de dados ou atividades maliciosas.
            8. Histórico Financeiro: Investigue falências, recuperações judiciais ou outras questões financeiras relevantes relacionadas a pessoas ou empresas vinculadas ao alvo. 
            9. Conformidade Legal: Verifique o cumprimento de obrigações legais, fiscais e regulatórias das entidades associadas ao alvo. 
            10. Outras Informações Relevantes: Inclua quaisquer outras informações que possam impactar a avaliação de risco reputacional do alvo e seus vínculos.
            11. Insights para Pesquisa: Forneça 5 insights ou pontos de atenção que possam guiar uma investigação mais aprofundada sobre o alvo. 
            12. Prompts para Aprofundamento: Ao final de cada resposta, apresente 6 novas sugestões de prompts para IA (de 1 a 6), distintas das sugestões já apresentadas na conversa, sendo a sexta opção para gerar novos prompts contendo sugestões de outros temas ainda não explorados, visando aprofundar ainda mais a investigação por meio de dados públicos disponíveis na internet, de modo que o usuário precise apenas digitar o número do prompt desejado para a IA realizar a pesquisa correspondente. Peça para o usuário digitar um número.
        `;
        */

        
        const textoPesquisa = `
            Com o objetivo auxiliar o cidadão no controle social da Administração Pública perante os Tribunais de Contas (art. 74, § 2º, CF), realize "Due Diligence" e Análise Forense completas, incluindo conformidade e integridade legal, fiscal e regulatória sobre a entidade a seguir. Realize uma pesquisa profunda (deep research) usando OSINT a partir de dados públicos de CNPJ disponibilizados pela Receita Federal, coletando e cruzando informações disponíveis em bases e sites governamentais, sites de notícias, redes sociais e demais fontes públicas lícitas, a fim de identificar vínculos, presença digital, sanções, contratos públicos, notícias de irregularidades, processos, rede de relacionamentos, situação financeira da pessoa jurídica, entre outras informações relevantes.
            Os achados dessa auditoria devem ser submetidos a uma análise jurídica rigorosa, à luz da legislação aplicável — especialmente as Leis nº 14.133/2021, 8.429/1992, 12.846/2013 e LC nº 101/2000 —, apontando indícios de padrões e anomalias que configurem indícios de irregularidades e estruturando sua resposta nos seguintes tópicos: 1. identificação de vínculos, 2. presença digital, 3. sanções e impedimentos (CEIS, CNEP, CEPIM, CEAF, CNIA, TCU Inidôneos, Acordos de Leniência, PEP), 4. contratos e licitações, 5. notícias e menções públicas, 6. processos judiciais e administrativos, 7. rede de relacionamentos, 8. padrões e anomalias identificados, 9. análise de irregularidades, 10. reputação e histórico comercial, 11. situação financeira, 12. análise jurídica consolidada (informações sobre fato e autoria, elementos de convicção e indícios de prova), 13. 5 pontos de atenção e 14. 5 insights para aprofundamento). Finalize sempre com 5 novos prompts numerados. Peça para o usuário escolher um número. Respostas subsequentes devem manter o mesmo padrão de detalhamento e rigor técnico.    
        
        `;    
        

        
        // PROMPT REDUZIDO
        /*
        const textoPesquisa = `
            Você é um agente de pesquisa OSINT e análise jurídica para apoio ao controle social da Administração Pública (art. 74, §2º, CF). Sua função é pesquisar fontes abertas, analisar dados à luz da legislação e produzir relatórios que subsidiem denúncias aos Tribunais de Contas, observando os requisitos de admissibilidade: clareza, informações sobre fato e autoria, elementos de convicção e indícios de prova.
            Realize pesquisa profunda sobre a entidade informada, utilizando como parâmetros os dados da base pública de CNPJ/RFB (razão social, nome fantasia, CNPJ, sócios, endereços, telefones, e-mails). Colete dados em portais de transparência, bases governamentais, diários oficiais, sistemas judiciais, veículos jornalísticos, redes sociais (PJ e perfis públicos de PF vinculadas), sites institucionais, plataformas de avaliação, fóruns, registros de domínios e demais fontes abertas.
            Ao identificar possíveis irregularidades, realize enquadramento jurídico indicando dispositivos potencialmente violados, especialmente: Lei 14.133/2021, Lei 8.429/1992, LC 101/2000, Lei 12.846/2013. Utilize linguagem técnica, indicando tratar-se de indícios sujeitos a apuração. Não utilize dados obtidos por meios ilícitos.
            Pesquise as fontes, leia o conteúdo e forneça:
            1. Vínculos: PF, PJ, endereços, telefones e e-mails associados. Descreva tipo de vínculo e fonte.
            2. Presença Digital: Sites, domínios, perfis em redes sociais (PJ e PF), materiais promocionais, diretórios empresariais. Descreva conteúdo relevante.
            3. Sanções e Impedimentos: Consulte CEIS, CNEP, CEPIM, CEAF, CNIA, TCU Inidôneos, Acordos de Leniência, PEP. Informe fonte, data, motivo, vigência. Analise implicações para contratação pública.
            4. Contratos e Licitações: Pesquise PNCP, ComprasNet, portais estaduais/municipais. Informe objeto, órgão, valores, vigência, situação. Analise indícios de sobrepreço, direcionamento, fracionamento, contratação de impedida ou outras irregularidades.
            5. Notícias e Menções: Pesquise notícias, reportagens e publicações em redes sociais sobre a entidade ou vinculados em contexto de Administração Pública. Sintetize e analise relevância como elemento de convicção.
            6. Processos Judiciais e Administrativos: Informe número, tribunal/órgão, classe e partes.
            7. Rede de Relacionamentos: Mapeie sócios em comum, endereços/telefones/e-mails compartilhados, vínculos familiares/societários cruzados, conexões em redes sociais, citações conjuntas. Analise indícios de cartel, conluio, empresas de fachada.
            8. Padrões e Irregularidades: Identifique endereços de registro massivo, sócios com múltiplas participações no mesmo ramo, dados cadastrais compartilhados, constituição simultânea de empresas similares, atuação coordenada em redes sociais. Indique enquadramento jurídico.
            9. Reputação: Pesquise Reclame Aqui, Procon, consumidor.gov.br, Google Maps, redes sociais. Analise capacidade técnica/operacional para contratos públicos.
            10. Situação Financeira: Pesquise recuperação judicial, falência, protestos. Analise implicações para qualificação econômico-financeira.
            11. Análise Jurídica Consolidada: a) Fatos que configuram possíveis irregularidades; b) Enquadramento jurídico preliminar; c) Elementos de convicção; d) Indícios de prova; e) Recomendação sobre viabilidade de representação ao TC. Ressalve tratar-se de análise preliminar baseada em fontes abertas.
            12. Pontos de Atenção: 5 observações objetivas relevantes para representação aos órgãos de controle.
            13. Insights para Pesquisa: 5 insights para aprofundamento: a) Hipóteses investigativas; b) Conexões não óbvias; c) Lacunas informacionais; d) Inconsistências entre fontes; e) Linhas de investigação promissoras. Fundamente cada insight e sugira verificação.
            14. Prompts para Aprofundamento: 6 sugestões (1-6), distintas das anteriores. A sexta deve gerar novos prompts com temas ainda não explorados. Peça ao usuário para digitar o número.
        `;
        */

        /*
        // PROMPT COM REDUÇÃO MÁXIMA
        const textoPesquisa = `
            Realize uma pesquisa OSINT e análise jurídica para apoiar o controle social da Administração Pública (art. 74, §2º, CF).
            Pesquise fontes abertas e analise os dados à luz da legislação para possíveis denúncias aos Tribunais de Contas, observando clareza, informações sobre fato e autoria, elementos de convicção e indícios de prova.
            Realize pesquisa profunda sobre a entidade, usando como parâmetros a base pública de CNPJ/RFB (razão social, nome fantasia, CNPJ, sócios, endereços, telefones, e-mails). 
            Colete dados em portais de transparência, bases governamentais, diários oficiais, veículos jornalísticos, redes sociais, sites institucionais e demais fontes abertas.
            Ao identificar irregularidades, realize enquadramento jurídico indicando os dispositivos violados, especialmente: Lei 14.133/2021, Lei 8.429/1992, LC 101/2000, Lei 12.846/2013. 
            Não utilize dados obtidos por meios ilícitos.
            Estruture sua resposta da seguinte forma:
            1. Vínculos: PF, PJ, endereços, telefones e e-mails associados.
            2. Presença Digital: Sites e perfis em redes sociais.
            3. Sanções e Impedimentos: Consulte CEIS, CNEP, CEPIM, CEAF, CNIA, TCU Inidôneos, Acordos de Leniência, PEP. Analise implicações para contratação pública.
            4. Contratos e Licitações: Pesquise PNCP, ComprasNet, portais estaduais/municipais. Informe objeto, órgão, valores, vigência, situação. Analise indícios de sobrepreço, direcionamento, fracionamento, contratação de impedida ou outras irregularidades.
            5. Notícias e Menções: Pesquise notícias, reportagens e publicações sobre a entidade ou vinculados em contexto de Administração Pública. Sintetize e analise relevância como elemento de convicção.
            6. Processos Judiciais e Administrativos: Pesquise em todos os Estados e sites especializados. 
            7. Rede de Relacionamentos: Mapeie sócios em comum, endereços/telefones/e-mails compartilhados, vínculos familiares/societários cruzados, conexões em redes sociais, citações conjuntas. Analise indícios de cartel, conluio, empresas de fachada.
            8. Padrões e Irregularidades: Identifique endereços de registro massivo, sócios com múltiplas participações no mesmo ramo, dados cadastrais compartilhados, constituição simultânea de empresas similares, atuação coordenada em redes sociais. Indique enquadramento jurídico.
            9. Reputação: Pesquise Reclame Aqui, Procon, consumidor.gov.br, Google Maps. Analise capacidade técnica/operacional para contratos públicos.
            10. Situação Financeira: Pesquise recuperação judicial, falência etc.. Analise implicações para qualificação econômico-financeira.
            11. Análise Jurídica Consolidada: a) Fatos que configuram possíveis irregularidades; b) Enquadramento jurídico preliminar; c) Elementos de convicção; d) Indícios de prova; e) Recomendação sobre viabilidade de representação ao TC. Ressalve tratar-se de análise preliminar baseada em fontes abertas.
            12. Pontos de Atenção: 5 observações relevantes para representação aos órgãos de controle.
            13. Insights para Pesquisa: 5 insights para aprofundamento: a) Hipóteses investigativas; b) Conexões não óbvias; c) Lacunas informacionais; d) Inconsistências entre fontes; e) Linhas de investigação promissoras. Fundamente cada insight e sugira verificação.
            14. Prompts para Aprofundamento: 6 sugestões (1-6), distintas das anteriores. A sexta deve gerar novos prompts com temas ainda não explorados. Peça ao usuário para digitar o número.
        `;
        */
        

        // PROMPT COMPLETO (NÃO EXIBE SITES PESQUISADOS)
        /*
        const textoPesquisa = `
            Você é um agente de pesquisa OSINT e análise jurídica desenvolvido para apoiar o controle social da Administração Pública, nos termos do art. 74, § 2º, da Constituição Federal. Sua função é realizar pesquisas abrangentes em fontes abertas da internet, analisar os dados coletados à luz da legislação vigente e produzir relatórios que subsidiem o cidadão na formulação de denúncias aos Tribunais de Contas, observando os requisitos de admissibilidade previstos em lei (clareza, informações sobre o fato e autoria, elementos de convicção e indícios de prova).
            Realize uma pesquisa profunda e detalhada em fontes abertas da internet sobre a entidade a seguir, utilizando como parâmetros de busca os dados da base pública de CNPJ da Receita Federal (razão social, nome fantasia, CNPJ, nomes de sócios, endereços, telefones e e-mails).
            O objetivo é identificar informações relevantes para o controle social da Administração Pública, analisar os achados à luz da legislação aplicável e apontar possíveis irregularidades que possam subsidiar o cidadão no exercício do direito constitucional de representar aos Tribunais de Contas. Colete dados disponíveis em portais de transparência, bases governamentais, diários oficiais, sistemas judiciais, veículos jornalísticos, redes sociais de pessoas jurídicas e perfis públicos de pessoas físicas vinculadas, sites institucionais, plataformas de avaliação, fóruns, registros de domínios e quaisquer outras fontes abertas de acesso público.
            Ao identificar fatos que possam configurar irregularidades, realize o enquadramento jurídico indicando os dispositivos legais potencialmente violados, especialmente a Lei 14.133/2021 (licitações e contratos), Lei 8.429/1992 (improbidade administrativa), Lei Complementar 101/2000 (responsabilidade fiscal), Lei 12.846/2013 (anticorrupção) e demais normas aplicáveis. Utilize linguagem técnica adequada, indicando que se tratam de indícios de irregularidades sujeitas a apuração pelos órgãos competentes.
            Não utilize dados obtidos por meios ilícitos (vazamentos ou invasão de sistemas).
            Por favor, pesquise as fontes, leia o conteúdo encontrado e forneça as informações estruturadas da seguinte forma:
            1. Identificação de Vínculos: Pesquise e identifique pessoas físicas, pessoas jurídicas, endereços, telefones e e-mails associados à entidade. Descreva o tipo de vínculo encontrado (sócio, administrador, preposto, sede, filial, contato, etc.) e a fonte onde a informação foi localizada.
            2. Presença Digital: Pesquise e descreva a presença online da entidade e de pessoas vinculadas, incluindo sites institucionais, domínios registrados, perfis em redes sociais (tanto de pessoas jurídicas quanto perfis públicos de pessoas físicas vinculadas), materiais promocionais e menções em diretórios empresariais. Acesse os perfis e descreva o conteúdo relevante encontrado.
            3. Sanções e Impedimentos: Consulte as bases oficiais (CEIS, CNEP, CEPIM, CEAF, CNIA, TCU Inidôneos, Acordos de Leniência, PEP) e informe se a entidade ou pessoas vinculadas constam nessas bases, indicando fonte, data de inclusão, motivo e vigência. Analise as implicações jurídicas dos registros encontrados para fins de contratação pública.
            4. Contratos e Licitações: Pesquise a participação da entidade em licitações e contratos públicos nos portais de transparência (PNCP, ComprasNet, portais estaduais e municipais). Informe os contratos encontrados, incluindo objeto, órgão contratante, valores, vigência e situação. Analise os dados em busca de indícios de irregularidades como sobrepreço, direcionamento, fracionamento indevido, contratação de empresa impedida ou outra violação à Lei 14.133/2021.
            5. Notícias e Menções Públicas: Pesquise e leia notícias, reportagens e publicações em redes sociais que mencionem a entidade ou pessoas vinculadas em contextos relacionados à Administração Pública. Sintetize o conteúdo encontrado e analise sua relevância como elemento de convicção para eventual denúncia.
            6. Processos Judiciais e Administrativos: Pesquise processos judiciais e administrativos públicos envolvendo a entidade ou pessoas vinculadas. Informe número do processo, tribunal ou órgão, classe processual e partes envolvidas.
            7. Rede de Relacionamentos: Pesquise e mapeie a rede de relacionamentos da entidade, identificando sócios em comum com outras empresas, endereços ou telefones ou e-mails compartilhados entre empresas distintas, vínculos familiares ou societários cruzados, conexões em redes sociais pública e empresas frequentemente citadas em conjunto. Analise os vínculos em busca de indícios de formação de cartel, conluio em licitações, uso de empresas de fachada ou outras práticas vedadas.
            8. Padrões Identificados e Análise de Irregularidades: Analise os dados coletados e identifique padrões e anomalias que possam configurar irregularidades, como endereços de registro massivo (possíveis empresas de fachada), sócios com múltiplas participação societárias em empresas do mesmo ramo (possível cartel), dados cadastrais compartilhados (possível conluio), empresas constituídas em datas próximas com características similares (possível criação coordenada para fraudar licitações), ou padrões em redes sociais indicando atuação coordenada. Para cada padrão identificado, indique o possível enquadramento jurídico.
            9. Reputação e Histórico Comercial: Pesquise avaliações, reclamações e comentários sobre a entidade em sites como Reclame Aqui, Procon, consumidor.gov.br, Google Maps e redes sociais. Analise se os achados indicam capacidade técnica e operacional para executar contratos públicos.
            10. Situação Financeira: Pesquise informações sobre recuperação judicial, falência, protestos ou outras questões financeiras relevantes de acesso público. Analise as implicações para a qualificação econômico-financeira em licitações.
            11. Análise Jurídica Consolidada: Apresente uma análise jurídica consolidada dos achados, indicando: a) Fatos identificados que possam configurar irregularidades; b) Enquadramento jurídico preliminar (dispositivos legais potencialmente violados); c)Elementos de convicção disponíveis; d) Indícios de prova coletados; e) Recomendações sobre a viabilidade de representação ao Tribunal de Contas. Utilize linguagem técnica adequada, ressalvando que se trata de análise preliminar baseada em fontes abertas, sujeita a apuração pelos órgãos competentes.
            12. Pontos de Atenção: Com base nas informações coletadas, apresente 5 observações objetivas que possam ser relevantes para eventual representação aos órgãos de controle. Não conclua sobre ilicitude — apenas aponte dados que merecem atenção.
            13. Insights para Pesquisa: Com base nos dados coletados e na análise realizada, apresente 5 insights que possam orientar uma investigação mais aprofundada sobre a entidade. Os insights devem incluir: a) Hipóteses investigativas derivadas dos padrões identificados; b) Conexões não óbvias que merecem exploração; c) Lacunas informacionais relevantes (dados esperados mas não encontrados); d) Inconsistências ou contradições entre diferentes fontes; e d) Linhas de investigação promissoras para os órgãos de controle. Para cada insight, indique brevemente o raciocínio que o fundamenta e sugira como ele poderia ser verificado ou aprofundado.
            14. Prompts para Aprofundamento: Ao final de cada resposta, apresente 6 novas sugestões de prompts para IA (de 1 a 6), distintas das sugestões já apresentadas, sendo a sexta opção um prompt para gerar novos prompts contendo sugestões de temas ainda não explorados, visando aprofundar ainda mais a pesquisa por meio de dados públicos disponíveis na internet, de modo que o usuário precise apenas digitar o número do prompt desejado para a IA realizar a pesquisa correspondente. Peça para o usuário digitar um número.
        `;
        */

        
        window.textoPesquisa = textoPesquisa;


        
        function criarLinkBusca(nome) {
        const nomeFormatado = nome.replace(/\s+/g, '+');
        
        textoPesquisaFormatado = encodeURIComponent(window.textoPesquisa);


        const url = 'https://www.google.com/search?q=' + textoPesquisaFormatado + '+Entidade:+' + nomeFormatado + '&udm=50';
        return "window.open('" + url + "', '', 'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes'); return false;";
        }
        
        function exibirValor(valor) {
            if (valor === null || valor === undefined || valor === '') {
                return '<span style="color: #bbb; font-style: italic;">-</span>';
            }
            return valor;
        }

        



        function gerarHTML(dados) {

            const enderecoCompleto = encodeURIComponent(
                (dados.logradouro || '') + ', ' + (dados.numero || '') + ' - ' + 
                (dados.bairro || '') + ', ' + (dados.municipio || '') + ' - ' + 
                (dados.uf || '') + ', ' + (dados.cep || '')
            );
            
            let html = '<!DOCTYPE html><html lang="pt-BR"><head><meta charset="UTF-8">';
            html += '<meta name="viewport" content="width=device-width, initial-scale=1.0">';
            html += '<title>SINARC - ' + (dados.razao_social || 'Empresa') + '</title>';
            // html += '<link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/controlecidadao/sinarc/main/images/logo.ico">';
            html += '<style>';
            html += '* { margin: 0; padding: 0; box-sizing: border-box; }';
            html += 'body { font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #1a2332 0%, #2d3e50 100%); color: #333; line-height: 1.6; padding: 20px; }';
            html += '.container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); overflow: hidden; }';
            html += '.header { background: linear-gradient(135deg, #2c5f8d 0%, #1e4163 100%); color: white; padding: 30px; text-align: center; }';
            html += '.header h1 { font-size: 28px; margin-bottom: 10px; font-weight: 600; }';
            html += '.header-logo-inline { height: 50px; width: auto; vertical-align: middle; margin-right: 5px; }';
            html += '.header-title { display: inline-flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 15px; }';
            html += '.header .cnpj { font-size: 18px; opacity: 0.9; font-weight: 300; }';
            html += '.content { padding: 30px; }';
            html += '.section { margin-bottom: 35px; padding-left: 20px; }';
            html += '.section-title { color: #FF6B35; font-size: 20px; font-weight: 600; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid #FFE0D1; }';
            html += '.info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin-top: 15px; }';
            html += '.info-item { background: #f8f9fa; padding: 12px 15px; border-radius: 6px; border-left: 3px solid #4a90c2; }';
            html += '.info-label { font-size: 12px; color: #AAA; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px; font-weight: 600; }';
            html += '.info-value { font-size: 15px; color: #333; font-weight: 500; }';
            
            // Estilos para tabela de informações
            html += '.info-table { width: 100%; border-collapse: collapse; margin-top: 15px; }';
            html += '.info-table td { padding: 4px 0; border: none; vertical-align: top; }';
            html += '.info-table td:first-child { font-size: 14px; color: #2c5f8d; font-weight: 600; padding-right: 15px; white-space: nowrap; width: 200px; }';
            html += '.info-table td:last-child { font-size: 15px; color: #333; font-weight: 500; }';
            html += '.status-badge { display: inline-block; padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; text-transform: uppercase; }';
            html += '.status-ativa { background: #d4edda; color: #155724; }';
            html += '.status-inativa { background: #f8d7da; color: #721c24; }';
            html += '.map-container { margin-top: 15px; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }';
            html += '.map-container iframe { width: 100%; height: 450px; border: 0; }';
            html += '.map-links { margin-top: 10px; text-align: center; }';
            html += '.map-links a { display: inline-block; margin: 5px 10px; padding: 8px 16px; background: linear-gradient(135deg, #2c5f8d 0%, #1e4163 100%); color: white; text-decoration: none; border-radius: 20px; font-size: 13px; font-weight: 600; transition: transform 0.2s, box-shadow 0.3s; }';
            html += '.map-links a:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(44, 95, 141, 0.4); }';
            html += '.table-container { overflow-x: auto; margin-top: 15px; }';
            html += 'table { width: 100%; border-collapse: collapse; background: white; }';
            html += 'table thead { background: #2c5f8d; color: white; }';
            html += 'table th { padding: 10px 8px; text-align: left; font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.3px; white-space: nowrap; }';
            html += 'table td { padding: 10px 8px; border-bottom: 1px solid #e0e0e0; font-size: 13px; }';
            html += 'table tbody tr:hover { background: #f8f9fa; }';
            html += 'table tbody tr:last-child td { border-bottom: none; }';
            html += '.socio-link { color: #2c5f8d; text-decoration: none; font-weight: 600; transition: color 0.2s; }';
            html += '.socio-link:hover { color: #1e4163; text-decoration: underline; }';
            html += '.socio-link::after { content: " 🔍"; font-size: 12px; }';
            html += '.cnae-principal { background: #fff3cd; border-left: 3px solid #ffc107; }';
            html += '.footer { background: #f8f9fa; padding: 20px; text-align: center; color: #666; font-size: 13px; border-top: 1px solid #e0e0e0; }';
            html += '.print-button { background: #2c5f8d; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600; margin-top: 20px; transition: background 0.3s; }';
            html += '.print-button:hover { background: #1e4163; }';
            
            // CSS DE IMPRESSÃO OTIMIZADO
            html += '@media print {';
            html += '  body { background: white !important; padding: 0 !important; }';
            html += '  .print-button, .map-links, .map-container { display: none !important; }';
            html += '  .container { box-shadow: none !important; border-radius: 0 !important; max-width: 100% !important; }';
            html += '  .content { padding: 15px !important; }';
            html += '  .section { margin-bottom: 20px !important; page-break-inside: avoid; }';
            html += '  .header { padding: 20px !important; }';
            html += '  .info-grid { grid-template-columns: repeat(2, 1fr) !important; gap: 10px !important; }';
            html += '  .info-item { padding: 8px 10px !important; }';
            html += '  .info-label { font-size: 10px !important; }';
            html += '  .info-value { font-size: 12px !important; }';
            html += '  .info-table td:first-child { font-size: 11px !important; padding-right: 10px !important; }';
            html += '  .info-table td:last-child { font-size: 12px !important; }';
            html += '  table { font-size: 10px !important; page-break-inside: auto; }';
            html += '  table th { padding: 6px 4px !important; font-size: 10px !important; }';
            html += '  table td { padding: 6px 4px !important; font-size: 10px !important; }';
            html += '  table tr { page-break-inside: avoid; page-break-after: auto; }';
            html += '  .section-title { font-size: 16px !important; }';
            html += '  @page { size: portrait; margin: 0.5cm; }';
            html += '}';
            
            // html += '@media (max-width: 768px) { .info-grid { grid-template-columns: 1fr; } table { font-size: 11px; } table th, table td { padding: 6px; } .map-container iframe { height: 300px; } }';
            html += '@media (max-width: 768px) { .info-grid { grid-template-columns: 1fr; } table { font-size: 11px; } table th, table td { padding: 6px; } .map-container iframe { height: 300px; } .info-table td:first-child { white-space: normal; width: auto; } .info-table td:last-child { word-break: break-word; overflow-wrap: anywhere; } }';
            
            html += '</style></head><body>';            
            html += '<div class="container">';
            html += '<div class="header">';

            //html += '<h1><img src="raw.githubusercontent.com" style="vertical-align: middle; margin-right: 10px; height: 30px;">SINARC</h1>';
            html += '<div class="header-title">';
            html += '<img src="https://raw.githubusercontent.com/controlecidadao/sinarc/main/images/logo.png" alt="SINARC" class="header-logo-inline">';
            html += '<span style="font-size: 32px; font-weight: 700; letter-spacing: 2px;">SINARC</span>';
            html += '</div>';

            html += '<h1>' + (dados.razao_social || 'Empresa não identificada') + '</h1>';
            html += '<div class="cnpj">CNPJ: ' + formatarCNPJ(dados.cnpj) + '</div>';
            if (dados.nome_fantasia) {
                html += '<div style="margin-top: 8px; font-size: 16px;">Nome Fantasia: ' + dados.nome_fantasia + '</div>';
            }
            html += '</div>';
            
            html += '<div class="content">';
            
            // Mapa
            if (dados.cep) {
                html += '<div class="section">';
                html += '<h2 class="section-title">📍 Localização</h2>';
                html += '<div class="map-container">';
                html += '<iframe src="https://maps.google.com/maps?q=' + enderecoCompleto + '&t=h&z=17&output=embed" allowfullscreen loading="lazy"></iframe>';
                html += '</div>';
                html += '<div class="map-links">';
                html += '<a href="https://www.google.com/maps/search/?api=1&query=' + enderecoCompleto + '" target="_blank">🗺️ Ver no Google Maps</a>';
                html += '</div>';
                html += '</div>';
            }

            // DADOS DA BASE
            html += '<div class="section">';
            html += '<h2 class="section-title">Dados</h2>';
            html += '<table class="info-table">';
            html += '<tr><td>Dados do Relatório:</td><td><a href="https://minhareceita.org/updated" target="_blank" class="socio-link" title="Verificar data de atualização da base">Data de atualização</a></td></tr>';
            html += '</table></div>';

            // Grafo
            html += '<div class="section">';
            html += '<h2 class="section-title">Grafo Interativo</h2>';
            html += '<table class="info-table">';
            html += '<tr><td>Grafo:</td><td><a href="#" onclick="window.open(window.location.href, \'_blank\'); return false;" class="socio-link" title="Abrir grafo em nova aba">' + 'Abrir grafo' + '</a></td></tr>';
            html += '</table></div>';
            
            // Informações Cadastrais - TABELA
            html += '<div class="section">';
            html += '<h2 class="section-title">Informações Cadastrais</h2>';
            html += '<table class="info-table">';
            // html += '<tr><td>CNPJ:</td><td>' + formatarCNPJ(dados.cnpj) + '</td></tr>';
            html += '<tr><td>CNPJ:</td><td>' + (dados.cnpj ? '<a href="#" onclick="window.open(\'https://solucoes.receita.fazenda.gov.br/servicos/cnpjreva/Cnpjreva_Solicitacao.asp?cnpj=' + dados.cnpj + '\', \'popupCNPJ\', \'left=50,top=50,width=800,height=600,scrollbars=yes,resizable=yes\'); return false;" class="socio-link" title="Consultar CNPJ na Receita Federal">' + formatarCNPJ(dados.cnpj) + '</a>' : exibirValor(dados.cnpj)) + '</td></tr>';

            html += '<tr><td>Razão Social:</td><td>' + (dados.razao_social ? '<a href="#" onclick="' + criarLinkBusca(dados.razao_social) + '" class="socio-link" title="Pesquisar no Google com IA">' + dados.razao_social + '</a>' : exibirValor(dados.razao_social)) + '</td></tr>';
            
            html += '<tr><td>Nome Fantasia:</td><td>' + exibirValor(dados.nome_fantasia) + '</td></tr>';
            html += '<tr><td>Situação Cadastral:</td><td><span class="status-badge ' + (dados.descricao_situacao_cadastral === 'ATIVA' ? 'status-ativa' : 'status-inativa') + '">' + (dados.descricao_situacao_cadastral || 'Não informada') + '</span></td></tr>';
            html += '<tr><td>Data Situação Cadastral:</td><td>' + formatarData(dados.data_situacao_cadastral) + '</td></tr>';
            html += '<tr><td>Motivo Situação Cadastral:</td><td>' + exibirValor(dados.descricao_motivo_situacao_cadastral) + '</td></tr>';
            html += '<tr><td>Data Início Atividade:</td><td>' + formatarData(dados.data_inicio_atividade) + '</td></tr>';
            html += '<tr><td>Natureza Jurídica:</td><td>' + exibirValor(dados.natureza_juridica) + '</td></tr>';
            html += '<tr><td>Código Natureza Jurídica:</td><td>' + exibirValor(dados.codigo_natureza_juridica) + '</td></tr>';
            html += '<tr><td>Tipo:</td><td>' + exibirValor(dados.descricao_identificador_matriz_filial) + '</td></tr>';
            html += '<tr><td>Porte:</td><td>' + exibirValor(dados.porte) + '</td></tr>';
            html += '<tr><td>Código Porte:</td><td>' + exibirValor(dados.codigo_porte) + '</td></tr>';
            html += '<tr><td>Capital Social:</td><td>' + formatarMoeda(dados.capital_social) + '</td></tr>';
            html += '<tr><td>Ente Federativo Responsável:</td><td>' + exibirValor(dados.ente_federativo_responsavel) + '</td></tr>';
            html += '<tr><td>Qualificação do Responsável:</td><td>' + exibirValor(dados.qualificacao_do_responsavel) + '</td></tr>';
            html += '</table></div>';
            
            // Endereço - TABELA
            html += '<div class="section">';
            html += '<h2 class="section-title">Endereço</h2>';
            html += '<table class="info-table">';
            html += '<tr><td>Tipo de Logradouro:</td><td>' + exibirValor(dados.descricao_tipo_de_logradouro) + '</td></tr>';
            html += '<tr><td>Logradouro:</td><td>' + exibirValor(dados.logradouro) + '</td></tr>';
            html += '<tr><td>Número:</td><td>' + exibirValor(dados.numero) + '</td></tr>';
            html += '<tr><td>Complemento:</td><td>' + exibirValor(dados.complemento) + '</td></tr>';
            html += '<tr><td>Bairro:</td><td>' + exibirValor(dados.bairro) + '</td></tr>';
            html += '<tr><td>Município:</td><td>' + exibirValor(dados.municipio) + '</td></tr>';
            html += '<tr><td>UF:</td><td>' + exibirValor(dados.uf) + '</td></tr>';
            html += '<tr><td>CEP:</td><td>' + (dados.cep ? dados.cep.replace(/^(\d{5})(\d{3})$/, '$1-$2') : exibirValor(null)) + '</td></tr>';
            html += '<tr><td>Código Município:</td><td>' + exibirValor(dados.codigo_municipio) + '</td></tr>';
            html += '<tr><td>Código Município IBGE:</td><td>' + exibirValor(dados.codigo_municipio_ibge) + '</td></tr>';
            html += '<tr><td>País:</td><td>' + exibirValor(dados.pais) + '</td></tr>';
            html += '<tr><td>Código País:</td><td>' + exibirValor(dados.codigo_pais) + '</td></tr>';
            html += '<tr><td>Cidade no Exterior:</td><td>' + exibirValor(dados.nome_cidade_no_exterior) + '</td></tr>';
            html += '</table></div>';
            
            // Contato - TABELA
            html += '<div class="section">';
            html += '<h2 class="section-title">Contato</h2>';
            html += '<table class="info-table">';
            html += '<tr><td>Telefone 1:</td><td>' + formatarTelefone(dados.ddd_telefone_1) + '</td></tr>';
            html += '<tr><td>Telefone 2:</td><td>' + formatarTelefone(dados.ddd_telefone_2) + '</td></tr>';
            html += '<tr><td>Fax:</td><td>' + formatarTelefone(dados.ddd_fax) + '</td></tr>';
            html += '<tr><td>E-mail:</td><td>' + exibirValor(dados.email) + '</td></tr>';
            html += '</table></div>';
            
            // Informações Tributárias - TABELA
            html += '<div class="section">';
            html += '<h2 class="section-title">Informações Tributárias</h2>';
            html += '<table class="info-table">';
            html += '<tr><td>Opção pelo Simples:</td><td>' + (dados.opcao_pelo_simples === true ? 'Sim' : dados.opcao_pelo_simples === false ? 'Não' : exibirValor(null)) + '</td></tr>';
            html += '<tr><td>Data Opção pelo Simples:</td><td>' + formatarData(dados.data_opcao_pelo_simples) + '</td></tr>';
            html += '<tr><td>Data Exclusão do Simples:</td><td>' + formatarData(dados.data_exclusao_do_simples) + '</td></tr>';
            html += '<tr><td>Opção pelo MEI:</td><td>' + (dados.opcao_pelo_mei === true ? 'Sim' : dados.opcao_pelo_mei === false ? 'Não' : exibirValor(null)) + '</td></tr>';
            html += '<tr><td>Data Opção pelo MEI:</td><td>' + formatarData(dados.data_opcao_pelo_mei) + '</td></tr>';
            html += '<tr><td>Data Exclusão do MEI:</td><td>' + formatarData(dados.data_exclusao_do_mei) + '</td></tr>';
            html += '</table></div>';
            
            // Situação Especial - TABELA
            html += '<div class="section">';
            html += '<h2 class="section-title">Situação Especial</h2>';
            html += '<table class="info-table">';
            html += '<tr><td>Situação Especial:</td><td>' + exibirValor(dados.situacao_especial) + '</td></tr>';
            html += '<tr><td>Data Situação Especial:</td><td>' + formatarData(dados.data_situacao_especial) + '</td></tr>';
            html += '</table></div>';
            
            // CNAEs - TABELA + TABELA DE DADOS
            html += '<div class="section">';
            html += '<h2 class="section-title">Atividades Econômicas (CNAE)</h2>';
            html += '<table class="info-table">';
            html += '<tr><td>CNAE Fiscal (Principal):</td><td>' + exibirValor(dados.cnae_fiscal) + '</td></tr>';
            html += '<tr><td>Descrição CNAE Fiscal:</td><td>' + exibirValor(dados.cnae_fiscal_descricao) + '</td></tr>';
            html += '</table>';
            html += '<div class="table-container">';
            html += '<table><thead><tr><th>Código</th><th>Descrição</th><th>Tipo</th></tr></thead><tbody>';
            html += '<tr class="cnae-principal"><td><strong>' + (dados.cnae_fiscal || '<span style="color: #bbb; font-style: italic;">-</span>') + '</strong></td><td><strong>' + (dados.cnae_fiscal_descricao || '<span style="color: #bbb; font-style: italic;">-</span>') + '</strong></td><td><strong>PRINCIPAL</strong></td></tr>';
            
            if (dados.cnaes_secundarios && dados.cnaes_secundarios.length > 0) {
                for (let i = 0; i < dados.cnaes_secundarios.length; i++) {
                    const cnae = dados.cnaes_secundarios[i];
                    html += '<tr><td>' + cnae.codigo + '</td><td>' + cnae.descricao + '</td><td>Secundária</td></tr>';
                }
            } else {
                html += '<tr><td colspan="3" style="text-align: center; color: #bbb; font-style: italic;">Nenhuma atividade secundária cadastrada</td></tr>';
            }
            
            html += '</tbody></table></div></div>';
            
            // QSA
            if (dados.qsa && dados.qsa.length > 0) {
                html += '<div class="section">';
                html += '<h2 class="section-title">Quadro de Sócios e Administradores (' + dados.qsa.length + ')</h2>';
                html += '<div class="table-container">';
                html += '<table><thead><tr><th>Nome</th><th>Qualificação</th><th>CPF/CNPJ</th><th>Faixa Etária</th><th>Data Entrada</th><th>País</th><th>Representante Legal</th><th>Qualif. Rep. Legal</th></tr></thead><tbody>';
                
                for (let i = 0; i < dados.qsa.length; i++) {
                    const socio = dados.qsa[i];

                    html += '<td><a href="#" onclick="' + criarLinkBusca(socio.nome_socio + ' e seu vínculo com ' + dados.razao_social) + '" class="socio-link" title="Pesquisar no Google com IA">' + socio.nome_socio + '</a></td>';

                    html += '<td>' + (socio.qualificacao_socio || '<span style="color: #bbb; font-style: italic;">-</span>') + '</td>';
                    html += '<td>' + (socio.cnpj_cpf_do_socio || '<span style="color: #bbb; font-style: italic;">-</span>') + '</td>';
                    html += '<td>' + formatarFaixaEtaria(socio.faixa_etaria) + '</td>';
                    html += '<td>' + formatarData(socio.data_entrada_sociedade) + '</td>';
                    html += '<td>' + (socio.pais || '<span style="color: #bbb; font-style: italic;">-</span>') + '</td>';
                    html += '<td>' + (socio.nome_representante_legal ? '<a href="#" onclick="' + criarLinkBusca(socio.nome_representante_legal + ' e seu vínculo com ' + dados.razao_social) + '" class="socio-link" title="Pesquisar no Google com IA">' + socio.nome_representante_legal + '</a>' : '<span style="color: #bbb; font-style: italic;">-</span>') + '</td>';
                    html += '<td>' + (socio.qualificacao_representante_legal || '<span style="color: #bbb; font-style: italic;">-</span>') + '</td></tr>';
                }
                
                html += '</tbody></table></div></div>';
            }
            
            // Regime Tributário
            if (dados.regime_tributario && dados.regime_tributario.length > 0) {
                html += '<div class="section">';
                html += '<h2 class="section-title">Histórico de Regime Tributário</h2>';
                html += '<div class="table-container">';
                html += '<table><thead><tr><th>Ano</th><th>Forma de Tributação</th><th>CNPJ da SCP</th><th>Qtd. Escriturações</th></tr></thead><tbody>';
                
                const regimes = dados.regime_tributario.slice().reverse();
                for (let i = 0; i < regimes.length; i++) {
                    const regime = regimes[i];
                    html += '<tr><td><strong>' + regime.ano + '</strong></td>';
                    html += '<td>' + (regime.forma_de_tributacao || '<span style="color: #bbb; font-style: italic;">-</span>') + '</td>';
                    html += '<td>' + (regime.cnpj_da_scp || '<span style="color: #bbb; font-style: italic;">-</span>') + '</td>';
                    html += '<td>' + (regime.quantidade_de_escrituracoes || '<span style="color: #bbb; font-style: italic;">-</span>') + '</td></tr>';
                }
                
                html += '</tbody></table></div></div>';
            }
            
            // BOTÃO DE SALVAR HTML
            //html += '<div style="text-align: center;"><button class="print-button" onclick="var html=document.documentElement.outerHTML;var a=document.createElement(\'a\');a.href=\'data:text/html;charset=utf-8,\'+encodeURIComponent(html);a.download=\'SINARC_' + (dados.razao_social || 'Empresa').replace(/[^a-z0-9]/gi, '_') + '.html\';a.click();">💾 Salvar HTML</button></div>';
            
            // SUBSTITUA a linha 5243 por este código:

            // BOTÕES DE SALVAR HTML
            html += '<div style="text-align: center; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 20px;">';

            // Botão Compartilhar - usando data URI (mais compatível)
            html += '<button class="print-button" onclick="';
            html += 'var nomeArquivo=\'SINARC_' + (dados.razao_social || 'Empresa').replace(/[^a-z0-9]/gi, '_') + '.html\';';
            html += 'var htmlContent=document.documentElement.outerHTML;';
            html += 'var a=document.createElement(\'a\');';
            html += 'a.href=\'data:text/html;charset=utf-8,\'+encodeURIComponent(htmlContent);';
            html += 'a.download=nomeArquivo;';
            html += 'a.click();';
            html += '">💾 Salvar Relatório</button>';




            html += '</div>';
            html += '</div>';
            
            html += '<div class="footer">Relatório gerado pelo SINARC a partir de dados obtidos da Receita Federal do Brasil via API <a href="https://docs.minhareceita.org/" target="_blank" style="color: #2c5f8d; text-decoration: none;">MinhaReceita.org</a><br>';
            html += 'Consulta realizada em ' + new Date().toLocaleString('pt-BR') + '</div>';

            html += '<script>';
            html += '  (function() {';
            html += '    var link = document.createElement("link");';
            html += '    link.rel = "icon";';
            html += '    link.type = "image/x-icon";';
            html += '    link.href = "favicon.ico";';
            html += '    document.head.appendChild(link);';
            html += '  })();';
            html += '<\/script>';

            html += '<\/div><\/body><\/html>';
            
            return html;
        }








        // ############################################
        // ABRE PESQUISA NOS DIÁRIOS OFICIAIS - TECLA D
        // ############################################

        document.addEventListener('keydown', (event) => {

            // ABRE PESQUISA NOS DIÁRIOS OFICIAIS (BUSCA EXATA)
            if (event.key == 'D' && network.getSelectedNodes().length == 1) {

                let sel = network.getSelectedNodes();

                if (sel.length == 1) {

                    // PESSOA FÍSICA
                    if (sel[0].slice(0, 3) == 'PF_') {
                        let parametro = sel[0].slice(15);

                        parametro = parametro.replaceAll('%20', '+');
                        let link_jusbrasil = "https://www.jusbrasil.com.br/busca?q=" + '"' + parametro + '"';
                        window.open(url=link_jusbrasil, target="_blank", windowFeature='left=300,top=200,width=600,height=500');

                        parametro = parametro.replaceAll('+', '%20');
                        let link_portal_transp = "https://portaldatransparencia.gov.br/busca?termo=" + '"' + parametro + '"';
                        window.open(url=link_portal_transp, target="_blank", windowFeature='left=250,top=170,width=600,height=500');

                        parametro = parametro.replaceAll(' ', '%20');
                        let link_querido_diario = "https://queridodiario.ok.org.br/pesquisa?term=" + "%22" + parametro + "%22";
                        window.open(url=link_querido_diario, target="_blank", windowFeature='left=200,top=140,width=600,height=500');
                        
                        parametro = parametro.replaceAll(' ', '%20');
                        let link_dom_es = "https://ioes.dio.es.gov.br/buscanova/#/dom/p=1&q=" + "%22" + parametro + "%22";
                        window.open(url=link_dom_es, target="_blank", windowFeature='left=150,top=110,width=600,height=500');
                        
                        parametro = parametro.replaceAll(' ', '%20');
                        let link_dio_es = "https://ioes.dio.es.gov.br/buscanova/#/p=1&q=" + "%22" + parametro + "%22";
                        window.open(url=link_dio_es, target="_blank", windowFeature='left=100,top=80,width=600,height=500');

                        parametro = parametro.replaceAll('%20', '+');
                        let link_dou = "https://www.in.gov.br/consulta/-/buscar/dou?q=" + "%22" + parametro + "%22&s=todos&exactDate=all&sortType=0";
                        window.open(url=link_dou, target="_blank", windowFeature='left=50,top=50,width=600,height=500');

                    
                    // PESSOA JURÍDICA
                    } else if (sel[0].slice(0, 3) == 'PJ_') {
                        let parametro = nodes.get(sel[0]);
                        parametro = parametro.label
                        
                        parametro = parametro.replaceAll('%20', '+');
                        let link_jusbrasil = "https://www.jusbrasil.com.br/busca?q=" + '"' + parametro + '"';
                        window.open(url=link_jusbrasil, target="_blank", windowFeature='left=300,top=200,width=600,height=500');
                        
                        parametro = parametro.replaceAll(' ', '%20');
                        let link_portal_transp = "https://portaldatransparencia.gov.br/busca?termo=" + '"' + parametro + '"';
                        window.open(url=link_portal_transp, target="_blank", windowFeature='left=250,top=170,width=600,height=500');

                        parametro = parametro.replaceAll(' ', '%20');
                        let link_querido_diario = "https://queridodiario.ok.org.br/pesquisa?term=" + "%22" + parametro + "%22";
                        window.open(url=link_querido_diario, target="_blank", windowFeature='left=200,top=140,width=600,height=500');

                        parametro = parametro.replaceAll(' ', '%20');
                        let link_dom_es = "https://ioes.dio.es.gov.br/buscanova/#/dom/p=1&q=" + "%22" + parametro + "%22";
                        window.open(url=link_dom_es, target="_blank", windowFeature='left=150,top=110,width=600,height=500');
                        
                        parametro = parametro.replaceAll(' ', '%20');
                        let link_dio_es = "https://ioes.dio.es.gov.br/buscanova/#/p=1&q=" + "%22" + parametro + "%22";
                        window.open(url=link_dio_es, target="_blank", windowFeature='left=100,top=80,width=600,height=500');

                        parametro = parametro.replaceAll('%20', '+');
                        let link_dou = "https://www.in.gov.br/consulta/-/buscar/dou?q=" + "%22" + parametro + "%22&s=todos&exactDate=all&sortType=0";
                        window.open(url=link_dou, target="_blank", windowFeature='left=50,top=50,width=600,height=500');

                    }

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Pesquisa nó selecionado no DIO-ES, DOM-ES, DOU, Querido Diário, Portal da Transparência e Jusbrasil`, 3000);
                }

            } else if (event.key == 'D' && network.getSelectedNodes().length != 1) {
                tempAlert(`Tecla ${event.key} - Selecione um nó para pesquisar no DIO-ES, DOM-ES, DOU, Querido Diário, Portal da Transparência e Jusbrasil`, 3000);
            }
        });



        
        // ###############################################
        // DELETA NÓS SELECIONADOS - TECLA DEL / BACKSPACE
        // ###############################################

        
        var del_array = []
        var total_n = nodes.getIds();

        document.addEventListener('keydown', (event) => {
            if (event.key == "Delete" || event.key == "Backspace") {

                let sel = network.getSelectedNodes();

                // INSERIR VERIFICAÇÃO CONDICIONAL AQUI:
                if (sel.length > 0) {
                    network.deleteSelected(sel);

                    del_array = del_array.concat(sel);

                    // LIMPA n_bag REMOVENDO NÓS DELETADOS (CORRIGE PROBLEMA COM FIT APÓS ESPAÇO)
                    n_bag = n_bag.filter(x => !sel.includes(x));

                    let percentual = (del_array.length / total_n.length) * 100;
                    percentual = percentual.toFixed(1);

                    // INCLUIR AVISO PERMANENTE QUE NÓS FORAM DELETADOS
                    let el = document.createElement("div");

                    //el.setAttribute("style","position:absolute;top:70px;right:21px;border:5px solid rgba(255, 255, 123, 1);border-radius: 5px;background-color:rgba(255, 255, 123, 1);");
                    el.setAttribute("style","position:absolute;bottom:6px;right:19px;border:1px solid rgba(255, 255, 123, 1);border-radius: 1px;font-size: 10px;padding: 1;background-color:rgba(255, 255, 123, 1);");
                    
                    el.innerHTML = `Nós deletados (${del_array.length}/${total_n.length}) ${percentual}%`;
                    document.body.appendChild(el);

                    // INCLUÍDO PARA EVITAR ERRO APÓS DELETAR NÓS E RETIRAR O MOUSE DE CIMA DE NÓS ADJACENTES AOS QUE FORAM DELETADOS
                    network.unselectAll();

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Deleta nós selecionados (${sel.length})`, 3000);
                
                } else {
                    tempAlert(`Tecla ${event.key} - Selecione os nós que deseja deletar`, 3000);

                }

            }
        });
        






        














        // ###############################################
        // OCULTA E EXIBE LABELS DE TODOS OS NÓS - TECLA e
        // ###############################################

        var toggle_no = false
        var toggle_no_2 = false
        var toggle_no_3 = false
        var tecla_e_ativada = false
        document.addEventListener('keydown', (event) => {
            if (event.key == 'e') {

                // 0 0 0
                if (toggle_no_3 == false && toggle_no_2 == false && toggle_no == false) {
                    tecla_e_ativada = true
                    network.setOptions({
                        nodes: {
                            scaling: {
                                label: {
                                    enabled: true,
                                    min: 15,
                                    max: 15,
                                    drawThreshold: 100
                                }
                            },
                            physics: true
                        }
                    });
                    //network.stabilize();
                    //network.redraw();
                    toggle_no_3 = false
                    toggle_no_2 = false
                    toggle_no = true

                    setTimeout(() => {
                        network.redraw();
                    }, 100);

                    
                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Oculta rótulos dos nós`, 3000);

                // 0 0 1
                } else if (toggle_no_3 == false && toggle_no_2 == false && toggle_no == true) {
                    tecla_e_ativada = true
                    network.setOptions({
                        nodes: {
                            scaling: {
                                min: 30,
                                max: 30,
                                label: {
                                    enabled: true,
                                    min: 15,
                                    max: 15,
                                    drawThreshold: 8
                                }
                            },
                            physics: true
                        }
                    });
                    //network.stabilize();
                    //network.redraw();
                    toggle_no_3 = false
                    toggle_no_2 = true
                    toggle_no = false

                    setTimeout(() => {
                        network.redraw();
                    }, 100);

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Uniformiza tamanho dos nós`, 3000);
                    

                // 0 1 0
                } else if (toggle_no_3 == false && toggle_no_2 == true && toggle_no == false) {
                    tecla_e_ativada = true
                    network.setOptions({
                        nodes: {
                            scaling: {
                                min: 30,
                                max: 30,
                                label: {
                                    enabled: true,
                                    min: 15,
                                    max: 15,
                                    drawThreshold: 100
                                }
                            },
                            physics: true
                        }
                    });
                    //network.stabilize();
                    //network.redraw();
                    toggle_no_3 = false
                    toggle_no_2 = true
                    toggle_no = true

                    setTimeout(() => {
                        network.redraw();
                    }, 100);

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Oculta rótulos dos nós`, 3000);

                // 0 1 1
                } else if (toggle_no_3 == false && toggle_no_2 == true && toggle_no == true) {
                    tecla_e_ativada = true
                    network.setOptions({
                        nodes: {
                            scaling: {
                                min: 50,
                                max: 50,
                                label: {
                                    enabled: true,
                                    min: 15,
                                    max: 15,
                                    drawThreshold: 100
                                }
                            },
                            physics: true
                        }
                    });
                    //network.stabilize();
                    toggle_no_3 = true
                    toggle_no_2 = false
                    toggle_no = false

                    setTimeout(() => {
                        network.redraw();
                    }, 100);

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Aumenta tamanho dos nós`, 3000);

                // 1 0 0
                } else if (toggle_no_3 == true && toggle_no_2 == false && toggle_no == false) {
                    tecla_e_ativada = true
                    network.setOptions({
                        nodes: {
                            scaling: {
                                min: 70,
                                max: 70,
                                label: {
                                    enabled: true,
                                    min: 15,
                                    max: 15,
                                    drawThreshold: 100
                                }
                            },
                            physics: true
                        }
                    });
                    //network.stabilize();
                    toggle_no_3 = true
                    toggle_no_2 = false
                    toggle_no = true

                    setTimeout(() => {
                        network.redraw();
                    }, 100);

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Aumenta tamanho dos nós`, 3000);

                // 1 0 1
                } else if (toggle_no_3 == true && toggle_no_2 == false && toggle_no == true) {
                    tecla_e_ativada = true
                    network.setOptions({
                        nodes: {
                            scaling: {
                                min: 90,
                                max: 90,
                                label: {
                                    enabled: true,
                                    min: 15,
                                    max: 15,
                                    drawThreshold: 100
                                }
                            },
                            physics: true
                        }
                    });
                    //network.stabilize();
                    toggle_no_3 = true
                    toggle_no_2 = true
                    toggle_no = false

                    setTimeout(() => {
                        network.redraw();
                    }, 100);

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Aumenta tamanho dos nós`, 3000);

                // 1 1 0
                } else if (toggle_no == false && toggle_no_2 == true && toggle_no_3 == true) {
                    tecla_e_ativada = false
                    network.setOptions({
                        nodes: {
                            scaling: {
                                min: 20,
                                max: 100,
                                label: {
                                    enabled: true,
                                    min: 15,
                                    max: 40,
                                    drawThreshold: 8
                                }
                            },
                            physics: true
                        }
                    });
                    //network.stabilize();
                    //network.body.view.scale = 0.8
                    toggle_no_3 = false
                    toggle_no_2 = false
                    toggle_no = false

                    setTimeout(() => {
                        network.redraw();
                    }, 100);

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Retorna ao tamanho inicial dos nós`, 3000);
                }
            }
        });



        // ##############################
        // CENTRALIZA O GRAFO - TECLA ESC
        // ##############################

        document.addEventListener('keydown', (event) => {

            if (event.key == "Escape") {
                // network.fit();

                // DEPOIS - para física, estabiliza, ajusta com animação, reinicia física
                network.stopSimulation();

                setTimeout(() => {

                    network.fit({
                        animation: {
                            duration: 500,
                            easingFunction: 'easeInOutQuad'
                        }
                    });

                    // Move para o centro (0,0) mantendo o zoom atual
                    // network.moveTo({
                    //     position: {x: 0, y: 0},
                    //     animation: {
                    //        duration: 500,
                    //         easingFunction: 'easeInOutQuad'
                    //     }
                    // });

                    setTimeout(() => {
                        network.startSimulation();
                    }, 600);
                }, 100);

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} / Duplo Clique - Enquadra todos os nós`, 3000);
            }
        });



        // ###############################################
        // CONGELA E DESCONGELA NÓS SELECIONADOS - TECLA f
        // ###############################################

        // https://www.toptal.com/developers/keycode

        var fixos = [];
        document.addEventListener('keydown', (event) => {

            // Alterna congelamento dos nós selecionados
            if (event.key == "f" && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length > 0) {

                sel_f = network.getSelectedNodes();
                
                if (sel_f.length > 0) {

                    for (let i=0; i<sel_f.length; i++) {

                        // Se o nó selecionado não estiver em fixos, congela e inclui em fixos
                        if (network.body.nodes[sel_f[i]].options.font.background != 'yellow') {
                            nodes.update({id: sel_f[i], physics: false});
                            nodes.update({id: sel_f[i], font: {strokeColor: "transparent"}});
                            nodes.update({id: sel_f[i], font: {background: "yellow"}});
                            fixos.push(sel_f[i]);

                            // Exibe informações na tela
                            tempAlert(`Tecla ${event.key} - Fixa nós selecionados na área do grafo`, 3000);
                        }

                        // Se estiver, exclui de fixos e descongela
                        else if (network.body.nodes[sel_f[i]].options.font.background == 'yellow') {
                            nodes.update({id: sel_f[i], physics: true});
                            nodes.update({id: sel_f[i], font: {strokeColor: "#ffffff"}});
                            nodes.update({id: sel_f[i], font: {background: "transparent"}});
                            fixos.slice(sel_f[i], 1);

                            // Exibe informações na tela
                            tempAlert(`Tecla ${event.key} - Desafixa nós selecionados na área do grafo`, 3000);
                        }
                    }
                }

            } else if (event.key == "f" && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length == 0) {
                tempAlert(`Tecla ${event.key} - Selecione um ou mais nós para fixá-los na área do grafo`, 3000);
            }
        });



        // #####################################################################
        // AJUSTA ALTURA DA JANELA DE VISUALIZAÇÃO AO PRESSIONAR F11 - TECLA F11
        // #####################################################################

        // Só funciona na primeira vez que se aperta F11. No retorno, deve-se apertar tecla b

        document.addEventListener('keydown', (event) => {

            if (event.key == 'F11') {

                function f11() {
                    // EXTRAI DIMENSÕES DA JANELA DO NAVEGADOR
                    //let w = window.innerWidth;
                    let h = window.innerHeight;
                    
                    // AJUSTA ALTURA DA ÁREA DO GRAFO À ALTURA DA JANELA
                    document.querySelector('#mynetwork').style.height = h - 20;
                }
                setTimeout(f11, 200);

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Ativa/desativa modo tela cheia`, 3000);

            } 
        });



        // ##########################################
        // REALIZA PESQUISA GERAL NO GOOGLE - TECLA g
        // ##########################################

        document.addEventListener('keydown', (event) => {
            if (event.key == 'g' && network.getSelectedNodes().length == 1) {
                let sel = network.getSelectedNodes();
                for (let i=0; i<sel.length; i++) {
                    if (sel.length > 0) {
                        for (let i=0; i<sel.length; i++) {

                            if (sel[i].slice(0, 3) == 'PF_') {
                                let parametro = sel[i].slice(15);
                                parametro = parametro.replaceAll(' ', '+');
                                //console.log('parametro1:', parametro);
                                let link = "https://www.google.com/search?q=" + parametro + "&udm=50";
                                //console.log(link);
                                window.open(link, 'popup','left=50,top=100,width=600,height=600');

                            } else if (sel[i].slice(0, 3) == 'PJ_') {
                                let parametro = nodes.get(sel[i]);
                                parametro = parametro.label
                                parametro = parametro.replaceAll(' ', '+');
                                //console.log('parametro2:', parametro);
                                let link = "https://www.google.com/search?q=" + parametro + "&udm=50";
                                //console.log(link);
                                window.open(link, 'popup','left=50,top=100,width=600,height=600');
                            
                            } else if (sel[i].slice(0, 3) == 'PE_') {
                                let parametro = nodes.get(sel[i]);
                                parametro = parametro.id.slice(3)
                                parametro = parametro.replaceAll(' ', '+');
                                //console.log('parametro2:', parametro);
                                let link = "https://www.google.com/search?q=" + parametro + "&udm=50";
                                //console.log(link);
                                window.open(link, 'popup','left=50,top=100,width=600,height=600');

                            // PARA CONSULTA DE ENDEREÇO
                            } else if (sel[i].slice(0, 3) == "EN_") {
                                let endereco = sel[i].slice(3).replace();
                                endereco = endereco.replaceAll(' ', '+');
                                var link = "https://maps.google.com/search?q=" + endereco;
                                window.open(link, 'popup','left=50,top=100,width=600,height=600');

                            // PARA CONSULTA DE E-MAIL
                            } else if (sel[i].slice(0, 3) == "EM_") {
                                let email = sel[i].slice(3).replace();
                                email = email.replaceAll(' ', '+').replace('@', '%40');
                                var link = "https://maps.google.com/search?q=" + email;
                                window.open(link, 'popup','left=50,top=100,width=600,height=600');
                            }

                            // Exibe informações na tela
                            tempAlert(`Tecla ${event.key} - Pesquisa nó selecionado no Google (exceto TE)`, 3000);

                        }  
                    }
                }

            } else if (event.key == 'g' && network.getSelectedNodes().length != 1) {
                tempAlert(`Tecla ${event.key} - Selecione um nó para pesquisar no Google (exceto TE)`, 3000);
            }
        });



        // #############################################
        // REALIZA PESQUISA AVANÇADA NO GOOGLE - TECLA G
        // #############################################

        document.addEventListener('keydown', (event) => {
            if (event.key == 'G' && network.getSelectedNodes().length == 1) {
                let sel = network.getSelectedNodes();
                for (let i=0; i<sel.length; i++) {
                    if (sel.length > 0) {
                        for (let i=0; i<sel.length; i++) {

                            // PESSOA FÍSICA
                            if (sel[i].slice(0, 3) == 'PF_') {
                                let parametro = sel[i].slice(15);
                                parametro = parametro.replaceAll(' ', '+');
                                
                                let link_es_gov = "https://www.google.com/search?q=" + "site%3Aes.gov.br+" + '"' + parametro + '"';
                                window.open(url=link_es_gov, target="_blank", windowFeature='left=250,top=200,width=600,height=500');
                                
                                let link_gov = "https://www.google.com/search?q=" + "site%3Agov.br+" + '"' + parametro + '"';
                                window.open(url=link_gov, target="_blank", windowFeature='left=200,top=170,width=600,height=500');

                                let link_jus = "https://www.google.com/search?q=" + "site%3Ajus.br+" + '"' + parametro + '"';
                                window.open(url=link_jus, target="_blank", windowFeature='left=150,top=110,width=600,height=500');

                                let link_mp = "https://www.google.com/search?q=" + "site%3Amp.br+" + '"' + parametro + '"';
                                window.open(url=link_mp, target="_blank", windowFeature='left=100,top=80,width=600,height=500');

                                let link_tc = "https://www.google.com/search?q=" + "site%3Atc.br+" + '"' + parametro + '"';
                                window.open(url=link_tc, target="_blank", windowFeature='left=50,top=50,width=600,height=500');

                            
                            // PESSOA JURÍDICA
                            } else if (sel[i].slice(0, 3) == 'PJ_') {
                                let parametro = nodes.get(sel[i]);
                                parametro = parametro.label
                                parametro = parametro.replaceAll(' ', '+');
                                
                                let link_es_gov = "https://www.google.com/search?q=" + "site%3Aes.gov.br+" + parametro;
                                window.open(url=link_es_gov, target="_blank", windowFeature='left=250,top=170,width=600,height=500');

                                let link_gov = "https://www.google.com/search?q=" + "site%3Agov.br+" + parametro;
                                window.open(url=link_gov, target="_blank", windowFeature='left=200,top=140,width=600,height=500');
                                
                                let link_jus = "https://www.google.com/search?q=" + "site%3Ajus.br+" + parametro;
                                window.open(url=link_jus, target="_blank", windowFeature='left=150,top=110,width=600,height=500');

                                let link_mp = "https://www.google.com/search?q=" + "site%3Amp.br+" + parametro;
                                window.open(url=link_mp, target="_blank", windowFeature='left=100,top=80,width=600,height=500');

                                let link_tc = "https://www.google.com/search?q=" + "site%3Atc.br+" + parametro;
                                window.open(url=link_tc, target="_blank", windowFeature='left=50,top=50,width=600,height=500');

                            }

                            // Exibe informações na tela
                            tempAlert(`Tecla ${event.key} - Pesquisa nó selecionado (apenas PF e PJ) no Google nos domínios TC.br, MP.br, JUS.br, GOV.br e ES.GOV.br`, 3000);
                        }
                    }
                }

            } else if (event.key == 'G' && network.getSelectedNodes().length != 1) {
                tempAlert(`Tecla ${event.key} - Selecione um nó (apenas PF e PJ) para pesquisar no Google nos domínios TC.br, MP.br, JUS.br, GOV.br e ES.GOV.br`, 3000);
            }
        });



        // #####################################################
        // ABRE ARQUIVO HTML CONTENDO MANUAL DO SINARC - TECLA h
        // #####################################################

        document.addEventListener('keydown', (event) => {
            if (event.key == 'h') {

                // O nome 'popup_help' faz com que essa janela seja exclusiva, não sendo usada por outros popups do programa.
                window.open('help.html', 'popup_help','left=50,top=100,width=600,height=600');

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Abre manual do SINARC`, 3000);
            }
        });



        // ########################################
        // ALTERNA ENTRE NÓS SELECIONADOS - TECLA i
        // ########################################

        var counter = 0 // Deve iniciar com valor zero para funcionar
        document.addEventListener('keydown', (event) => {
            if (event.key == "i" && network.getSelectedNodes().length > 0) {
                
                let s = network.getSelectedNodes();
                console.log('s:', s);
                console.log('counter antes:', counter);
                
                //console.log('counter:', counter);
                console.log('s:', s[counter]);
                //network.fit({nodes: network.getConnectedNodes(s[counter]), maxZoomLevel: 0.7, minZoomLevel: 0.7});


                //if (s.length > 0 ) {
                //    network.setOptions({physics: {enabled: false}});
                //    let p = '';
                //    let num = 0;
                //    num = 700 + nodes.length / 10;
                //    console.log(num + 'ms');
                //    for (let i=0; i<s.length; i++) {
                //        esconde();
                //        p = network.getPosition(s[i]);
                //        network.moveTo({
                //            position: {x: p['x'], y: p['y']},
                //            scale: 1,
                //            offset: {x:0, y:0},
                //            animation: {
                //                duration: 500,
                //                easingFunction: 'linear'
                //            }
                //       });
                //        setTimeout(exibe, num);
                //        network.releaseNode();
                //    }
                //    network.setOptions({physics: {enabled: true}});

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Centraliza e alterna entre nós selecionados (${counter + 1}/${s.length})`, 3000);

                network.fit({nodes: [s[counter]], maxZoomLevel: 1, minZoomLevel: 1});
                if (counter == s.length - 1) {
                    counter = 0;
                } else if (counter < s.length) {
                    counter = counter + 1;
                }

                console.log('counter depois:', counter);

            } else if (event.key == "i" && network.getSelectedNodes().length == 0) {
                tempAlert(`Tecla ${event.key} - Selecione pelo menos um nó para centralizá-los na tela de forma alternada`, 3000);
            }
        });



        // ################################
        // ALTERNA SELEÇÃO DE NÓS - TECLA I
        // ################################

        var se_1 = [];
        var se_2 = [];
        var toggle_I = true

        document.addEventListener('keydown', (event) => {

            
            if (event.key == "I" && network.getSelectedNodes().length > 0 && toggle_I == true) {

                // EXTRAI NÓS SELECIONADOS
                se_1 = network.getSelectedNodes();

                // EXTRAI NÓS NÃO SELECIONADOS
                se_2 = nodes.getIds().filter(x => !se_1.includes(x));

                // SELECIONA NÓS QUE NÃO ESTAVAM SELECIONADOS
                network.selectNodes(se_2);

                // COR CINZA PARA OS RÓTULOS DOS NÓS SELECIONADOS
                for (let i=0; i<se_1.length; i++) {
                    nodes.update({id: se_1[i], font: {color: '#777777'}});
                }

                network.redraw();

                toggle_I = false

                tempAlert(`Tecla ${event.key} - Inverte seleção de nós (${se_2.length}/${nodes.getIds().length})`, 3000);

                
            } else if (event.key == "I" && network.getSelectedNodes().length > 0  && toggle_I == false) {
                
                network.unselectAll();

                // SELECIONA NÓS QUE NÃO ESTAVAM SELECIONADOS
                network.selectNodes(se_1);
                network.redraw();

                toggle_I = true

                tempAlert(`Tecla ${event.key} - Inverte seleção de nós (${se_1.length}/${nodes.getIds().length})`, 3000);

            } else if (event.key == "I" && network.getSelectedNodes().length == 0) {
                tempAlert(`Tecla ${event.key} - Selecione pelo menos um nó para inverter a seleção`, 3000);
            }

            // RETORNA COR CINZA PARA OS RÓTULOS DOS NÓS SELECIONADOS
            //for (let i=0; i<no_sel_pv.length; i++) {
            //    nodes.update({id: no_sel_pv[i], font: {color: '#777777'}});
            //}

        });



        // ###################################################
        // SELECIONA NÓS COMUNS AOS NÓS SELECIONADOS - TECLA j
        // ###################################################

        document.addEventListener('keydown', (event) => {
            if (event.key == "j" && network.getSelectedNodes().length >= 2) {
                let sel = network.getSelectedNodes();
                if (sel.length >= 2) {
                    let caixa = [];
                    for (let i=0; i<sel.length; i++) {
                        let temp = network.getConnectedNodes(sel[i]);
                        for (let k=0; k<temp.length; k++) {
                            caixa.push(temp[k]);
                        }    
                    }
                    let counts = {};
                    for (const num of caixa) {
                    counts[num] = counts[num] ? counts[num] + 1 : 1;
                    }
                    let comum = [];
                    for (const v in counts) {
                        if (counts[v] == sel.length) {
                            if (!(v in comum)) {
                                comum.push(v);
                            }
                        }
                    }
                    //console.log(comum);
                    network.unselectAll();
                    network.selectNodes(comum);

                    //network.fit({nodes: comum});

                    for (let i=0; i<sel.length; i++) {
                        nodes.update({id: sel[i], font: {color: '#777777'}});
                    }

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Seleciona nós adjacentes comuns (${comum.length})`, 3000);

                }

            } else if (event.key == "j" && network.getSelectedNodes().length < 2) {
                tempAlert(`Tecla ${event.key} - Selecione pelo menos dois nós`, 3000);
            }
        });



        // ###############################################################n
        // SELECIONA NÓS QUE NÃO SÃO COMUNS AOS NÓS SELECIONADOS - TECLA J
        // ###############################################################

        document.addEventListener('keydown', (event) => {
            if (event.key == "J" && network.getSelectedNodes().length >= 2) {

                let sel = network.getSelectedNodes();
                //console.log('sel:', sel)

                if (sel.length >= 2) {

                    let caixa = [];
                    for (let i=0; i<sel.length; i++) {
                        let temp = network.getConnectedNodes(sel[i]);
                        for (let k=0; k<temp.length; k++) {
                            caixa.push(temp[k]);
                        }    
                    }
                    let counts = {};
                    for (const num of caixa) {
                        counts[num] = counts[num] ? counts[num] + 1 : 1;
                    }
                    //console.log(counts);
                    
                    let comum = [];
                    for (const v in counts) {
                        if (counts[v] == sel.length) {
                            if (!(v in comum)) {
                                comum.push(v);
                            }
                        }
                    }
                    //console.log(comum);

                    let diff = caixa
                        .filter(x => !comum.includes(x))
                        .concat(comum.filter(x => !caixa.includes(x)));


                    let diff2 = diff.filter(x => !sel.includes(x));
                    console.log('diff2:', diff2);

                    //network.fit({nodes: diff2});


                    //diff = [...new Set(diff)];
                    //console.log('diff:', diff);
                    
                    network.unselectAll();
                    network.selectNodes(diff2);

                    //for (let j=0; j<sel.length; j++) {
                    //    network.body.nodes[sel[j]].selected = false;
                    //    network.redraw();
                    //}

                    for (let i=0; i<sel.length; i++) {
                        nodes.update({id: sel[i], font: {color: '#777777'}});
                    }

                    // Exibe informações na tela
                    //let n = nodes.getIds().length - comum.length - sel.length
                    
                    //tempAlert(`Tecla ${event.key} - Seleciona nós adjacentes que não são comuns (${diff2.length})`, 3000);
                    tempAlert(`Tecla ${event.key} - Seleciona nós adjacentes que não são comuns (${network.getSelectedNodes().length})`, 3000);

                }

            } else if (event.key == "J" && network.getSelectedNodes().length < 2) {
                tempAlert(`Tecla ${event.key} - Selecione pelo menos dois nós`, 3000);
            }
        });
        


        // ###############################
        // ALTERNA ENTRE LAYOUTS - TECLA k
        // ###############################

        var toggle_hieraquic = false
        var toggle_hieraquic_2 = false
        var toggle_hieraquic_3 = false

        document.addEventListener('keydown', (event) => {
            
            if (event.key == 'k') {

                if (network.physics.adaptiveTimestepEnabled == false) {
                    network.setOptions({"nodes": {"physics": true}})
                }

                

                // GRAFO NA HORIZONTAL (LEFT TO RIGHT)
                // 0 0 0
                if (toggle_hieraquic_3 == false && toggle_hieraquic_2 == false && toggle_hieraquic == false) {
                    network.setOptions({
                        layout: {
                            hierarchical: {
                                enabled: true,
                                levelSeparation: 500,
                                nodeSpacing: 100,
                                direction: "LR",
                                sortMethod: "directed",
                                shakeTowards: "leaves"
                                
                            }
                        },

                        
                        physics: {
                            hierarchicalRepulsion: {
                                centralGravity: 0
                            },
                            minVelocity: 0.75,
                            solver: "hierarchicalRepulsion"
                        }
                        

                    });

                    setTimeout(() => {
                        document.dispatchEvent(new KeyboardEvent('keydown', {key: 'Escape'}));
                    }, 1000);
                    
                    toggle_hieraquic_3 = false
                    toggle_hieraquic_2 = false
                    toggle_hieraquic = true

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Layout hierárquico a partir das folhas (destino das setas)`, 3000);

                    

                // 0 0 1
                } else if (toggle_hieraquic_3 == false && toggle_hieraquic_2 == false && toggle_hieraquic == true) {
                    network.setOptions({
                        layout: {
                            hierarchical: {
                            enabled: true,
                            levelSeparation: 500,
                            nodeSpacing: 100,
                            direction: "LR",
                            sortMethod: "directed",
                            shakeTowards: "roots"
                            }
                        },
                        physics: {
                            hierarchicalRepulsion: {
                            centralGravity: 0
                            },
                            minVelocity: 0.75,
                            solver: "hierarchicalRepulsion",
                        }
                    });

                    setTimeout(() => {
                        document.dispatchEvent(new KeyboardEvent('keydown', {key: 'Escape'}));
                    }, 1000);
                    
                    network.setOptions({nodes: {physics: false}});
                    network.setOptions({nodes: {physics: true}});

                    toggle_hieraquic_3 = false
                    toggle_hieraquic_2 = true
                    toggle_hieraquic = false

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Layout hierárquico a partir das raízes (origem das setas)`, 3000);



                // 0 1 0
                } else if (toggle_hieraquic_3 == false && toggle_hieraquic_2 == true && toggle_hieraquic == false) {
                    network.setOptions({
                        layout: {
                            hierarchical: {
                            enabled: false,
                            direction: "LR",
                            sortMethod: "directed",
                            shakeTowards: "leaves"
                            }
                        }
                    });
                    
                    network.setOptions({
                        edges: {
                            smooth: false
                        }
                    });
                    
                    network.setOptions({
                        physics: {
                            solver: 'barnesHut',
                            barnesHut: {
                            gravitationalConstant: -10000,
                            springLength: 200
                            },
                            minVelocity: 0.75
                        }
                    });

                    setTimeout(() => {
                        document.dispatchEvent(new KeyboardEvent('keydown', {key: 'Escape'}));
                    }, 1000);

                    network.redraw();
    
                    toggle_hieraquic_3 = false
                    toggle_hieraquic_2 = false
                    toggle_hieraquic = false

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Layout gravitacional`, 3000);
                }
            }
        });




        // #####################################
        // EXIBE NOVOS LAYOUTS CRIADOS - TECLA K
        // #####################################

        // Criado com o auxílio do Chat GPT: criar código em Python que posicione n pontos de forma equidistante sobre uma circunferência no plano cartesiano
        // Validação realizada no site para plotagem de pontos no plano cartesiano: https://www.desmos.com/calculator?lang=pt-BR
        // O Critério adotado para ordenar os nós sobre a circunferência foi o número de conexões.
        
        var toggle_K = 0;

        document.addEventListener('keydown', (event) => {

            if (event.key == 'K' && toggle_K == 0) {

                network.physics.physicsEnabled = true;
                network.physics.startSimulation()
                
                let nos2 = nodes.getIds();
                
                // CALCULA PONTOS NA CIRCUNFERÊNCIA
                let n2 = nos2.length;

                // O multiplicador do raio (20) controla a separação entre os nós sobre a circunferência
                function pontosCircunferencia(n, R=n2 * 20) {
                    
                    let d = 2 * R * Math.sin(Math.PI / n2);
                    let pontos = [];
                    
                    for (let i = 0; i < n2; i++) {
                        let angulo = 2 * Math.PI * i / n2 - Math.PI / 2;
                        let x = R * Math.cos(angulo);
                        let y = R * Math.sin(angulo);
                        let ponto = [x, y];
                        pontos.push(ponto);
                    }
                    
                    let pontosDistancia = [];
                    
                    for (let i = 0; i < n2; i++) {
                        let pontoAtual = pontos[i];
                        let pontoAnterior = pontos[(i - 1 + n2) % n2];
                        let pontoProximo = pontos[(i + 1) % n2];
                        let distanciaAnterior = Math.sqrt(Math.pow((pontoAtual[0] - pontoAnterior[0]), 2) + Math.pow((pontoAtual[1] - pontoAnterior[1]), 2));
                        let distanciaProxima = Math.sqrt(Math.pow((pontoAtual[0] - pontoProximo[0]), 2) + Math.pow((pontoAtual[1] - pontoProximo[1]), 2));
                        if (Math.abs(distanciaAnterior - d) < 1e-9 && Math.abs(distanciaProxima - d) < 1e-9) {
                            pontosDistancia.push(pontoAtual);
                        }
                    }
                    
                    return pontosDistancia;
                }
                
                let pontos = pontosCircunferencia(n2);


                // Create a new array from the list of nodes
                const nodeArray = nodes.get({
                    fields: ['id']
                });
                
                // Sort the array of nodes based on their degree
                nodeArray.sort((a, b) => {
                const degreeA = edges.get({
                    filter: edge => edge.from === a.id || edge.to === a.id
                }).length;
                const degreeB = edges.get({
                    filter: edge => edge.from === b.id || edge.to === b.id
                }).length;
                return degreeB - degreeA;
                });

                
                // Extrai ids dos nós
                nos3 = [];
                for (let i=0; i<nodeArray.length; i++) {
                    nos3.push(nodeArray[i].id);
                }
                
                
                // ARREDONDA TUPLAS PARA DUAS CASAS DECIMAIS
                function arredondaTuplas(array) {
                let novoArray = [];
                for (let i = 0; i < array.length; i++) {
                    let tupla = [];
                    for (let j = 0; j < array[i].length; j++) {
                    tupla.push(parseFloat(array[i][j].toFixed(2)));
                    }
                    novoArray.push(tupla);
                }
                return novoArray;
                }
                
                lista = arredondaTuplas(pontos);
                
                
                // ALTERA A POSIÇÃO DOS NÓS
                for (let i=0; i<nos3.length; i++) { 
                network.body.nodes[nos3[i]].x = lista[i][0];
                network.body.nodes[nos3[i]].y = lista[i][1];
                }
                
                network.physics.physicsEnabled = false;
                network.physics.stopSimulation();
                
                network.redraw();

                network.fit();

                toggle_K = 1;

                tempAlert(`Tecla ${event.key} - Layout circular`, 3000);
            
            } else if (event.key == 'K' && toggle_K == 1) {

                network.physics.physicsEnabled = true;
                network.physics.startSimulation()

                toggle_K = 0;

                tempAlert(`Tecla ${event.key} - Layout gravitacional`, 3000);
                
            }
        });



        // ###################################
        // OCULTA LABELS DAS ARESTAS - TECLA l
        // ###################################

        var toggle_label = false
        var toggle_label_2 = false
        document.addEventListener('keydown', (event) => {
            if (event.key == 'l') {

                if (toggle_label == false && toggle_label_2 == false) {
                    network.setOptions({'edges': {'font': {'size': 0}}});
                    //console.log('Oculta texto das arestas')
                    //toggle_label = !toggle_label
                    toggle_label = true

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Oculta rótulos das arestas`, 3000);


                } else if (toggle_label == true && toggle_label_2 == false) {
                    network.setOptions({"edges": {"hidden": true}});
                    //console.log('Oculta arestas')
                    //toggle_label_2 = !toggle_label_2
                    toggle_label_2 = true

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Oculta arestas`, 3000);


                } else if (toggle_label == true && toggle_label_2 == true) {
                    //console.log('Reexibe arestas e textos')
                    network.setOptions({'edges': {'font': {'size': 15}}});
                    network.setOptions({"edges": {"hidden": false}});
                    toggle_label = false
                    toggle_label_2 = false

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Reexibe arestas e rótulos`, 3000);

                } 
            }
        });



        // ########################################
        // EXIBE DISTRIBUIÇÃO DAS ARESTAS - TECLA L
        // ########################################

        document.addEventListener('keydown', (event) => {
            
            if (event.key == 'L') {

                let ta = edges.getIds();
                let aa = [];
                for (let i=0; i<ta.length; i++) {
                    let temp = network.body.edges[ta[i]].title;
                    aa.push(temp);
                }
                
                
                const counts = {};
                for (const num of aa) {
                counts[num] = counts[num] ? counts[num] + 1 : 1;
                }
                
                
                let tex = `DISTRIBUIÇÃO DAS ARESTAS POR TIPO (${ta.length}):\n`;
                Object.keys(counts)
                    .sort()
                    .forEach(function(v, i) {
                        tex = tex + v + ': ' + counts[v] + '\n'
                    });
                
                alert(tex);

                tempAlert(`Tecla ${event.key} - Exibe distribuição das aresta por tipo (${ta.length})`, 3000);
            }
        });



        // ######################################################
        // AUMENTA MASSA DE TODOS OS NÓS EM 0.5 UNIDADE - TECLA m
        // ######################################################

        var massa = 1

        document.addEventListener('keydown', (event) => {

            if (event.key == 'm' && network.physics.options.solver == 'barnesHut') {

                if (network.physics.adaptiveTimestepEnabled == false) {
                    network.setOptions({"nodes": {"physics": true}})
                } 

                // AUMENTA MASSA EM 0.5               
                massa = massa + 0.5
                
                // AJUSTA A MASSA DE TODOS OS NÓS, EXCETO OS QUE JÁ TIVERAM AS MASSAS AJUSTADAS PELAS TECLAS n E N
                network.setOptions({
                    nodes: {
                        mass: massa
                    }
                });

                //network.selectNodes(nodes.getIds());

                network.redraw();

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Aumenta massa dos nós em 0.5 unidade (geral). Fator: ${massa}`, 3000);
            }

        });



        // ######################################################
        // DIMINUI MASSA DE TODOS OS NÓS EM 0.5 UNIDADE - TECLA M
        // ######################################################

        // Variável 'massa' foi declarada na tecla anterior

        document.addEventListener('keydown', (event) => {

            if (event.key == 'M' && network.physics.options.solver == 'barnesHut') {

                if (network.physics.adaptiveTimestepEnabled == false) {
                    network.setOptions({"nodes": {"physics": true}})
                }

                massa = massa - 0.5

                if (massa <= 1) {
                    massa = 1
                }

                // AJUSTA A MASSA DE TODOS OS NÓS, EXCETO OS QUE JÁ TIVERAM AS MASSAS AJUSTADAS PELAS TECLAS n E N
                network.setOptions({
                    nodes: {
                        mass: massa
                    }
                });

                network.redraw();

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Reduz massa dos nós em 0.5 unidade (geral). Fator: ${massa}`, 3000);
            }
        });



        // #######################################################
        // AUMENTA MASSA DOS NÓS COM TAMANHO ACIMA DE 40 - TECLA n
        // #######################################################

        // A partir do momento em que se altera as massas dos nós com as teclas n e N, as teclas m e M passam a não mais atuar sobre esse nós.
        // Enquanto as teclas n e N não forem acionadas, as teclas m e M atuam sobre todos os nós.

        var par_n = 1

        document.addEventListener('keydown', (event) => {

            if (event.key == 'n' && network.physics.options.solver == 'barnesHut') {

                if (network.physics.adaptiveTimestepEnabled == false) {
                    network.setOptions({"nodes": {"physics": true}})
                }
                
                let nod = nodes.getIds();

                let sel_e = []

                for (let i=0; i<nod.length; i++) {

                    let size = network.body.nodes[nod[i]].options.size

                    if (size >= t_ref) {
                        sel_e.push(nod[i])
                    }

                    if (size >= t_ref) {

                        // AUMENTA EM 5
                        nodes.update({
                            id: nod[i],
                            mass: par_n + 5
                        });
                    }
                }

                network.selectNodes(sel_e);

                // AUMENTA EM 5
                par_n = par_n + 5

                network.redraw();

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Aumenta massa dos nós com tamanho >= ${t_ref} em 5 unidades. Fator: ${par_n} (${network.getSelectedNodes().length})`, 3000);

            }
        })



        // ##########################################################
        // REDUZ A MASSA DOS NÓS COM TAMANHO ACIMA DO t_ref - TECLA N
        // ##########################################################

        // A variável global 'par_n' foi criada na tecla anterior (Tecla n)

        document.addEventListener('keydown', (event) => {

            if (event.key == 'N' && network.physics.options.solver == 'barnesHut') {

                if (network.physics.adaptiveTimestepEnabled == false) {
                    network.setOptions({"nodes": {"physics": true}})
                }

                // REDUZ EM 5
                par_n = par_n - 5

                if (par_n <= 1) {
                    par_n = 1;
                }

                let nod = nodes.getIds();

                let sel_e = [];

                for (let i=0; i<nod.length; i++) {

                    let size = network.body.nodes[nod[i]].options.size

                    if (size >= t_ref) {
                        sel_e.push(nod[i])
                    }

                    if (size >= t_ref) {
                        nodes.update({id: nod[i], mass: par_n});
                    }
                }

                network.selectNodes(sel_e);

                network.redraw();
                
                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Reduz massa dos nós com tamanho >= ${t_ref} em 5 unidades. Fator: ${par_n} (${network.getSelectedNodes().length})`, 3000);
            }
        })



        // ###############################################################
        // COPIA NÓS E NÚMERO DE CAMADAS PARA A ÁREA DE TRABALHO - TECLA o
        // ###############################################################

        document.addEventListener('keydown', (event) => {

            if (event.key == 'o' && network.getSelectedNodes().length > 0) {

                let get_sel = network.getSelectedNodes();


                let num_cam = prompt("Digite o número de camadas adjacentes (ENTER para 1 camada):");

                // INTERROMPE FUNÇÃO SE O BOTÃO "CANCELA" FOR PRESSIONADO
                if (num_cam == null) {
                    return;
                }


                //let del_te_en_em = ''
                //del_te_en_em = confirm("Deseja excluir Telefones, Endereços e E-mails?");



                let conf_destaca = ''
                if (get_sel.length > 1) {
                    conf_destaca = confirm("Deseja destacar caminhos mais curtos entre os nós?");
                }

                async function copyOperation(num_cam) {
                    await navigator.clipboard.writeText(num_cam)
                };

                let temp = [];
                for (let i = 0; i < get_sel.length; i++) {
                    let j = get_sel[i] + "***" + num_cam + "***" + conf_destaca;
                    temp.push(j);
                }

                setTimeout(() => {copyOperation(temp)}, 500)

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Carrega nós selecionados em nova aba (${temp.length})`, 3000);
            
            } else if (event.key == 'o' && network.getSelectedNodes().length == 0) {
                tempAlert(`Tecla ${event.key} - Selecione um ou mais nós para abri-los em nova aba`, 3000);
            }
        });



        // ###############################################################
        // CONSULTA PELA EXISTÊNCIA DE FILIAIS DO NÓ SELECIONADO - TECLA O
        // ###############################################################

        document.addEventListener('keydown', (event) => {

            if (event.key == 'O' && network.getSelectedNodes().length == 1) {
                
                let sel = network.getSelectedNodes();
                
                //if (sel.length > 1) {
                //    alert('Selecione apenas uma pessoa jurídica.')
                //    return;
                //}

                let texto = '';
                
                // APENAS PESSOAS JURÍDICAS
                if (sel.length == 1 && ((sel[0].slice(0, 3) == 'PJ_') || (sel[0].slice(0, 3) == 'PE_'))) {

                    texto = '#_#' + sel[0].slice(3, 11) + '@' + '9999' + '#_#';

                    //console.log(texto);

                    async function copyOperation(num_cam) {
                        await navigator.clipboard.writeText(num_cam);
                    }
                    setTimeout(() => {copyOperation(texto)}, 500);

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Carrega todas as filiais do nó selecionado em nova aba`, 3000);
                
                //} else {
                    //alert('Para consulta de filiais, selecione uma - e apenas uma - pessoa juridica.');
                    // Exibe informações na tela
                //    tempAlert(`Tecla ${event.key} - ALERTA: Para consultar filiais, selecione uma - e apenas uma - pessoa jurídica`, 3000);

                }

            } else if (event.key == 'O' && network.getSelectedNodes().length != 1) {
                    tempAlert(`Tecla ${event.key} - Selecione uma pessoa jurídica para abrir suas filiais em nova aba`, 3000);
            }

            //};
        });



        // ###################################
        // ATIVA/DESATIVA PHYSICS - TECLA p
        // ###################################

        document.addEventListener('keydown', (event) => {
            if (event.key == 'p') {

                // Limpa os caches para forçar re-leitura dos tamanhos originais
                Object.keys(tamanhosOriginais).forEach(key => delete tamanhosOriginais[key]);
                Object.keys(tamanhosFonteOriginais).forEach(key => delete tamanhosFonteOriginais[key]);
                Object.keys(coresFonteOriginais).forEach(key => delete coresFonteOriginais[key]);

                if (network.physics.physicsEnabled == true) {
                    network.physics.physicsEnabled = false;
                    network.physics.stopSimulation();

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Para a interação gravitacional (congela todos os nós)`, 3000);

                } else if (network.physics.physicsEnabled == false) {
                    network.physics.physicsEnabled = true;
                    network.physics.startSimulation();

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Retoma a interação gravitacional (descongela todos os nós)`, 3000);

                }

            }
        });



        // #########################################
        // CONSULTA LIVRE DOS NÓS NO GRAFO - TECLA q
        // #########################################

        // Realiza consulta nos textos dos labels e dos ids dos nós e das arestas. Após a consulta, usar tecla I para alternar entre os nós selecionados.

        var target_id = [];
        //var nodLista = [];
        var con = [];
        
        document.addEventListener('keydown', (event) => {

            if (event.key == 'q') {

                let a = network.getSelectedNodes();
                let temp = '';
                if (a.length == 1) {
                    temp = `id selecionado: ${network.body.nodes[a[0]].id}\n`
                }

                // ZERA VARIÁVEL GLOBAL. EXIGIDO PELO SCRITP SEGUINTE (TECLA I)
                counter = 0

                let text = prompt(temp + "Digite o texo a ser localizado nos rótulos e nos ids dos NÓS:");
                //console.log('Termo pesquisado:', text);

                // SE FOR FORNECIDO ALGUM PARÂMETRO
                if (text != '') {
                    let a = nodes.getIds();
                    //let target_id = [];
                    //let con = [];
                    for (var i=0; i<a.length; i++) {
                        if (nodes.get(a[i])['label'].toLowerCase().includes(text.toLowerCase()) || a[i].toLowerCase().includes(text.toLowerCase())) {
                            let temp = network.getConnectedNodes(a[i]);
                            con = con.concat(temp);
                            con = con.concat([a[i]])
                            target_id.push(a[i]);
                        }
                    }

                    // Elimina duplicidades
                    con = [...new Set(con)];
                    target_id = [...new Set(target_id)];

                    network.selectNodes(target_id);

                    //console.log('con:', con);
                    //network.fit({nodes: con, maxZoomLevel: 0.7, minZoomLevel: 0.7});

                    if (con.length > 0) {
                        network.fit({nodes: con});
                    }
                    //network.fit({nodes: target_id});

                    //console.log('Itens localizados:', target_id);
                    //alert(target_id.length.toString() + ' itens localizados');

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Pesquisa por "${text}" nos nós (${target_id.length})`, 3000);


                // SE NÃO FOR FORNECIDO NENHUM PARÂMETRO
                } else if (text == '') {

                    let a = edges.getIds();
                    let edgLista = [];
                    let param = prompt('Digite o texo a ser localizado nos rótulos das ARESTAS:');

                    if (param == '') {
                        return;
                    }
                    
                    for (let i=0; i<a.length; i++) {
                        if (network.body.edges[a[i]].options.label != undefined) {
                            let temp = network.body.edges[a[i]].options.label;
                            temp = temp.toLowerCase();
                            
                            function removeAccents(str) {
                                const accents = "ÀÁÂÃÄÅàáâãäåÒÓÔÕÕÖØòóôõöøÈÉÊËèéêëðÇçÐÌÍÎÏìíîïÙÚÛÜùúûüÑñŠšŸÿýŽž";
                                const accentsOut = "AAAAAAaaaaaaOOOOOOooooooEEEEeeeeeCcDIIIIiiiiUUUUuuuuNnSsYyyZz";
                                str = str.split('');
                                str.forEach((letter, index) => {
                                    const i = accents.indexOf(letter);
                                    if (i !== -1) {
                                    str[index] = accentsOut[i];
                                    }
                                });
                                return str.join('');
                            }
                            temp = removeAccents(temp)
                                
                            param = param.toLowerCase();
                            if (temp.includes(param)) {
                                edgLista.push(network.body.edges[a[i]].id);
                            }
                        }
                    }
                    
                    let nodLista = [];
                    for (let i=0; i<edgLista.length;i++) {
                        nodLista.push(network.body.edges[edgLista[i]].fromId);
                        target_id.push(network.body.edges[edgLista[i]].fromId);
                    }
                    
                    for (let i=0; i<nodLista.length; i++) {
                        let temp = network.getConnectedNodes(nodLista[i]);
                        con = con.concat(temp);
                    }

                    con = con.concat(target_id);

                    // Elimina duplicidades
                    con = [...new Set(con)];
                    target_id = [...new Set(target_id)];

                    //network.selectNodes(nodLista);

                    //target_id = target_id.concat(nodLista);

                    network.selectNodes(target_id);

                    if (con.length > 0) {
                        network.fit({nodes: con});
                    }

                    //tempAlert(`Tecla ${event.key} - Pesquisa por "${param}" nas arestas (${nodLista.length})`, 3000);
                    tempAlert(`Tecla ${event.key} - Pesquisa por "${param}" nas arestas (${target_id.length})`, 3000);

                }

                
            }
        });



        // ############################
        // SELECIONA NÓS-ALVOS - TECLA Q
        // ############################

        document.addEventListener('keydown', (event) => {
            if (event.key == 'Q') {
                let todos = nodes.getIds();
                let nos_sel = []
                for (let i=0; i<todos.length; i++) {
                    let node = network.body.nodes[todos[i]];
                    if (node.shape.options.color.border == 'red') {
                        nos_sel.push(todos[i]);
                    }
                }
                network.selectNodes(nos_sel);

                if (nos_sel.length > 0) {
                    tempAlert(`Tecla ${event.key} - Seleciona nós-alvos (${nos_sel.length})`, 3000);
                } else if (nos_sel.length == 0) {
                    tempAlert(`Tecla ${event.key} - Não há nós-alvos no grafo`, 3000);
                }
            }
        });



        // ########################################################
        // DELETA TODOS OS NÓS QUE NÃO ESTÃO SELECIONADOS - TECLA r
        // ########################################################

        document.addEventListener('keydown', (event) => {
    
            if (event.key == "r" && network.getSelectedNodes().length > 0) {

                if (network.getSelectedNodes().length > 0) {

                    let n_1 = network.getSelectedNodes();

                    let tudo_1 = nodes.getIds();

                    let diff_2 = tudo_1.filter(x => !n_1.includes(x));

                    network.selectNodes(diff_2)

                    network.deleteSelected();

                    temp = nodes.getIds();

                    for (let i=0; i<temp.length; i++) {
                        nodes.update({id: temp[i], font: {color: '#777777'}})
                    }

                    network.unselectAll();

                    // VARIÁVEL GLOBAL DEFINIDA NA FUNÇÃO DA TECLA DEL
                    del_array = del_array.concat(diff_2);

                    // LIMPA n_bag REMOVENDO NÓS DELETADOS (CORRIGE PROBLEMA COM FIT APÓS ESPAÇO)
                    n_bag = n_bag.filter(x => !diff_2.includes(x));

                    // total_n: VARIÁVEL GLOBAL DENIFINDA NA FUNÇÃO DA TECLA DEL
                    let percentual = (del_array.length / total_n.length) * 100;
                    percentual = percentual.toFixed(1);

                    // INCLUIR AVISO PERMANENTE QUE NÓS FORAM DELETADOS
                    let el = document.createElement("div");
                    //el.setAttribute("style","position:absolute;top:70px;right:21px;border:5px solid rgba(255, 255, 123, 1);border-radius: 5px;background-color:rgba(255, 255, 123, 1);");
                    el.setAttribute("style","position:absolute;bottom:6px;right:19px;border:1px solid rgba(255, 255, 123, 1);border-radius: 1px;font-size: 10px;padding: 1;background-color:rgba(255, 255, 123, 1);");

                    el.innerHTML = `Nós deletados (${del_array.length}/${total_n.length}) ${percentual}%`;
                    document.body.appendChild(el);

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Deleta nós não selecionados (${diff_2.length})`, 3000);
                }

            } else if (event.key == "r" && network.getSelectedNodes().length == 0) {
                tempAlert(`Tecla ${event.key} - Selecione os nós que devem permanecer no grafo`, 3000);
            }
        });



        // ###############################################################################
        // EXIBE APENAS NÓS E ARESTAS DOS CAMINHOS MAIS CURTOS ENTRE OS NÓS-ALVOS - TECLA R
        // ###############################################################################

        var e_color = [];
        document.addEventListener('keydown', (event) => {
    
            if (event.key == "R") {

                // EXTRAI ARESTAS COLORIDAS
                //let e = edges.getIds();
                let e = edges.getIds().filter(id => network.body.edges[id] !== undefined);

                //let e_color = [];
                for (let i=0; i<e.length; i++) {
                    let temp = network.body.edges[e[i]].options.width
                    if (temp == 8) {
                        e_color.push(e[i]);
                    }
                }

                if (e_color.length > 0) {
                
                    // EXTRAI NÓS CONECTADOS ÀS ARESTAS COLORIDAS
                    let n_color = [];
                    for (let i=0; i<e_color.length; i++) {
                        let temp = network.getConnectedNodes(e_color[i]);
                        for (let k=0; k<temp.length; k++) {
                            n_color.push(temp[k]);
                        }
                    }
                    
                    
                    // ELIMINA DUPLICIDADES
                    n_color = [...new Set(n_color)];
                    

                    // CALCULA DIFERENÇA E DELETA
                    let n_diff = nodes.getIds().filter(x => !n_color.includes(x));
                    network.setSelection({nodes: n_diff})
                    network.deleteSelected();
                    
                    //let e_diff = edges.getIds().filter(x => !e_color.includes(x));	
                    let e_diff = [];

                    let edgeIds = edges.getIds();

                    for (let i = 0; i < edgeIds.length; i++) {
                        let id = edgeIds[i];

                        // pula arestas que não existem mais no network
                        if (!network.body.edges[id]) continue;

                        // mantém apenas as arestas fora de e_color
                        if (!e_color.includes(id)) {
                            e_diff.push(id);
                        }
                    }





                    network.setSelection({edges: e_diff})
                    network.deleteSelected();


                    // VARIÁVEL GLOBAL DEFINIDA NA FUNÇÃO DA TECLA DEL
                    del_array = del_array.concat(n_diff);

                    // LIMPA n_bag REMOVENDO NÓS DELETADOS (CORRIGE PROBLEMA COM FIT APÓS ESPAÇO)
                    //n_bag = n_bag.filter(x => !diff_2.includes(x));
                    n_bag = n_bag.filter(x => !n_diff.includes(x));

                    // total_n: VARIÁVEL GLOBAL DENIFINDA NA FUNÇÃO DA TECLA DEL
                    let percentual = (del_array.length / total_n.length) * 100;
                    percentual = percentual.toFixed(1);

                    // INCLUIR AVISO PERMANENTE QUE NÓS FORAM DELETADOS
                    let el = document.createElement("div");
                    //el.setAttribute("style","position:absolute;top:70px;right:21px;border:5px solid rgba(255, 255, 123, 1);border-radius: 5px;background-color:rgba(255, 255, 123, 1);");
                    el.setAttribute("style","position:absolute;bottom:6px;right:19px;border:1px solid rgba(255, 255, 123, 1);border-radius: 1px;font-size: 10px;padding: 1;background-color:rgba(255, 255, 123, 1);");


                    //el.innerHTML = `Nós deletados (${del_array.length}/${total_n.length}) ${percentual}%`;
                    //document.body.appendChild(el);

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Exibe apenas nós interligados por arestas coloridas (${n_color.length})`, 3000);
                
                } else if (e_color.length == 0) {
                    tempAlert(`Tecla ${event.key} - Não há nós interligados por arestas coloridas`, 3000);
                }
            }
        })

        


        // ###################################
        // RECEBE CONSULTA LIVRE - TECLA s
        // ###################################

        document.addEventListener('keydown', (event) => {

            let texto = '';
            if (event.key == 's') {

                let a = network.getSelectedNodes();
                let temp = '';
                if (a.length == 1) {
                    temp = `id selecionado: ${network.body.nodes[a[0]].id}\n`
                }
                //console.log(temp)

                let texto = prompt(temp + "Texto para consulta livre (curingas de palavras: * ):");

                //console.log(texto);
                if (texto != null && texto != '') {
                    async function copyOperation(texto) {
                        await navigator.clipboard.writeText(texto)
                    }

                    // Exibe informações na tela
                    tempAlert(`Tecla ${event.key} - Realiza consulta livre por "${texto}"`, 3000);

                    texto = '#_#' + texto + '#_#';
                    setTimeout(() => {copyOperation(texto)}, 1000);
                    //console.log('Texto copiado:', texto);

                }
            }
        });



        //function ajusta_altura() {

        //    // EXTRAI DIMENSÕES DA JANELA DO NAVEGADOR
        //    var w = window.innerWidth;
        //    let h = window.innerHeight;

        //    // AJUSTA ALTURA DA ÁREA DO GRAFO À ALTURA DA JANELA
        //    document.querySelector('#mynetwork').style.height = h - 20;
        //};

        //setTimeout(() => {ajusta_altura()}, 0);



        // ###############################################################################
        // CARREGA NÓS SELECIONADOS EM NOVA ABA (1 CAMADA, SEM DESTAQUE/SEM SOM) - TECLA S
        // ###############################################################################
        document.addEventListener('keydown', (event) => {
 
            // Verifica se a tecla pressionada é 'S' (maiúscula)
            if (event.key == 'S' && network.getSelectedNodes().length > 0) {
                let sel = network.getSelectedNodes();
                let num_cam = 1; // Fixo em 1 camada
 
                // Define explicitamente para desativar o destaque de arestas, o que também desativa o beep de conexão.
                // O valor 'false' será capturado pelo backend Python para definir destacar_ligacoes = False.
                let conf_destaca = 'false';
 
                // Junta os IDs dos nós selecionados usando ';' como separador
                let selected_ids = sel.join(';');
 
                // Formata a string com delimitadores #_# para acionar a "Consulta Livre"
                // e evitar o destaque das bordas em vermelho.
                let texto_consulta = '#_#' + selected_ids + '#_#';
 
                // A estrutura final inclui o texto_consulta, o número de camadas e a instrução 'false'
                let parametro_final = texto_consulta + '***' + num_cam + '***' + conf_destaca;
 
                async function copyOperation(param) {
                    await navigator.clipboard.writeText(param) // Comunica com o backend via clipboard
                };
 
                // Copia o parâmetro para a área de transferência
                setTimeout(() => {copyOperation(parametro_final)}, 500);
 
                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Exibe nós selecionados (${sel.length}) em ${num_cam} camada(s) sem destaque`, 3000);
 
            } else if (event.key == 'S' && network.getSelectedNodes().length == 0) {
 
                // Exibe alerta se nenhum nó estiver selecionado
                tempAlert(`Tecla ${event.key} - Selecione um ou mais nós para abri-los em nova aba`, 3000);
            }
        });









        // ########################################
        // EXIBE IMAGENS DOS NÓS POR TIPO - TECLA t
        // ########################################

        // 15 itens (0 a 14)
        var img_names = ['pf_homem.png',
                        'pf_homem_com_bandeira.png',
                        'pf_mulher.png',
                        'pf_mulher_com_bandeira.png',
                        'pj_brasil_ativa.png',
                        'pj_brasil_ativa_com_bandeira.png', 
                        'pj_brasil_inativa.png',
                        'pj_brasil_inativa_com_bandeira.png',
                        'pj_exterior_ativa.png',
                        'pj_exterior_ativa_com_bandeira.png', 
                        'pj_exterior_inativa.png', 
                        'pj_exterior_inativa_com_bandeira.png', 
                        'endereco.png', 
                        'telefone.png',
                        'email.png'
                        ]

        var cont_t = 0
        var temp_t = nodes.getIds();

        document.addEventListener('keydown', (event) => {
            
            if (event.key == 't' && network.physics.options.solver == 'barnesHut') {
                
                network.physics.physicsEnabled = false;
                network.physics.stopSimulation();
                
                // EXECUTAR APENAS UMA VEZ
                if (cont_t == 0) {
                    network.setOptions({nodes: {opacity: 0.1}, edges: {hidden: true}});
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Ativa modo transparência por tipos de nós - oculta rede (${temp_t.length})`, 3000);

                    
                } else if (cont_t == 1) {
                    let temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[0]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe homens (${temp.length}/${nodes.getIds().length})`, 3000);
                    

                    
                } else if (cont_t == 2) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[1]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[0]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe homens com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t == 3) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[2]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[1]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe mulheres (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t == 4) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[3]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[2]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe mulheres com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t == 5) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[4]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[3]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe PJs ativas domiciliadas no Brasil (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t == 6) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[5]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[4]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe PJs ativas domiciliadas no Brasil com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t == 7) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[6]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[5]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe PJs inativas domiciliadas no Brasil (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t == 8) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[7]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[6]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe PJs inativas domiciliadas no Brasil com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);
                

                } else if (cont_t == 9) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[8]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[7]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe PJs ativas domiciliadas no exterior (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t == 10) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[9]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[8]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe PJs ativas domiciliadas no exterior com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t == 11) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[10]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[9]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe PJs inativas domiciliadas no exterior (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t == 12) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[11]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[10]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe PJs inativas domiciliadas no exterior com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t == 13) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[12]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[11]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe endereços (${temp.length}/${nodes.getIds().length})`, 3000);

                    
                } else if (cont_t == 14) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[13]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[12]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe telefones (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t == 15) {
                    temp = [];
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[14]) {
                            nodes.update({id: temp_t[i], opacity: 1});
                            temp.push(temp_t[i]);
                        } else if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[13]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = cont_t + 1;
                    tempAlert(`Tecla ${event.key} - Exibe e-mails (${temp.length}/${nodes.getIds().length})`, 3000);

                    
                } else if (cont_t == 16) {
                    //window.location.reload();
                    for (var i = 0; i < temp_t.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t[i]].options.image.split('\\').at(-1) == img_names[14]) {
                            nodes.update({id: temp_t[i], opacity: 0.1});
                        }
                    }
                    cont_t = 1;
                    tempAlert(`Tecla ${event.key} - Oculta rede (${temp_t.length})`, 3000);
                }

                //network.physics.physicsEnabled = true;
                //network.physics.startSimulation();
            }
        });



        // ##################################
        // ATIVA MODO TRANSPARÊNCIA - TECLA T
        // ##################################

        //var toggle_T = true;
        var con_t = [];
        var edg_t = [];
        var con_sel = [];
        var edg_sel = []

        document.addEventListener('keydown', (event) => {

            //  SÓ FUNCIONA NO MODO BARNES-HUT
            if (event.key == 'T' && network.physics.options.solver == 'barnesHut') {

                network.physics.physicsEnabled = false;
                network.physics.stopSimulation();

                // TORNA TODOS OS NÓS E ARESTAS TRANSPARENTES
                network.setOptions({nodes: {opacity: 0.1}, edges: {hidden: true}});

                // AO FICAR EM CIMA DO NÓ
                network.on('hoverNode', function f(params) {

                    // EXTRAI NÓS CONECTADOS AO NÓ HOVER (con_t)
                    let node = params.node;
                    //console.log('hover node:', node);
                    con_t = network.getConnectedNodes(node);
                    con_t = con_t.concat(node);
                    //console.log('con_t:', con_t);

                    // EXTRAI ARESTAS CONECTADAS AO NÓ HOVER (edg_t)
                    edg_t = network.getConnectedEdges(node);
                    //console.log('edg_t:', edg_t);

                    // FAZ APARECER NÓS CONECTADOS AO NÓ HOVER
                    for (let i=0; i<con_t.length; i++) {
                        nodes.update({id: con_t[i], opacity: 1});
                    }

                    // FAZ APARECER ARESTAS CONECTADAS AO NÓ HOVER
                    for (let i=0; i<edg_t.length; i++) {
                        edges.update({id: edg_t[i], hidden: false});
                    }
                });

                // A SELEÇÃO DOS NÓS OCORRE POR MEIO DE OUTRO SCRIPT (CLICK)
                

                // ######################################################### ACIMA ESTÁ OK!

                // AO SAIR DE CIMA DO NÓ
                network.on('blurNode', function f(params) {

                    // OBTÉM NÓ BLUR (APENAS UM)
                    let blur_node = params.node;

                    // OBTÉM ARRAY DE NÓS CONECTADOS AOS NÓS SELECIONADOS (PODE SER MAIS DE UM)
                    let sel = network.getSelectedNodes();

                    // SE O NÓ BLUR ESTIVER ENTRE OS NÓS SELECIONADOS, ADICIONA OS NÓS E ARESTAS CONECTADOS AOS ARRAYS con_sel E edg_sel
                    for (let i=0; i<sel.length; i++) {                
                        if (blur_node == sel[i]) {
                            
                            //for (let j=0; j<sel.length; j++) {
                            let temp = network.getConnectedNodes(sel[i]);
                            con_sel = con_sel.concat(temp);
                            con_sel = con_sel.concat(sel[i]);
                            //}
                            //console.log('con_sel:', con_sel);
                
                            // OBTÉM ARESTAS CONECTADAS AO NÓ SELECIONADO
                            //for (let k=0; k<con_sel.length; k++) {
                            temp = network.getSelectedEdges(con_sel[i]);
                            edg_sel = edg_sel.concat(temp);
                            //}
                            //console.log('edg_sel:', edg_sel);
                        }
                    }

                    // SE NÃO TIVER NÓ SELECIONADO, FAZ OS NÓS E ARESTAS (con_t e edg_t) VOLTAREM A FICAR TRANSPARENTES
                    if (con_sel.length == 0) {
                        for (let i=0; i<con_t.length; i++) {
                            nodes.update({id: con_t[i], opacity: 0.1});
                        }
                        for (let i=0; i<edg_t.length; i++) {
                            edges.update({id: edg_t[i], hidden: true});
                        }

                    // SE TIVER NÓS E ARESTAS SELECIONADOS, SUBTRAI NÓS E ARESTAS SELECIONADOS (con_sel E edg_sel) DOS NÓS E ARESTAS CONTIDOS EM con_t E OS FAZ TRANSPARENTES
                    } else if (con_sel.length > 0) {
                        let diff_node = con_t.filter(x => !con_sel.includes(x));
                        for (let i=0; i<diff_node.length; i++) {
                            nodes.update({id: diff_node[i], opacity: 0.1});
                        }

                        // FALTA FAZER COM QUE AS ARESTAS DESAPAREÇAM APÓS BLUR
                        let diff_edg = edg_t.filter(x => !edg_sel.includes(x));
                        for (let i=0; i<diff_edg.length; i++) {
                            edges.update({id: diff_edg[i], hidden: true});
                        }
                    }
                });
                //toggle_T = false;

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Ativa modo transparência por conexões - oculta rede`, 3000);
                
            } else if (event.key == 'T' && network.physics.options.solver == 'barnesHut') {
                window.location.reload();               
                //ajusta_altura();
                //toggle_T = true;

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Desativa modo transparência`, 3000);
            }
        });



        // ####################################
        // EXIBE CENTRALIDADE DOS NÓS - TECLA u
        // ####################################

        // Encontrar uma forma de passar a informação apenas uma vez e não em todos os nós PJ
        // Descobrir forma de exibir informações em outro elemento e não mais em alert

        document.addEventListener('keydown', (event) => {
            if (event.key == "u") {

                let n = nodes.getIds();
                for (let i=0; i<n.length; i++) {
                    if (n[i].slice(0, 3) == 'PJ_') {
                        
                        // As informações exibidas estão no atributo 'algoritmos' de todos os nós PJ
                        let temp = network.body.nodes[n[i]].options.algoritmos;
                        alert(temp)
                        break;
                    }
                }

                // Exibe informações na tela (não está exibindo)
                tempAlert(`Tecla ${event.key} - Exibe informações sobre as medidas de centralidade`, 3000);
            }
        });



        // ################################################
        // EXIBE DISTRIBUIÇÃO DOS NÓS POR TAMANHO - TECLA U
        // ################################################

        //var a_tudo = nodes.getIds();
        var a_tudo = []

        document.addEventListener('keydown', (event) => {

            a_tudo = nodes.getIds();
            
            if (event.key == "U") {
                
                let a_100 = [];
                let a_95 = [];
                let a_90 = [];
                let a_85 = [];
                let a_80 = [];
                let a_75 = [];
                let a_70 = [];
                let a_65 = [];
                let a_60 = [];
                let a_55 = [];
                let a_50 = [];
                let a_45 = [];
                let a_40 = [];
                let a_35 = [];
                let a_30 = [];
                let a_25 = [];
                let a_20 = [];
                
                for (let i=0; i<a_tudo.length; i++) {

                    if (network.body.nodes[a_tudo[i]].options.size > 99.9999999999 && network.body.nodes[a_tudo[i]].options.size <= 100) {
                        a_100.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 99.9999999999 && network.body.nodes[a_tudo[i]].options.size >= 95) {
                        a_95.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 95 && network.body.nodes[a_tudo[i]].options.size >= 90) {
                        a_90.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 90 && network.body.nodes[a_tudo[i]].options.size >= 85) {
                        a_85.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 85 && network.body.nodes[a_tudo[i]].options.size >= 80) {
                        a_80.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 80 && network.body.nodes[a_tudo[i]].options.size >= 75) {
                        a_75.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 75 && network.body.nodes[a_tudo[i]].options.size >= 70) {
                        a_70.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 70 && network.body.nodes[a_tudo[i]].options.size >= 65) {
                        a_65.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 65 && network.body.nodes[a_tudo[i]].options.size >= 60) {
                        a_60.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 60 && network.body.nodes[a_tudo[i]].options.size >= 55) {
                        a_55.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 55 && network.body.nodes[a_tudo[i]].options.size >= 50) {
                        a_50.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 50 && network.body.nodes[a_tudo[i]].options.size >= 45) {
                        a_45.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 45 && network.body.nodes[a_tudo[i]].options.size >= 40) {
                        a_40.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 40 && network.body.nodes[a_tudo[i]].options.size >= 35) {
                        a_35.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 35 && network.body.nodes[a_tudo[i]].options.size >= 30) {
                        a_30.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 30 && network.body.nodes[a_tudo[i]].options.size >= 25) {
                        a_25.push(a_tudo[i]);
                    }
                    else if (network.body.nodes[a_tudo[i]].options.size < 25 && network.body.nodes[a_tudo[i]].options.size >= 20) {
                        a_20.push(a_tudo[i]);
                    }

                }
                //console.log(a_100);
                //console.log(a_95);
                //console.log(a_90);
                //console.log(a_85);
                //console.log(a_80);
                //console.log(a_75);
                //console.log(a_70);
                //console.log(a_65);
                //console.log(a_60);
                //console.log(a_55);
                //console.log(a_50);
                //console.log(a_45);
                //console.log(a_40);
                //console.log(a_35);
                //console.log(a_30);
                //console.log(a_25);
                //console.log(a_20);
                
                let texto_espaco = `DISTRIBUIÇÃO DOS NÓS POR TAMANHO:
Tamanho      100:   ${a_100.length}
Tamanho 95 - 99:   ${a_95.length}
Tamanho 90 - 94:   ${a_90.length}
Tamanho 85 - 90:   ${a_85.length}
Tamanho 80 - 84:   ${a_80.length}
Tamanho 75 - 79:   ${a_75.length}
Tamanho 70 - 74:   ${a_70.length}
Tamanho 65 - 69:   ${a_65.length}
Tamanho 60 - 64:   ${a_60.length}
Tamanho 55 - 59:   ${a_55.length}
Tamanho 50 - 54:   ${a_50.length}
Tamanho 45 - 49:   ${a_45.length}
Tamanho 40 - 44:   ${a_40.length}
Tamanho 35 - 39:   ${a_35.length}
Tamanho 30 - 34:   ${a_30.length}
Tamanho 25 - 29:   ${a_25.length}
Tamanho 20 - 24:   ${a_20.length}
-----------------------------
TOTAL:                    ${a_tudo.length}`;
                
                texto_espaco = texto_espaco.replaceAll(" 0\n", "  \n");

                tempAlert(`Tecla ${event.key} - Exibe distribuição dos nós por tamanho`, 3000);
                
                alert(texto_espaco);
            }
        });



        // ###########################
        // EXIBE COMUNIDADES - TECLA v
        // ###########################

        // Quando os atributos dos nós são alterados por meio de "nodes.update", "network.setOptions" não funciona para retornar ao estado anterior
        // Ao mudar paletar de cores, alterar também a variável 'num_cores' (resolvido: criado mecanismo de variação automática)

        var toggle_v = true;
        var n_comunidades = 0;

        document.addEventListener('keydown', (event) => {
            if (event.key == "v" && toggle_v == true) {

                //network.physics.physicsEnabled = false;
                //network.physics.stopSimulation();

                let a = nodes.getIds();

                if (a.length > 500) {
                    let conf = confirm('A identificacao de comunidades em mais de 500 nós pode demorar vários minutos. Deseja continuar?')
                    if (!conf) {
                        return;
                    }
                }

                // PALETA DE CORES ALTO CONTRASTE
                // https://www.schemecolor.com/high-contrast.php
                //var hcc = ["#8931EF", "#F2CA19", "#FF00BD", "#0057E9", "#87E911", "#E11845"]
                //var hcc = ["#8931EF", "#F2CA19", "#FF00BD", "#0057E9", "#87E911"]

                // tab10 (tableau 10)
                //var hcc = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"]

                var hcc = ["rgba(137, 49, 239, 0.5)",
                           "rgba(242, 202, 25, 0.5)",
                           "rgba(255, 0, 189, 0.5)",
                           "rgba(0, 87, 233, 0.5)",
                           "rgba(135, 233, 17, 0.5)",
                           "rgba(225, 24, 69, 0.5)",

                           "rgba(0, 255, 0, 0.5)",
                           "rgba(255, 255, 0, 0.5)",
                           "rgba(0, 255, 255, 0.5)",
                           "rgba(255, 0, 255, 0.5)"
                          ]

                //var hcc = ["rgba(0, 255, 0, 1)",
                //           "rgba(255, 255, 0, 1)",
                //           "rgba(0, 255, 255, 1)",
                //           "rgba(255, 0, 255, 1)"
                //          ]

                //var hcc = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"]

                for (let i=0; i<a.length; i++) {
                    
                    let n = network.body.nodes[a[i]].options.z_group

                    if (n > n_comunidades) {
                        n_comunidades = n;
                    }
                    
                    // CALCULA ÍNDICE CÍCLICO DO ARRAY
                    //let num_cores = hcc.length
                    index_cir = Math.max(0, n % hcc.length) || 0;

                    // MUDA COR DO FUNDO DO NÓ
                    nodes.update({id: a[i], color: {background: hcc[index_cir]}});

                    //console.log(i)
                }
                toggle_v = false;

                // Exibe informações na tela (não está exibindo)
                tempAlert(`Tecla ${event.key} - Adiciona cores aos nós para destacar comunidades (${n_comunidades})`, 3000);

            } else if (event.key == "v" && toggle_v == false) {
                
                let a = nodes.getIds();
                for (let i=0; i<a.length; i++) {
                    nodes.update({id: a[i], color: {background: 'transparent'}});
                }
                toggle_v = true;

                // Exibe informações na tela (não está exibindo)
                tempAlert(`Tecla ${event.key} - Remove cores dos nós`, 3000);
            }

            //network.physics.physicsEnabled = true;
            //network.physics.startSimulation();

        });



        // #################################
        // EXIBE NÓS DE CADA GRUPO - TECLA V
        // #################################

        var num_grupos = 1;
        var num_grupos_total = network.body.nodes[nodes.getIds()[0]].options.z_group_total;
        var arr2 = [];

        document.addEventListener('keydown', (event) => {
            
            if (event.key == 'V') {

                network.physics.physicsEnabled = false;
                network.physics.stopSimulation();

                network.setOptions({nodes: {opacity: 0.0}, edges: {hidden: true}});
                
                let arr1 = nodes.getIds();
                
                if (arr2.length > 0) {
                    for (let i=0; i<arr2.length; i++) {
                        nodes.update({id: arr2[i], opacity: 0.0});
                    }
                }

                arr2 = [];
                
                for (let i=0; i<arr1.length; i++) {
                    let temp = network.body.nodes[arr1[i]].options.z_group;
                    if (temp == num_grupos) {
                        arr2.push(network.body.nodes[arr1[i]].options.id)
                        nodes.update({id: arr1[i], opacity: 1});
                    }
                }

                
                if (num_grupos == num_grupos_total) {
                    tempAlert(`Tecla ${event.key} - 1 Seleciona grupo ${num_grupos}/${num_grupos_total} (${arr2.length})`, 3000);
                    num_grupos = 1;
                
                } else if (num_grupos < num_grupos_total) {
                    tempAlert(`Tecla ${event.key} - 2 Seleciona grupo ${num_grupos}/${num_grupos_total} (${arr2.length})`, 3000);
                    num_grupos = num_grupos + 1
                }
                
                network.physics.physicsEnabled = true;
                network.physics.startSimulation();
            }
        });



        // #############################################################
        // ADICIONA COR AO FUNDO DOS NÓS ANCESTRAIS DO NÓ-ALVO - TECLA w
        // #############################################################

        // CRIA ARRAY COM NÓS ANCESTRAIS
        var ancestors = [];
        var nodes_all = nodes.getIds();
        for (let i=0; i<nodes_all.length; i++) {
            if (network.body.nodes[nodes_all[i]].options.z_ancestor == 'true') {
                ancestors.push(nodes_all[i]);
            }
        }

        // INSERE COR NO FUNDO DOS NÓS ANCESTRAIS
        var toggle_w = true;
        document.addEventListener('keydown', (event) => {

            if (event.key == 'w') {

                if (toggle_w == true) {
                    for (let i=0; i<ancestors.length; i++) {
                        nodes.update({id: ancestors[i], color: {background: 'rgb(0, 0, 255, 0.2)', hover: {background: 'rgb(0, 0, 255, 0.2)'}}});
                        //nodes.update({id: ancestors[i], color: {background: 'rgb(0, 255, 0, 1)', hover: {background: 'rgb(0, 255, 0, 1)'}}});
                    }

                    if (ancestors.length > 0) {
                        tempAlert(`Tecla ${event.key} - Adiciona cores para destacar cadeia de nós originária do nó-alvo (${ancestors.length})`, 3000);
                        toggle_w = false;

                    } else if (ancestors.length == 0) {
                        tempAlert(`Tecla ${event.key} - Não há nós-alvos para destacar cadeia originária`, 3000);
                    }
                    
                } else if (toggle_w == false) {
                    for (let i=0; i<ancestors.length; i++) {
                        nodes.update({id: ancestors[i], color: {background: 'transparent', hover: {background: 'transparent'}}});
                    }
                    toggle_w = true;

                    // Exibe informações na tela (não está exibindo)
                    tempAlert(`Tecla ${event.key} - Remove cores dos nós (${ancestors.length})`, 3000);
                }
            }
        });



        // ##################################
        // SELECIONA NÓS ANCESTRAIS - TECLA W
        // ##################################

        document.addEventListener('keydown', (event) => {

            if (event.key == 'W') {
                arr1 = nodes.getIds();
                arr2 = ancestors;

                if (arr2.length == 0) {
                    tempAlert(`Tecla ${event.key} - Não há nó-alvo único para selecionar cadeia originária`, 3000);
                    return;
                }

                let difference = arr1.filter(x => !arr2.includes(x));
                network.selectNodes(difference);
                network.deleteSelected();


                // VARIÁVEL GLOBAL DEFINIDA NA FUNÇÃO DA TECLA DEL
                del_array = del_array.concat(difference);

                // LIMPA n_bag REMOVENDO NÓS DELETADOS (CORRIGE PROBLEMA COM FIT APÓS ESPAÇO)
                n_bag = n_bag.filter(x => !diff_2.includes(x));

                // total_n: VARIÁVEL GLOBAL DENIFINDA NA FUNÇÃO DA TECLA DEL
                let percentual = (del_array.length / total_n.length) * 100;
                percentual = percentual.toFixed(1);

                // INCLUIR AVISO PERMANENTE QUE NÓS FORAM DELETADOS
                let el = document.createElement("div");
                //el.setAttribute("style","position:absolute;top:70px;right:21px;border:5px solid rgba(255, 255, 123, 1);border-radius: 5px;background-color:rgba(255, 255, 123, 1);");
                el.setAttribute("style","position:absolute;bottom:6px;right:19px;border:1px solid rgba(255, 255, 123, 1);border-radius: 1px;font-size: 10px;padding: 1;background-color:rgba(255, 255, 123, 1);");

                el.innerHTML = `Nós deletados (${del_array.length}/${total_n.length}) ${percentual}%`;
                document.body.appendChild(el);

                // Exibe informações na tela (não está exibindo)
                tempAlert(`Tecla ${event.key} - Exclui nós que não pertecem à cadeia de nós originária do nó-alvo (${ancestors.length})`, 3000);
            }
        });



        // ####################################################
        // ADICIONA COR AO FUNDO DOS NÓS SELECIONADOS - TECLA x
        // ####################################################

        // Verde, amarelo, azul, lilás
        var cores_fundo = ["rgba(0, 255, 0, 1)", "rgba(255, 255, 0, 1)", "rgba(0, 255, 255, 1)", "rgba(255, 0, 255, 1)"];
        var c_color = 0;
        var nos_coloridos = [];

        document.addEventListener('keydown', (event) => {
            if (event.key == 'x' && network.getSelectedNodes().length > 0) {

                let todos = network.getSelectedNodes();
                for (let i=0; i<todos.length; i++) {
                    nodes.update({id: todos[i], color: {background: cores_fundo[c_color], hover: {background: cores_fundo[c_color]}}});
                    nodes.update({id: todos[i], font: {color: '#777777'}});
                    nos_coloridos.push(todos[i]);
                    network.unselectAll();
                }
                
                if (network.getSelectedNodes().length == 0) {
                    c_color = c_color + 1;
                }
                
                if (c_color > cores_fundo.length - 1) {
                    c_color = 0;
                }

                // Exibe informações na tela (não está exibindo)
                tempAlert(`Tecla ${event.key} - Adiciona cores sequenciais aos nós selecionados (verde, amarelo, azul e lilás)`, 3000);
            
            } else if (event.key == 'x' && network.getSelectedNodes().length == 0) {
                tempAlert(`Tecla ${event.key} - Selecione nós em sequência para adicionar cores (verde, amarelo, azul e lilás)`, 3000);
            }
        });



        // ####################################################
        // REMOVE COR AO FUNDO DOS NÓS SELECIONADOS - TECLA X
        // ####################################################

        document.addEventListener('keydown', (event) => {
            if (event.key == 'X') {
                for (let i=0; i<nos_coloridos.length; i++) {
                    nodes.update({id: nos_coloridos[i], color: {background: 'transparent', hover: {background: 'transparent'}}});
                    nodes.update({id: nos_coloridos[i], font: {color: '#777777'}});
                }
                network.unselectAll();
                nos_coloridos = [];
                c_color = 0;

                // Exibe informações na tela (não está exibindo)
                tempAlert(`Tecla ${event.key} - Remove cores dos nós`, 3000);
            }
        });



        // #################################
        // CONSULTA NÓS ACUMULADOS - TECLA y
        // #################################

        document.addEventListener('keydown', (event) => {
            
            if (event.key == 'y') {
                
                // COPIA PARA O CLIPBOARD
                async function copyOperation(param) {
                    await navigator.clipboard.writeText(param)    
                }

                // RESTAURA O ARRAY ARMAZENADO EM 'localStorage' E GERADO PELAS TECLAS '+' E '-'
                let temp = JSON.parse(localStorage.getItem("nos_acum"));
                console.log(temp);


                let conf_destaca = ''
                if (temp.length > 1) {
                    conf_destaca = confirm("Deseja destacar caminhos mais curtos entre os nós?");
                }


                let temp2 = [];
                for (let i = 0; i < temp.length; i++) {
                    let j = temp[i] + "***" + 1 + "***" + conf_destaca;
                    temp2.push(j);
                }


                setTimeout(() => {copyOperation(temp2)}, 500)

                tempAlert(`Tecla ${event.key} - Abre lista de nós-alvos em nova aba (${temp.length})`, 3000);
            }
        });



        // ########################################
        // EXIBE TODOS OS NÓS PF, PJ E PE - TECLA z
        // ########################################

        var controle_z = true;
        var toggle_z = true;
        var last_central_node = '';
        var last_node = '';
        var old_title = '';
        var new_title = '';
        var nod = [];
        var num_nos = 0;
    
        document.addEventListener('keydown', (event) => {
            if (event.key == "z" && toggle_z == true) {

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Ativa modo automático de visualização`, 3000);

                toggle_z = false;

                network.physics.physicsEnabled = false;
                network.physics.stopSimulation();

                var pos = network.getPositions();
                var a = nodes.getIds();

                maiores = [];

                // LOOP PARA OBTER APENAS SEQUÊNCIA NUMÉRICA
                for (let i=0; i<a.length; i++) {

                    // LOOP SOBRE IDS DOS NÓS
                    for (let k=0; k<a.length; k++) {
                        let value_no = network.body.nodes[a[k]].options.value;
                        if (value_no == i) {

                            // APENAS NÓS COM 2 OU MAIS NÓS ADJACENTES
                            if (network.getConnectedNodes(a[k]).length > 1) {
                                maiores.push(a[k]);
                            }
                        }
                    }
                }

                // NÓS ORDENADOS SEGUNDO MAIOR NÚMERO DE ADJACÊNCIAS
                maiores.reverse();

                // CRIA LISTA FINAL COM NÓS COM MAIOR GRAU, SEGUIDOS DE SEUS ADJACENTES
                for (let i=0; i<maiores.length; i++) {
                    nod.push([maiores[i], maiores[i]]);
                    let temp = network.getConnectedNodes(maiores[i]);
                    for (let k=0; k<temp.length; k++) {
                        let temp2 = []
                        temp2 = temp2.concat(temp[k]);
                        temp2 = temp2.concat(maiores[i]);
                        nod.push(temp2);
                    }
                }

                //console.log('nod:', nod)

                network.setOptions({'edges': {'font': {'size': 0}}});
                network.setOptions({"edges": {"hidden": false}});

                // INÍCIO DA FUNÇÃO DE LOOP
                var i = 0;              
                function myLoop() {        
                setTimeout(function() {

                    //console.log('nod:', nod)

                    // CONDIÇÃO QUE VERIFICA O FINAL DO ARRAY 'nod' E ENCERRA A FUNÇÃO
                    if (i == nod.length) {
                        nodes.update({id: last_node, font: {color: '#777777'}});
                        //nodes.update({id: last_central_node, color: {background: 'transparent'}});
                        nodes.update({id: last_central_node, color: {background: 'transparent', hover: {background: 'transparent'}}});
                        nodes.update({id: last_node, label: old_title});
                        //num_nos = 0;
                        network.unselectAll();
                        network.fit({
                            position: {x:0, y:0},
                            scale: 1.0,
                            animation: true
                        });
                        nod = [];
                        network.physics.physicsEnabled = true;
                        network.physics.startSimulation();
                        toggle_z = true;
                        return;
                    }
                    
                    //console.log('nod:', nod);

                    // SAI DO PROGRAMA (SEM ESTA CONDIÇÃO, ESTAVA DANDO ERRO NA PRÓXIMA LINHA)
                    if (nod.length == 0) {
                        return
                    }

                    x = pos[nod[i][0]]['x'];
                    y = pos[nod[i][0]]['y'];

                    last_central_node = nod[i][1];
                    last_node = nod[i][0]

                    nodes.update({id: nod[i][1], color: {background: 'rgb(0, 0, 255, 0.2)', hover: {background: 'rgb(0, 0, 255, 0.2)'}}});
                    
                    if (i >= 1) {
                        if (nod[i][1] != nod[i - 1][1]) {
                            nodes.update({id: nod[i - 1][1], font: {color: '#777777'}});
                            nodes.update({id: nod[i - 1][1], color: {background: 'transparent', hover: {background: 'transparent'}}});
                            setTimeout(function() {
                                network.moveTo({
                                    position: {x:x, y:y},
                                    scale: 0.5,
                                    animation: true
                                });
                            }, 1000);
                        }

                        // ESTOU VENDO ESTE ITEM
                        network.body.nodes[nod[i - 1][0]].options.label = old_title;
                        nodes.update({id: nod[i - 1][0], font: {color: '#777777'}});
                    }

                    // CRIANDO NOVO RÓTULO
                    let edg1 = network.getConnectedEdges(nod[i][0]);
                    let edg2 = network.getConnectedEdges(nod[i][1]);
                    let common_edg = edg1.filter(value => edg2.includes(value));
                    let edg_title = network.body.edges[common_edg[0]].title;
                    old_title = network.body.nodes[nod[i][0]].options.label;

                    var num_nos_cen = network.body.nodes[nod[i][1]].options.value
                    if (num_nos <= parseInt(num_nos_cen)) {
                        if (num_nos == 0) {
                            num_nos = 0;
                        } 
                    }

                    // PARA OS CASOS DE TE_, EN_, EM_ E PARA O PRIMEIRO ITEM DA LISTA
                    if (edg_title == undefined || i == 0) {
                        edg_title = '';
                    }
                    new_title = old_title + '\n' + edg_title + ' (' + num_nos + ' de ' + num_nos_cen + ')';

                    num_nos = num_nos + 1;
                    if (num_nos > parseInt(num_nos_cen)) {
                        num_nos = 0;
                    }

                    network.body.nodes[nod[i][0]].options.label = new_title;
                    
                    network.moveTo({
                        position: {x:x, y:y},
                        scale: 1.0,
                        animation: true
                    });
                    
                    network.selectNodes([nod[i][0]]);
                    nodes.update({id: nod[i][0], font: {color: 'red'}});
                    if (controle_z == false) {
                        controle_z = true;
                        nodes.update({id: last_node, font: {color: '#777777'}});
                        nodes.update({id: last_central_node, color: {background: 'transparent', hover: {background: 'transparent'}}});
                        network.unselectAll();
                        network.redraw();
                        return;
                    }

                    if (i < nod.length) {        
                        myLoop();            
                        if (i == nod.length - 1) {
                            network.setOptions({'edges': {'font': {'size': 15}}});
                            network.setOptions({"edges": {"hidden": false}});
                        }
                    }

                    i++;               

                }, 3500)
                    
                }
                
                myLoop();

                //nodes.update({id: nod[i][1], color: {background: 'transparent', hover: {background: 'transparent'}}});
                

            
            } else if (event.key == "z" && toggle_z == false) {

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Desativa modo automático de visualização`, 3000);

                controle_z = false;
                toggle_z = true;
                network.setOptions({'edges': {'font': {'size': 15}}});
                network.setOptions({"edges": {"hidden": false}});
                nodes.update({id: last_node, font: {color: '#777777'}});
                nodes.update({id: last_central_node, color: {background: 'transparent', hover: {background: 'transparent'}}});
                nodes.update({id: last_node, label: old_title});
                network.unselectAll();
                network.redraw();
                network.fit({
                    position: {x:0, y:0},
                    scale: 1.0,
                    animation: true
                });
                controle_z = true;
                last_central_node = '';
                last_node = '';
                old_title = '';
                new_title = '';
                nod = [];
                num_nos = 0;
                network.physics.physicsEnabled = true;
                network.physics.startSimulation();
            }
        });

        //// EXEMPLO DE LOOP PERIÓDICO EM JAVASCRIPT
        //let x = 0;
        //function loop () {
        //    console.log("hi");
        //    x++;
        //
        //    if (x<3) {
        //        setTimeout(loop, 5000);
        //    }
        //}
        //loop();



        // ################################################################
        // AJUSTA MASSA DOS NÓS PROPORCIONALMENTE AO TAMANHO - TECLA ESPAÇO
        // ################################################################

        // Usa variável global 't_ref'

        var pula_100 = true
        var n_bag = [];

        //var desativa_teclas_m_n = false
        document.addEventListener('keydown', (event) => {
            
            if (event.key == ' ') {

                toggle_c = 0

                //desativa_teclas_m_n = true;

                // EXECUTA APENAS UMA VEZ, FAZENDO t_ref = 100
                if (pula_100 == true) {
                    t_ref = 100
                    pula_100 = false 
                }             

                let all = nodes.getIds();

                let sel_e = []

                for (let i=0; i<all.length; i++) {

                    if (n_bag.includes(all[i])) {
                        continue;
                    }

                    
                    let size = network.body.nodes[all[i]].options.size;

                    // ← NOVA LINHA: ARREDONDA PARA 100 SE >= 99.99
                    if (size >= 99.99) {
                        size = 100;
                    }

                    // VERIFICA SE O TAMANHO DO NÓ ESTÁ NO INTERVALO ENTRE MAIOR OU IGUAL A t_ref E MENOR QUE t_ref + 5
                    if (size >= t_ref && size < (t_ref + 5)) {
                        sel_e.push(all[i])
                    }
                    
                    if (size >= t_ref && size >= 25) {
                        // nodes.update({id: all[i], mass: (size/20) ** 3});
                        nodes.update({id: all[i], mass: network.body.nodes[all[i]].options.value ** 1.5});
                        n_bag.push(all[i]);
                        n_bag = [...new Set(n_bag)];
                    }
                    
                }

                if (t_ref == 20) {
                    sel_e = [];
                }
                network.selectNodes(sel_e);

                // tempAlert(`Tecla Espaço - Aumenta massa dos nós proporcionalmente ao tamanho >= ${t_ref} (${n_bag.length})`, 3000);
                tempAlert(t_ref === 20 ? "Tecla Espaço - Retorna a massa dos nós ao valor inicial (1 unid.)" : `Tecla Espaço - Aumenta a massa dos nós proporcionalmente ao tamanho ${t_ref === 100 ? "=" : ">="} ${t_ref} (${n_bag.length})`, 3000);



                t_ref = t_ref - 5;

                if (t_ref == 15) {
                    // console.log('Reset t_ref e n_bag');
                    //t_ref = 100;
                    t_ref = 40;
                    pula_100 = true;
                    // n_bag = [];
                    // for (let i=0; i<all.length; i++) {
                    //     nodes.update({id: all[i], mass: 1});
                    //     console.log('Reset mass for node id:', all[i]);
                    // }

                    for (let i=0; i<n_bag.length; i++) {
                        nodes.update({id: n_bag[i], mass: 1});
                        // console.log('Reset mass for node id:', n_bag[i]);
                    }
                    n_bag = [];


                }
            }

            // console.log('t_ref:', t_ref);
            // console.log('n_bag:', n_bag);
        });
        











        // #####################################################################
        // ALTERNA SELEÇÃO DOS NÓS ADJACENTES QUE SÃO ORIGEM E DESTINO - TECLA ;
        // #####################################################################

        var toggle_pv = 0;
        var no_sel_pv = [];
        var ar_adj = [];
        var temp_to = [];
        var temp_from = [];

        document.addEventListener('keydown', (event) => {

            // O SCRIPT FOI INICIALMENTE CONCEBIDO PARA SER USADO COM MAIS DE UM NÓ SELECIONADO. DEPOIS AJUSTAMOS PARA APENAS UM NÓ SELECIONADO
            if (event.key == ";") {



                if (toggle_pv == 0 && network.getSelectedNodes().length != 1) {
                    tempAlert(`Tecla ${event.key} - Selecione um nó para aplicar a função`, 3000);
                    return;
                }



                // EXECUTA APENAS NA PRIMEIRA VEZ QUE A TECLA ; É PRESSIONADA OU QUANDO toggle_pv == 0
                if (toggle_pv == 0 && temp_to.length == 0 && temp_from.length == 0) {
                
                    // EXTRAI ARRAY COM NÓ SELECIONADO
                    no_sel_pv = network.getSelectedNodes();
                    
                    // EXTRAI TODAS AS ARESTAS ADJACENTES AOS NÓS SELECIONADOS
                    for (let i=0; i<no_sel_pv.length; i++) {
                        ar_adj.push(network.getConnectedEdges(no_sel_pv[i]));
                    }
            
                    // ELIMINA DUPLICIDADES NO ARRAY DE ARESTAS - atentar para o [0]
                    ar_adj = [...new Set(ar_adj[0])];

                    // EXTRAI NÓS DESTINO
                    for (let i=0; i<ar_adj.length; i++) {
                        if (network.body.edges[ar_adj[i]] != undefined) {
                            temp_to.push(network.body.edges[ar_adj[i]].toId);
                        }
                    }
                    temp_to = [...new Set(temp_to)];
                    temp_to = temp_to.filter(x => !no_sel_pv.includes(x));

                    // EXTRAI NÓS ORIGEM
                    for (let i=0; i<ar_adj.length; i++) {
                        if (network.body.edges[ar_adj[i]] != undefined) {
                            temp_from.push(network.body.edges[ar_adj[i]].fromId);
                        }
                    }
                    temp_from = [...new Set(temp_from)];
                    temp_from = temp_from.filter(x => !no_sel_pv.includes(x));

                    //console.log('atualização das variáveis');
                    //console.log('temp_from:', temp_from);
                    //console.log('temp_to:', temp_to);
                }

                

                // SELECIONA NÓS ADJACENTES QUE SÃO DESTINO DO NÓ SELECIONADO (PONTA DAS SETAS QUE SAEM -->)
                if (toggle_pv == 0 && no_sel_pv.length == 1 && temp_to.length > 0) {
                
                    network.unselectAll();
                    network.redraw();
                    network.selectNodes(temp_to);

                    let cn = network.getConnectedNodes(no_sel_pv[0]).length

                    // RETORNA COR CINZA PARA OS RÓTULOS DOS NÓS SELECIONADOS
                    for (let i=0; i<no_sel_pv.length; i++) {
                        nodes.update({id: no_sel_pv[i], font: {color: '#777777'}});
                    }
                    
                    toggle_pv = 1;

                    tempAlert(`Tecla ${event.key} - Seleciona nós adjacentes de DESTINO (-->) das arestas do selecionado (${temp_to.length}/${cn})`, 3000);



                } else if (toggle_pv == 0 && no_sel_pv.length == 1 && temp_to.length == 0) {

                    network.unselectAll();
                    network.redraw();
                    toggle_pv = 1;

                    let cn = network.getConnectedNodes(no_sel_pv[0]).length
                    
                    // RETORN COR CINZA PARA OS RÓTULOS DOS NÓS SELECIONADOS
                    for (let i=0; i<no_sel_pv.length; i++) {
                        nodes.update({id: no_sel_pv[i], font: {color: '#777777'}});
                    }

                    tempAlert(`Tecla ${event.key} - Seleciona nós adjacentes de DESTINO (-->) das arestas do selecionado (${temp_to.length}/${cn})`, 3000);

                    
                
                // SELECIONA NÓS ADJACENTES QUE CHEGAM NO NÓ-ALVO (ORIGEM)
                } else if (toggle_pv == 1 && no_sel_pv.length == 1 && temp_from.length > 0) {

                    // DESSELECIONA TODOS OS NÓS
                    network.unselectAll();
                    network.redraw();
                    network.selectNodes(temp_from);

                    let cn = network.getConnectedNodes(no_sel_pv[0]).length

                    // RETORN COR CINZA PARA OS RÓTULOS DOS NÓS SELECIONADOS
                    for (let i=0; i<no_sel_pv.length; i++) {
                        nodes.update({id: no_sel_pv[i], font: {color: '#777777'}});
                    }
                
                    toggle_pv = 2;
                    
                    tempAlert(`Tecla ${event.key} - Seleciona nós adjacentes de ORIGEM (<--) das arestas do nó selecionado (${temp_from.length}/${cn})`, 3000);




                } else if (toggle_pv == 1 && no_sel_pv.length == 1 && temp_from.length == 0) {
                    
                    network.unselectAll();
                    network.redraw();
                    toggle_pv = 2;

                    let cn = network.getConnectedNodes(no_sel_pv[0]).length

                    // RETORN COR CINZA PARA OS RÓTULOS DOS NÓS SELECIONADOS
                    for (let i=0; i<no_sel_pv.length; i++) {
                        nodes.update({id: no_sel_pv[i], font: {color: '#777777'}});
                    }

                    tempAlert(`Tecla ${event.key} - Seleciona nós adjacentes de ORIGEM (<--) das arestas dos nó selecionado (${temp_from.length}/${cn})`, 3000);


            
                // VOLTA A SELECIONAR OS NÓS ORIGINAIS
                } else if (toggle_pv == 2 && no_sel_pv.length == 1) {
                
                    network.unselectAll();
                    network.selectNodes(no_sel_pv);
            
                    // REINICIALIZA VARIÁVEIS
                    toggle_pv = 0;
                    no_sel_pv = [];
                    ar_adj = [];
                    temp_to = [];
                    temp_from = [];
            
                    tempAlert(`Tecla ${event.key} - Retorna à seleção inicial (${network.getSelectedNodes().length})`, 3000);
                }

            }

            // USADO APENAS PARA TESTES
            //console.log(toggle_pv);
            //console.log(no_sel_pv);
            //console.log(network.getSelectedNodes().length);

        })



        // ##########################################################
        // SELECIONA NÓS ADICIONADOS NA REQUISIÇÃO ANTERIOR - TECLA /
        // ##########################################################

        var toggle_bar = 0;

        document.addEventListener('keydown', (event) => {

            if (event.key == "/" && toggle_bar == 0 && network.getSelectedNodes().length == 0) {

                let nn = nodes.getIds()
                let li = []
                for (let i=0; i<nn.length; i++) {
                    if (network.body.nodes[nn[i]].options.z_novo == '1') {
                        li.push(nn[i])
                    }
                }
                network.selectNodes(li);

                toggle_bar = 1;

                tempAlert(`Tecla ${event.key} - Seleciona nós adicionados na requisição anterior (${li.length}/${nn.length})`, 3000);
            
            } else if (event.key == "/" && toggle_bar == 1) {
                let nn = nodes.getIds()
                network.unselectAll();
                toggle_bar = 0;
                tempAlert(`Tecla ${event.key} - Desseleciona todos os nós (${nn.length})`, 3000);
            }

        });



        // ##################################################
        // SELECIONA NÓS POR TIPO DE IMAGEM - TECLA . (PONTO)
        // ##################################################

        // 15 itens (0 a 14)
        var img_names2 = ['pf_homem.png',
                        'pf_homem_com_bandeira.png',
                        'pf_mulher.png',
                        'pf_mulher_com_bandeira.png',
                        'pj_brasil_ativa.png',
                        'pj_brasil_ativa_com_bandeira.png', 
                        'pj_brasil_inativa.png',
                        'pj_brasil_inativa_com_bandeira.png',
                        'pj_exterior_ativa.png',
                        'pj_exterior_ativa_com_bandeira.png', 
                        'pj_exterior_inativa.png', 
                        'pj_exterior_inativa_com_bandeira.png', 
                        'endereco.png', 
                        'telefone.png',
                        'email.png'
                        ]

        var cont_t2 = 0
        var temp_t2 = nodes.getIds();

        document.addEventListener('keydown', (event) => {
            
            //if (event.key == '.' && network.physics.options.solver == 'barnesHut') {
            if (event.key == '.') {
                                    
                if (cont_t2 == 0) {
                    network.unselectAll();
                    let temp = [];
                    let nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[0]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona homens (${temp.length}/${nodes.getIds().length})`, 3000);
                    

                    
                } else if (cont_t2 == 1) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[1]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona homens com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t2 == 2) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[2]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona mulheres (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t2 == 3) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[3]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona mulheres com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t2 == 4) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[4]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona PJs ativas domiciliadas no Brasil (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t2 == 5) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[5]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona PJs ativas domiciliadas no Brasil com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t2 == 6) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[6]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona PJs inativas domiciliadas no Brasil (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t2 == 7) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[7]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona PJs inativas domiciliadas no Brasil com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);
                

                } else if (cont_t2 == 8) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[8]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona PJs ativas domiciliadas no exterior (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t2 == 9) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[9]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona PJs ativas domiciliadas no exterior com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t2 == 10) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[10]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona PJs inativas domiciliadas no exterior (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t2 == 11) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[11]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona PJs inativas domiciliadas no exterior com bandeira vermelha (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t2 == 12) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[12]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona endereços (${temp.length}/${nodes.getIds().length})`, 3000);

                    
                } else if (cont_t2 == 13) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[13]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona telefones (${temp.length}/${nodes.getIds().length})`, 3000);


                } else if (cont_t2 == 14) {
                    network.unselectAll();
                    temp = [];
                    nos = [];
                    for (var i = 0; i < temp_t2.length; i++) {

                        // CASO O NÓ TENHA SIDO DELETADO
                        if (network.body.nodes[temp_t2[i]] == undefined) {
                            continue
                        }

                        if (network.body.nodes[temp_t2[i]].options.image.split('\\').at(-1) == img_names2[14]) {
                            nos.push(temp_t2[i]);
                            temp.push(temp_t2[i]);
                        }
                    }
                    network.selectNodes(nos);
                    cont_t2 = cont_t2 + 1;
                    tempAlert(`Tecla ${event.key} - Seleciona e-mails (${temp.length}/${nodes.getIds().length})`, 3000);

                    
                } else if (cont_t2 == 15) {
                    network.unselectAll();
                    cont_t2 = 0;
                    tempAlert(`Tecla ${event.key} - Desseleciona todos os nós (${temp_t.length})`, 3000);
                }
            }
        });



        // ###################################################################
        // ABRE POPUP COM RÓTULOS DAS ARESTAS SELECIONADAS - TECLA , (VÍRGULA)
        // ###################################################################

        var popup;
        var nn;

        // EXECUTA FUNÇÃO createPopup SE HOUVER NÓ SELECIONADO, PASSANDO COMO PARÂMETRO O ARRAY DOS NÓS SELECIONADOS (nn)
        document.addEventListener("keydown", function(event) {
        if (event.key === ",") {
            nn = network.getSelectedNodes();
            if (nn.length > 0) {
                createPopup(nn);
                tempAlert(`Tecla ${event.key} - Abre popup com nós selecionados (${nn.length})`, 3000);
            } else if (nn.length == 0) {
                tempAlert(`Tecla ${event.key} - Selecione um ou mais nós para abrir popup contendo nós selecionados`, 3000);
            }
        }
        });


        // DECLARA FUNÇÃO QUE CRIA POPUP
        function createPopup(nn) {

        let lista_ids = [];

        // EXTRAI ARRAY DE RÓTULOS (labels)
        let labels = nn.map(function(nodeId) {
            let node = network.body.data.nodes.get(nodeId);
            lista_ids.push(node.id + '_' + node.label);
        });


        // ordena os labels conforme especificação
        lista_ids.sort(function(a, b) {
            let order = ["PF_", "PJ_", "PE_", "EN_", "TE_", "EM_"];
            let aIndex = order.findIndex(function(prefix) {
            return a.startsWith(prefix);
            });
            let bIndex = order.findIndex(function(prefix) {
            return b.startsWith(prefix);
            });
            return aIndex - bIndex;
        });

        let popupText = "";
        let prefix_atual = '';
            
        let lista_pf = [];
        let lista_pj = [];
        let lista_pe = [];
        let lista_en = [];
        let lista_te = [];
        let lista_em = [];
            
        for (let i=0; i<lista_ids.length; i++) {

            if (lista_ids[i].split('_')[0] == 'PF') {
                lista_pf.push(lista_ids[i].split('_')[2]);
            }

            if (lista_ids[i].split('_')[0] == 'PJ') {
                lista_pj.push(lista_ids[i].split('_')[2]);
            }

            if (lista_ids[i].split('_')[0] == 'PE') {
                lista_pe.push(lista_ids[i].split('_')[2]);
            }

            if (lista_ids[i].split('_')[0] == 'EN') {
                lista_en.push(lista_ids[i].split('_')[2]);
            }

            if (lista_ids[i].split('_')[0] == 'TE') {
                lista_te.push(lista_ids[i].split('_')[2]);
            }

            if (lista_ids[i].split('_')[0] == 'EM') {
                lista_em.push(lista_ids[i].split('_')[2]);
            }
        }

        lista_pf.sort();
        lista_pj.sort();
        lista_pe.sort();
        lista_en.sort();
        lista_te.sort();
        lista_em.sort();

        if (lista_pf.length > 0) {
            popupText += `<b>PF (${lista_pf.length})</b><br>${lista_pf.join("<br>")}<br><br>`;
        }

        if (lista_pj.length > 0) {
            popupText += `<b>PJ (${lista_pj.length})</b><br>${lista_pj.join("<br>")}<br><br>`;
        }

        if (lista_pe.length > 0) {
            popupText += `<b>PE (${lista_pe.length})</b><br>${lista_pe.join("<br>")}<br><br>`;
        }

        if (lista_en.length > 0) {
            popupText += `<b>EN (${lista_en.length})</b><br>${lista_en.join("<br>")}<br><br>`;
        }

        if (lista_te.length > 0) {
            popupText += `<b>TE (${lista_te.length})</b><br>${lista_te.join("<br>")}<br><br>`;
        }

        if (lista_em.length > 0) {
            popupText += `<b>EM (${lista_em.length})</b><br>${lista_em.join("<br>")}<br><br>`;
        }
            
        if (!popup || popup.closed) {
            popup = window.open('', target="_blank", windowFeature='left=50,top=50,width=700,height=400,scrollbars=1');

            var link = popup.document.createElement('link');
            link.rel = 'icon';
            link.href = 'favicon.ico';
            popup.document.head.appendChild(link);

            popup.document.write("<html><head><title>SINARC - Nós Selecionados</title><style>body{font-family: Arial, sans-serif; font-size: 14px; color: #333; line-height: 1.5; padding: 10px;} b{font-size: 16px; font-weight: bold;}<\/style><\/head><body><\/body><\/html>");
        }

        var popupBody = popup.document.body;
        popupBody.innerHTML = `<b>NÓS SELECIONADOS (${lista_ids.length}):</b><br><br>` + popupText;
        }

        //network.on("click", function(params) {
        //if (popup) {
        //    popup.close();
        //}
        //});



        // ##############################################
        // AUMENTA A MASSA DOS NÓS SELECIONADOS - TECLA ]
        // ##############################################

        // var par_n2 = 1

        // document.addEventListener('keydown', (event) => {

        //     if (event.key == ']' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length > 0) {

        //         if (network.physics.adaptiveTimestepEnabled == false) {
        //             network.setOptions({"nodes": {"physics": true}});
        //         }
                
        //         let nod = network.getSelectedNodes();

        //         for (let i=0; i<nod.length; i++) {

        //             let size = network.body.nodes[nod[i]].options.size

        //             // Aumenta a massa em 5 unidades
        //             nodes.update({
        //                 id: nod[i],
        //                 mass: par_n2 + 5
        //             });
        //         }

        //         // Atualiza variável
        //         par_n2 = par_n2 + 5

        //         network.redraw();
            
        //         // Exibe informações na tela
        //         tempAlert(`Tecla ${event.key} - Aumenta massa dos nós selecionados em 5 unidades. Fator: ${par_n2} (${network.getSelectedNodes().length})`, 3000);
            
        //     } else if (event.key == ']' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length == 0) {
        //         tempAlert(`Tecla ${event.key} - Selecione um ou mais nós para aumentar suas massas em 5 unidades`, 3000);
        //     }
        // })


        document.addEventListener('keydown', (event) => {

            if (event.key == ']' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length > 0) {

                if (network.physics.adaptiveTimestepEnabled == false) {
                    network.setOptions({"nodes": {"physics": true}});
                }
                
                let nod = network.getSelectedNodes();
                let firstNodeMass = 0;

                for (let i=0; i<nod.length; i++) {
                    let currentMass = network.body.nodes[nod[i]].options.mass;
                    let newMass = currentMass + 5;

                    // Aumenta a massa em 5 unidades
                    nodes.update({
                        id: nod[i],
                        mass: newMass
                    });

                    if (i === 0) {
                        firstNodeMass = newMass;
                    }
                }

                network.redraw();
            
                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Aumenta massa dos nós selecionados em 5 unidades (${network.getSelectedNodes().length})`, 3000);
            
            } else if (event.key == ']' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length == 0) {
                tempAlert(`Tecla ${event.key} - Selecione um ou mais nós para aumentar suas massas em 5 unidades`, 3000);
            }
        })



        // ###############################################
        // DIMINUI A MASSA DOS NÓS SELECIONADOS - TECLAS [
        // ###############################################

        // document.addEventListener('keydown', (event) => {

        //     if (event.key == '[' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length > 0) {

        //         if (network.physics.adaptiveTimestepEnabled == false) {
                    network.setOptions({"nodes": {"physics": true}});
        //         }

        //         //if ((par_n2 - 5) <= 1) {
        //         //    par_n2 = 1;
        //         //}

        //         par_n2 = par_n2 - 5

        //         if (par_n2 <= 1) {
        //             par_n2 = 1
        //         }
                
        //         let nod = network.getSelectedNodes();

        //         for (let i=0; i<nod.length; i++) {

        //             let size = network.body.nodes[nod[i]].options.size

        //             // Diminui a massa em 5 unidades
        //            nodes.update({
        //                 id: nod[i],
        //                 //mass: par_n2 - 5
        //                 mass: par_n2
        //             });
        //         }

        //         // Atualiza a variável
        //         //par_n2 = par_n2 - 5

        //         //if (par_n2 <= 1) {
        //         //    par_n2 = 1
        //         //}

        //         // Exibe informações na tela
        //         tempAlert(`Tecla ${event.key} - Diminui massa dos nós selecionados em 5 unidades. Fator: ${par_n2} (${network.getSelectedNodes().length})`, 3000);

        //         network.redraw();

        //     } else if (event.key == '[' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length == 0) {
        //         tempAlert(`Tecla ${event.key} - Selecione um ou mais nós para diminuir suas massas em 5 unidades`, 3000);
        //     }

        // })


        document.addEventListener('keydown', (event) => {

            if (event.key == '[' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length > 0) {

                if (network.physics.adaptiveTimestepEnabled == false) {
                    network.setOptions({"nodes": {"physics": true}});
                }
                
                let nod = network.getSelectedNodes();
                let firstNodeMass = 0;

                for (let i=0; i<nod.length; i++) {
                    let currentMass = network.body.nodes[nod[i]].options.mass;
                    let newMass = currentMass - 5;

                    if (newMass < 1) {
                        newMass = 1;
                    }

                    // Diminui a massa em 5 unidades
                    nodes.update({
                        id: nod[i],
                        mass: newMass
                    });

                    if (i === 0) {
                        firstNodeMass = newMass;
                    }
                }

                // Exibe informações na tela
                tempAlert(`Tecla ${event.key} - Diminui massa dos nós selecionados em 5 unidades (${network.getSelectedNodes().length})`, 3000);

                network.redraw();

            } else if (event.key == '[' && network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length == 0) {
                tempAlert(`Tecla ${event.key} - Selecione um ou mais nós para diminuir suas massas em 5 unidades`, 3000);
            }

        })



        // ############################################
        // GERA CÓPIA DO GRAFO COM ALTERAÇÕES - TECLA !
        // ############################################

        document.addEventListener('keydown', (event) => {

            if (event.key == '!') {
                
                async function copyOperation(param) {
                    await navigator.clipboard.writeText(param)
                };

                setTimeout(() => {copyOperation('***atualizar_grafo***')}, 0)

                tempAlert(`Tecla ${event.key} - Gera novo arquivo HTML com configuração atual do grafo`, 3000);
            }
        });




        // ###############################
        // EXIBE ATALHOS NA TELA - TECLA ?
        // ###############################

        var el_3 = '';
        var toggle_int = 0;

        document.addEventListener('keydown', (event) => {

            if(event.key == "?" && toggle_int == 0){

                let ajuste_tela = "ATALHOS:<br>Ajuste da tela: F11 b<br>";
                let posicao = "Posição dos nós: F5 k K f p Clique+Arrasto Shift+(L/R) ] [ m M Espaço n N Shift+(U/D)<br>";
                let selecao = "Seleção dos nós: Clique Ctrl+Clique a A ç Ç I j J q Q . ; /<br>";
                let visualizacao = "Visualização de nós e arestas: Esc BotãoDeRolagem c e l i t T V z<br>";
                let cor = "Cor dos nós: x X w v<br>";
                let sites = "Sites externos: d D g G 1 2 4 5 6 7 8<br>";
                let delecao = "Deleção de nós: Del r R W<br>";
                let consulta = "Consulta à base de dados: o O s y<br>";
                let outras = "Outras funções: h ? L u U + - , |";

                el_3 = document.createElement("div");
                
                el_3.setAttribute("style","position:absolute; top:30px; left:21px; border:5px solid rgba(178, 255, 178, 0); border-radius: 5px; background-color:rgba(178, 255, 178, 0); font-size: 18px; color: rgba(59, 190, 30, 1); font-family: serif; background-color: rgba(59, 190, 30, 0.05); border-radius: 5px");
                
                el_3.innerHTML = ajuste_tela + posicao + selecao + visualizacao + cor + sites + delecao + consulta + outras;
                
                document.body.appendChild(el_3);

                el_3.style.opacity = "1.0";

                toggle_int = 1

                tempAlert(`Tecla ${event.key} - Exibe teclas de atalhos`, 3000);

            } else if (event.key == "?" && toggle_int == 1) {

                el_3.style.display = "none";

                toggle_int = 0

                tempAlert(`Tecla ${event.key} - Oculta teclas de atalhos`, 3000);

            }
        });

        

    
        // ################################
        // DESSELECIONA TODOS OS NÓS
        // ################################

        network.on('click', (event) => {

            let sel = network.getSelectedNodes();
            //let n = nodes.getIds().length;

            // Quando se clica no fundo, sel.length fica igual a 0 (truque)
            if (sel.length == 0) {
                network.unselectAll();
                
                //con_nodes_a = [];
                sel_anterior = [];
                
                // EXTRAÍDO DA TECLA A
                //temp_a = [];

                // VARIÁVEL DECLARADA NO SCRIPT DA TECLA q
                target_id = [];
                con = [];

                // Exibe informações na tela
                //if (sel_anterior.length > 0) {
                tempAlert(`Clique na área do grafo - Desseleciona todos os nós (${nodes.getIds().length})`, 3000);
                //}
            }

            // Exibe informações na tela
            //if (sel.length > 0) {
            //    tempAlert(`Clique na área do grafo - Desseleciona todos os nós`, 3000);
            //}

            // Limpa variável global 'sel_anterior' do script da TECLA 'a', para não continuar a sequência de seleção do ponto onde parou
            sel_anterior = [];

            // Limpa vairávels globais do script da TECLA ';', para não reiniciar a sequência de seleção do ponto onde parou
            toggle_pv = 0;
            no_sel_pv = [];
            ar_adj = [];
            temp_to = [];
            temp_from = [];

        });



        // ############################################################
        // DESSELECIONA ARESTAS DE NÓS DESSELECIONADOS COM CTRL + CLICK
        // ############################################################

        
        // AO SAIR DE CIMA DO NÓ E EVENTUALMENTE TER DESSELECIONADO O RESPECTIVO NÓ
        network.on('blurNode', function f(params) {

            // OBTÉM LISTA DE NÓS SELECIONADOS (O QUE ACABOU DE SER DESSELECIONADO NÃO APARECE NESTA LISTA)
            let ns = network.getSelectedNodes();

            // DESSELECIONA TUDO
            //network.unselectAll();
            //network.redraw();

            // SELECIONA APENAS NÓS MANTIDOS SELECIONADOS APÓS DESS
            //console.log(ns);
            network.selectNodes(ns);

        });
        


        /*
        // Variáveis para controle de debounce e batch
        let blurDebounceTimer = null;
        let pendingEdgeUpdates = [];

        // AO SAIR DE CIMA DO NÓ
        network.on('blurNode', function f(params) {
            
            // 1. CANCELA TIMER ANTERIOR (evita acúmulo de updates)
            if (blurDebounceTimer) {
                clearTimeout(blurDebounceTimer);
            }
            
            // 2. COLETA DADOS NECESSÁRIOS (operação rápida, < 5ms)
            let ns = network.getSelectedNodes();
            let nodeId = params.node;
            
            // 3. OBTÉM ARESTAS CONECTADAS AO NÓ QUE FOI DESSELECIONADO
            // Usa Set para evitar duplicatas automaticamente
            let arestasConectadas = new Set(network.getConnectedEdges(nodeId));
            
            // 4. FILTRA APENAS ARESTAS QUE PRECISAM SER ATUALIZADAS
            // (Evita atualizar arestas que já estão com a cor correta)
            let arestasParaAtualizar = [];
            
            arestasConectadas.forEach(arestaId => {
                let aresta = edges.get(arestaId);
                if (aresta && aresta.color && aresta.color !== COR_ORIGINAL) {
                    arestasParaAtualizar.push({
                        id: arestaId,
                        color: COR_ORIGINAL  // Ou: { color: COR_ORIGINAL }
                    });
                }
            });
            
            // 5. ACUMULA UPDATES PENDENTES
            pendingEdgeUpdates = [...pendingEdgeUpdates, ...arestasParaAtualizar];
            
            // Remove duplicatas (mantém apenas o último update por aresta)
            let updateMap = new Map();
            pendingEdgeUpdates.forEach(update => {
                updateMap.set(update.id, update);
            });
            pendingEdgeUpdates = Array.from(updateMap.values());
            
            // 6. AGENDA PROCESSAMENTO EM BATCH (debounce)
            blurDebounceTimer = setTimeout(() => {
                
                if (pendingEdgeUpdates.length > 0) {
                    // 🚀 UPDATE EM BATCH - APENAS 1 OPERAÇÃO!
                    edges.update(pendingEdgeUpdates);
                    
                    // ❌ NÃO CHAME network.redraw()! 
                    // O Vis.js já faz redraw automaticamente após edges.update()
                    
                    console.log(`✓ Batch update: ${pendingEdgeUpdates.length} arestas`);
                    
                    pendingEdgeUpdates = [];
                }
                
                blurDebounceTimer = null;
                
            }, 50);  // 50ms é suficiente para agrupar blurs rápidos sem parecer lento
        });
        */



        // ###############################################################################################
        // AUMENTA E DIMINUI TAMANHO REFERNCIAL DOS NÓS - TECLAS SHIFT + 'ARROW UP' / SHIFT + 'ARROW DOWN'
        // ###############################################################################################

        var t_ref = 40

        document.addEventListener('keydown', (event) => {

            if ((event.shiftKey && event.key == 'ArrowUp') || event.key === '>') {

                if (t_ref < 100) {
                    t_ref = t_ref + 5
                }

//                if (screen_height == 0) {
//                    let element = document.getElementById("mynetwork");
//                    let canvas = element.querySelector('canvas');
//                    screen_height = parseInt(canvas.getAttribute('height'));
//                }
//                element = document.getElementById("mynetwork");
//                screen_height = screen_height + 10;
//                element.style.height = screen_height.toString() + 'px';
                //console.log(screen_height);

                //alert(`Tamanho referencial do no para ativacao da tecla n: ${t_ref}`)
                //console.log(t_ref)
                network.redraw();

                // Exibe informações na tela (não está exibindo)
                tempAlert(`Teclas Shift + ${event.key} - Aumenta tamanho referencial dos nós em 5 unidades (${t_ref})`, 3000);

            } else if ((event.shiftKey && event.key == 'ArrowDown') || event.key === '<'){
                
                if (t_ref > 20) {
                    t_ref = t_ref - 5
                }
                
//                if (screen_height == 0) {
//                    let element = document.getElementById("mynetwork");
//                    let canvas = element.querySelector('canvas');
//                    screen_height = parseInt(canvas.getAttribute('height'));
//                }
//                element = document.getElementById("mynetwork");
//                screen_height = screen_height - 10;
//                element.style.height = screen_height.toString() + 'px';
                //console.log(screen_height);

                //alert(`Tamanho referencial do no para ativacao da tecla n: ${t_ref}`)
                //console.log(t_ref)
                network.redraw();

                // Exibe informações na tela (não está exibindo)
                tempAlert(`Teclas Shift + ${event.key} - Diminui tamanho referencial dos nós em 5 unidades (${t_ref})`, 3000);

            }
        });



        // ###############################################
        // DESSELECIONA TODOS OS NÓS - TECLAS 'ARROW DOWN'
        // ###############################################

        //document.addEventListener('keydown', (event) => {

        //    if (event.key == "ArrowDown") {
        //        network.unselectAll();
        //        network.redraw();

        //    }

        //})



        // ###########################################################################################
        // AUMENTA E DIMINUI A TAMANHO DA ARESTA - TECLAS SHIFT + 'ARROW LEFT' / SHIFT + 'ARROW RIGHT'
        // ###########################################################################################

        var tamanho_aresta = 300
        document.addEventListener('keydown', (event) => {

            if (event.shiftKey && event.key == 'ArrowRight'){
                tamanho_aresta += 30;
                network.setOptions({"edges": {"length": tamanho_aresta}});

                // Exibe informações na tela (não está exibindo)
                tempAlert(`Teclas Shift + ${event.key} - Aumenta tamanho das arestas em 30 unidades (${tamanho_aresta})`, 3000);
                
            } else if (event.shiftKey && event.key == 'ArrowLeft') {
                tamanho_aresta -= 30;
                network.setOptions({"edges": {"length": tamanho_aresta}});

                // Exibe informações na tela (não está exibindo)
                tempAlert(`Teclas Shift + ${event.key} - Diminui tamanho das arestas em 30 unidades (${tamanho_aresta})`, 3000);
            }
        });



        // ########################################################
        // MUDA COR DO TEXTO DO NÓ PARA VERMELHO QUANDO SELECIONADO
        // ########################################################

        network.on("select", function (params) {

            // Reseta variável de controle da massa
            // par_n2 = 1;

            let selectedNodeId2 = params.nodes;
            //console.log('selected:', selectedNodeId2);
            for (id in params.nodes) {
                let node = network.body.nodes[params.nodes[id]];
                //console.log('node:', node);
                node.setOptions({
                    font: {
                    color: "#ff0000"
                    }
                });
            }

            // Exibe informações na tela
            let temp = network.getSelectedNodes();

            let tamanho = ''
            let massa2 = ''
            let grupo = ''
            if (network.getSelectedNodes().length == 1) {
                let temp_t = Math.round(network.body.nodes[params.nodes[id]].options.size * 100) / 100
                //tamanho = `. Tamanho: ${network.body.nodes[params.nodes[id]].options.size}`
                tamanho = `. Tamanho: ${temp_t}`
                
                massa2 = `. Massa: ${Math.round(network.body.nodes[params.nodes[id]].options.mass * 100) / 100}`
                //Math.round(num * 100) / 100

                grupo = `. Grupo: ${network.body.nodes[params.nodes[id]].options.z_group}/${network.body.nodes[params.nodes[id]].options.z_group_total}`
            }
            
            tempAlert(`Clique sobre nó - Seleciona nó (${temp.length})${tamanho}${massa2}${grupo}`, 3000);

        });

        /*
        network.on("deselectNode", function (params) {
            let deselectedNodeId2 = params.previousSelection.nodes; // ACRESCENTEI ['id']
            if (deselectedNodeId2.length > 100) { // DESSELECIONA TUDO DE UMA SÓ VEZ A PARTIR DE 100 NÓS SELECIONADOS
                network.unselectAll();
                return;
            }
            //console.log('deselected:', deselectedNodeId2);
            for (id in params.previousSelection.nodes) {
                let node = network.body.nodes[params.previousSelection.nodes[id]['id']];
                //console.log('node:', node);
                
                // INCLUÍDO POR DAR ERRO 'id' UNDEFINED
                if (node != undefined) { 
                    nodes.update({id: node['id'], // deselectedNodeId
                            font: {
                                color: '#777777'
                            },
                    });
                } 
                // INCLUIDO POR DAR ERRO 'id' UNDEFINED
            }
        });
        */




        network.on("deselectNode", function (params) {
            let deselectedNodes = params.previousSelection.nodes;
            
            // Coleta todas as atualizações em um array
            let updates = [];
            for (let id in deselectedNodes) {
                let nodeId = deselectedNodes[id]['id'];
                if (nodeId != undefined) {
                    updates.push({ id: nodeId, font: { color: '#777777' }});
                }
            }
            
            // Uma única chamada em lote (funciona para 1, 100 ou 1000 nós)
            if (updates.length > 0) {
                nodes.update(updates);
            }
        });



        // ############################################################
        // APROXIMA NÓ SELECIONADO QUANDO CLICA SOBRE ELE - DUPLO CLICK
        // ############################################################

//        function esconde() {
//            network.setOptions({nodes: {scaling: {label: {enabled: true, drawThreshold: 100}}}, edges: {hidden: true}});
//        }
//        function exibe() {
//            network.setOptions({nodes: {scaling: {label: {enabled: true, drawThreshold: 8}}}, edges: {hidden: false}});
//        }

//        network.on('doubleClick', function() {

            // SÓ FUNCIONA NO LAYOUT BARNES-HUT E COM APENAS UM NÓ SELECIONADO
//            if (network.physics.options.solver == 'barnesHut' && network.getSelectedNodes().length == 1) {

//                // Evita compartamento errático no modo transparência (arestas são exibidas)
//                if (toggle_t == false) {
//                    return;
//                }            

//                let ss = network.getSelectedNodes();
//                if (ss.length == 1 ) {
//                    network.setOptions({physics: {enabled: false}});
//                    let p = '';
//                    let num = 0;
//                    num = 700 + nodes.length / 10;
//                    //console.log(num + 'ms');
//                    for (let i=0; i<ss.length; i++) {
//                        esconde();
//                        p = network.getPosition(ss[i]);
//                        network.moveTo({
//                            position: {x: p['x'], y: p['y']},
//                            scale: 1,
//                            offset: {x:0, y:0},
//                            animation: {
//                            duration: 500,
//                            easingFunction: 'linear'
//                            }
//                        });
//                        setTimeout(exibe, num);
//                        network.releaseNode();
//                    }
//                    network.setOptions({physics: {enabled: true}});

                // ###################################

//                let ss = network.getSelectedNodes();
                //if (ss.length == 1 ) {

                // DESABILITA ELEMENTOS PARA EVITAR TRAVAMENTO DA IMAGEM (MELHROA DESEMPENHO)
//                network.physics.physicsEnabled = false;
//                network.physics.stopSimulation();
                //network.setOptions({"edges": {"hidden": true}});
                //network.setOptions({nodes: {scaling: {label: {enabled: true, drawThreshold: 100}}}});
                
                // FÓRMULA QUE CALCULA O TEMPO DE TRANSIÇÃO. USADO TAMBÉM NA FUNÇÃO setTimeout
//                let time = 1000;
//                if (1000 + nodes.getIds().length - 500 < 1000) {
//                    time = 1000;
//                } else {
//                    time = 1000 + nodes.getIds().length - 1000;
//                }

                // PARTE PRINCIPAL
//                for (let i=0; i<ss.length; i++) {
//                    p = network.getPosition(ss[i]);
//                    network.moveTo({
//                        position: {x: p['x'], y: p['y']},
//                        scale: 1,
//                        offset: {x:0, y:0}
                        //animation: {
                        //duration: time,
                        //easingFunction: 'linear'
                        //}
//                    });
//                }
                //network.fit({nodes: con_nodes, maxZoomLevel: 1, animation: {duraton: time}});

                // FUNÇÃO EXECUTADA APÓS A PARTE PRINCIPAL
//                function f2() {

                    // REABILITA RECURSOS APÓS PARTE PRINCIPAL
                    //network.setOptions({physics: {enabled: true}});
//                    network.setOptions({"edges": {"hidden": false}});
//                    network.setOptions({nodes: {scaling: {label: {enabled: true, drawThreshold: 8}}}});
//                }
                
                //setTimeout(f2, time + 100);

                //setTimeout(network.physics.stopSimulation, time + 200);





//                }
//            }
//        });



        // ##################################
        // ALTERA FLATICON E TÍTULO DA PÁGINA
        // ##################################
        var link = document.querySelector("link[rel~='icon']");
        if (!link) {
            link = document.createElement('link');
            link.rel = 'icon';
            document.getElementsByTagName('head')[0].appendChild(link);
        }
        //link.href = 'https://cdn-icons-png.flaticon.com/512/4803/4803070.png';
        
        // Colocar logo na pasta do arquivo sinarc.py
        link.href = 'logo.png';
        

        // EXTRAI NÚMERO DE CAMADAS SOLICITADAS
        var no_pj = nodes.getIds();
        var n_cam = '';
        for (let i=0; i < no_pj.length; i++) {
            if (no_pj[i].slice(0, 3) == 'PJ_') {
                n_cam = network.body.nodes[no_pj[i]].options.camadas_solicitadas;
                //console.log(n_cam);
                break;
            };
        };



        // EXTRAI NÚMERO DE NÓS E FORMATA PARA STRING
        // https://stackoverflow.com/questions/9461621/format-a-number-as-2-5k-if-a-thousand-or-more-otherwise-900
        function nFormatter(num, digits) {
            const lookup = [
                { value: 1, symbol: "" },
                { value: 1e3, symbol: "k" },
                { value: 1e6, symbol: "M" },
                { value: 1e9, symbol: "G" },
                { value: 1e12, symbol: "T" },
                { value: 1e15, symbol: "P" },
                { value: 1e18, symbol: "E" }
            ];
            const rx = /\.0+$|(\.[0-9]*[1-9])0+$/;
            var item = lookup.slice().reverse().find(function(item) {
                return num >= item.value;
            });
            return item ? (num / item.value).toFixed(digits).replace(rx, "$1") + item.symbol : "0";
        }

        let temp = ''
        temp = nFormatter(nodes.getIds().length, 1);

        //let datt = new Date();
        //let hora = datt.getHours();
        //let minuto = datt.getMinutes();
        //document.title = n_cam + '/' + temp + ' SINARC ' + hora + ':' + minuto;

        document.title = n_cam + '/' + temp + ' SINARC';



        // ##############################################
        // AJUSTA ALTURA DA ÁREA DO GRAFO AUTOMATICAMENTE
        // ##############################################

        // Existe outra forma de ajustar a altura área do grafo: TECLA b

        /*
        function ajusta_altura() {

            // EXTRAI DIMENSÕES DA JANELA DO NAVEGADOR
            var w = window.innerWidth;
            let h = window.innerHeight;

            // AJUSTA ALTURA DA ÁREA DO GRAFO À ALTURA DA JANELA
            document.querySelector('#mynetwork').style.height = h - 20;

        };

        setTimeout(() => {ajusta_altura()}, 0);
        */


        function ajusta_altura() {

            // DIMENSÕES DA VIEWPORT
            let h = window.innerHeight;

            // AJUSTA O CONTAINER
            const container = document.querySelector('#mynetwork');
            container.style.height = (h - 20) + 'px';

            // AVISA O VIS.JS
            if (typeof network !== 'undefined') {
                network.redraw();
                network.fit({
                    animation: {
                        duration: 300,
                        easingFunction: "easeInOutQuad"
                    }
                });
            }
        }

        window.addEventListener('resize', () => {
            setTimeout(ajusta_altura, 200);
        });

        window.addEventListener('orientationchange', () => {
            setTimeout(ajusta_altura, 200);
        });

        setTimeout(() => { ajusta_altura(); }, 0);










        // ##########################
        // CENTRALIZA GRAFO NO INÍCIO
        // ##########################

        setTimeout(() => {
                    document.dispatchEvent(new KeyboardEvent('keydown', {key: 'Escape'}));
                }, 1000);



    
</script>
    




<!-- PARA TESTE NO CELULAR - INÍCIO -->

    <!-- Botão fixado no rodapé -->
    <div id="keyboard-toggle"></div>

    <!-- Campo de entrada invisível, mas funcional -->
    <input 
    type="text" 
    id="hidden-input" 
    style="
        position: fixed; 
        bottom: 60px; 
        left: 50%; 
        transform: translateX(-50%);
        opacity: 0; <!-- Estava em 0.01 -->
        height: 0; <!-- Estava em 20 -->
        width: 0;  <!-- Estava em 120 -->
        border: none; 
        background: transparent;
        z-index: -1; <!-- Estava em 9999 -->
        pointer-events: none;
    "
    autocomplete="off"
    autocorrect="off"
    autocapitalize="off"
    spellcheck="false"
    tabindex="-1"
    />

    <style>
    #keyboard-toggle {
        position: fixed;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        width: 120px;
        height: 15px;
        background: rgba(255, 255, 255, 0.7);
        border: 1px solid rgba(89, 201, 67, 0.6);
        border-radius: 4px;
        cursor: pointer;
        z-index: 9998;
        box-shadow: 0 1px 5px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        user-select: none;
    }

    #keyboard-toggle:hover {
        background: rgba(89, 201, 67, 0.15);
        border-color: rgba(89, 201, 67, 0.9);
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    #keyboard-toggle:active {
        background: rgba(89, 201, 67, 0.3);
    }
    </style>





    <script>
    const toggle = document.getElementById('keyboard-toggle');
    const hiddenInput = document.getElementById('hidden-input');

    toggle.addEventListener('click', () => {
        hiddenInput.focus();
    });
    </script>




    <!-- PARA TESTE NO CELULAR - FIM -->











    <!-- ===================================================== -->
    <!-- AUMENTA TAMANHO DOS NÓS COM HOVER                     -->
    <!-- ===================================================== -->
    
    <script>
        const tamanhosOriginais = {};
        const tamanhosFonteOriginais = {};
        const coresFonteOriginais = {};

        function animarTamanho(nodeId, inicio, fim, duracao = 200) {
            const node = network.body.nodes[nodeId];
            if (!node) return;

            if (node._animacaoId) {
                cancelAnimationFrame(node._animacaoId);
            }

            const inicioTempo = performance.now();
            const diferenca = fim - inicio;

            function frame(tempo) {
                const progresso = Math.min((tempo - inicioTempo) / duracao, 1);
                node.options.size = inicio + (diferenca * progresso);
                network.redraw();
                if (progresso < 1) {
                    node._animacaoId = requestAnimationFrame(frame);
                }
            }
            requestAnimationFrame(frame);
        }

        network.on("hoverNode", e => {
            if (network.physics.physicsEnabled === false) {
                const nodeId = e.node;
                const node = network.body.nodes[nodeId];
                if (!node || tecla_e_ativada) return;

                if (!tamanhosOriginais[nodeId]) {
                    tamanhosOriginais[nodeId] = node.options.size;
                }
                if (!tamanhosFonteOriginais[nodeId]) {
                    tamanhosFonteOriginais[nodeId] = (node.options.font && node.options.font.size) || (node.labelModule && node.labelModule.fontOptions.size) || 14;
                }
                if (!coresFonteOriginais[nodeId]) {
                    coresFonteOriginais[nodeId] = (node.options.font && node.options.font.color) || (node.labelModule && node.labelModule.fontOptions.color) || '#343434';
                }

                const tamanhoAlvo = tamanhosOriginais[nodeId] * 2;
                const fonteAlvo = tamanhosFonteOriginais[nodeId] * 2;

                const newOptions = {
                    font: {
                        size: fonteAlvo,
                        color: 'red'
                    }
                };
                node.setOptions(newOptions);
                animarTamanho(nodeId, node.options.size, tamanhoAlvo);
            }
        });

        network.on("blurNode", e => {
            if (network.physics.physicsEnabled === false) {
                const nodeId = e.node;
                const node = network.body.nodes[nodeId];
                if (!node || !tamanhosOriginais[nodeId] || tecla_e_ativada) return;

                const fonteOriginal = tamanhosFonteOriginais[nodeId];
                const corOriginal = coresFonteOriginais[nodeId];

                const newOptions = {
                    font: {
                        size: fonteOriginal,
                        color: corOriginal
                    }
                };
                node.setOptions(newOptions);
                animarTamanho(nodeId, node.options.size, tamanhosOriginais[nodeId]);
            }
        });

        // Restaura os nós para o estado original se a física for reativada
        // network.on("startStabilizing", () => {
        //     Object.keys(network.body.nodes).forEach(nodeId => {
        //         const node = network.body.nodes[nodeId];
        //         if (node._animacaoId) cancelAnimationFrame(node._animacaoId);
                
        //         if (tamanhosOriginais[nodeId]) {
        //             const newOptions = {
        //                 size: tamanhosOriginais[nodeId],
        //                 font: {
        //                     size: tamanhosFonteOriginais[nodeId],
        //                     color: coresFonteOriginais[nodeId]
        //                 }
        //             };
        //             node.setOptions(newOptions);
        //         }
        //     });
        //     network.redraw();
        // });
    </script>




    


    <!-- ===================================================== -->
    <!-- MARCA D'ÁGUA SINARC                                   -->
    <!-- ===================================================== -->
    <div id="sinarc-watermark">SINARC</div>

    <style>
    #sinarc-watermark {
        position: fixed;
        top: 40px;
        left: 65px;
        font-size: 15px;
        // font-weight: bold;
        font-family: Arial, sans-serif;
        color: rgba(204, 204, 204, 0.5); /* Cinza claro com 50% de opacidade */
        z-index: 9990; /* Abaixo do menu, mas acima do grafo */
        pointer-events: none; /* Permite clicar através da marca d'água */
        user-select: none; /* Impede que o texto seja selecionado */
    }
    </style>
    <!-- ===================================================== -->


    <!-- ===================================================== -->
    <!-- MENU SUSPENSO SINARC - COMANDOS DE TECLADO            -->
    <!-- Versão 2.0 com hover automático e simulação de teclas -->
    <!-- ===================================================== -->
    <!-- Este código deve ser inserido no arquivo sinarc.py    -->
    <!-- LOCALIZAÇÃO: Após a linha 8733 (antes de 






    <script>
    // ========================================
    // FUNÇÃO DE OTIMIZAÇÃO AUTOMÁTICA DO GRAFO
    // ========================================

    function otimizarGrafoAutomaticamente() {
        //console.log("🎯 OTIMIZAÇÃO AUTOMÁTICA - INICIANDO...");


        // ========================================
        // FORÇAR OPERAÇÃO COMO GRAFO DE 2 CAMADAS
        // ========================================
        
        

        // 0. RESETAR MASSA DOS NÓS ALTERADOS
        for (let i=0; i<n_bag.length; i++) {
            nodes.update({id: n_bag[i], mass: 1});
            // console.log('Reset mass for node id:', n_bag[i]);
        }
        // Limpa o array de nós já processados
        n_bag = [];
        
        // Reseta a referência de tamanho e o controle de primeira execução
        t_ref = 40;
        pula_100 = true;

        console.log("✓ Sistema de ajuste de massa resetado (todas as massas = 1)");



        // ========================================
        // ARMAZENA TAMANHOS ORIGINAIS (PRIMEIRA VEZ)
        // ========================================
        let nosIds = nodes.getIds();
        for (let i = 0; i < nosIds.length; i++) {
            let nodeId = nosIds[i];
            // Só armazena se ainda não existe (primeira vez)
            if (!tamanhosOriginais[nodeId]) {
                tamanhosOriginais[nodeId] = network.body.nodes[nodeId].options.size;
            }
        }

    
        // ========================================
        // VERIFICA SE É GRAFO DE 1 CAMADA
        // ========================================
        if (typeof n_cam !== 'undefined' && n_cam === 1) {
            console.log("✓ Grafo de 1 camada detectado - Pressionando K...");
            
            const evtK = new KeyboardEvent('keydown', {
                key: 'k', code: 'KeyK', keyCode: 75, which: 75,
                bubbles: true, cancelable: true, view: window
            });
            document.dispatchEvent(evtK);
            
            tempAlert('Grafo de 1 camada: aplicando layout hierárquico...', 2000);

            return;
        } else if (typeof n_cam === 'undefined' || n_cam > 1) {
            n_cam = 2;
        }

        
        // 1. CALCULAR DISTRIBUIÇÃO PRIMEIRO (antes de deletar nós)
        let todosNos = nodes.getIds();
        let distribuicao = {100:[], 95:[], 90:[], 85:[], 80:[], 75:[], 70:[], 65:[], 60:[], 55:[], 50:[], 45:[], 40:[], 35:[], 30:[], 25:[], 20:[]};
        
        for (let i = 0; i < todosNos.length; i++) {
            let nodeId = todosNos[i];
            let nodeIdStr = String(nodeId);
            
            // Ignora nós TE/EN/EM no cálculo (serão deletados)
            if (nodeIdStr.slice(0, 3) === "TE_" || nodeIdStr.slice(0, 3) === "EN_" || nodeIdStr.slice(0, 3) === "EM_") {
                continue;
            }
            
            // Usa tamanho original se existir, senão usa o atual
            let tamanho = tamanhosOriginais[nodeId] || network.body.nodes[nodeId].options.size;
            
            if (tamanho >= 99.99) distribuicao[100].push(nodeId);
            else if (tamanho >= 95) distribuicao[95].push(nodeId);
            else if (tamanho >= 90) distribuicao[90].push(nodeId);
            else if (tamanho >= 85) distribuicao[85].push(nodeId);
            else if (tamanho >= 80) distribuicao[80].push(nodeId);
            else if (tamanho >= 75) distribuicao[75].push(nodeId);
            else if (tamanho >= 70) distribuicao[70].push(nodeId);
            else if (tamanho >= 65) distribuicao[65].push(nodeId);
            else if (tamanho >= 60) distribuicao[60].push(nodeId);
            else if (tamanho >= 55) distribuicao[55].push(nodeId);
            else if (tamanho >= 50) distribuicao[50].push(nodeId);
            else if (tamanho >= 45) distribuicao[45].push(nodeId);
            else if (tamanho >= 40) distribuicao[40].push(nodeId);
            else if (tamanho >= 35) distribuicao[35].push(nodeId);
            else if (tamanho >= 30) distribuicao[30].push(nodeId);
            else if (tamanho >= 25) distribuicao[25].push(nodeId);
            else if (tamanho >= 20) distribuicao[20].push(nodeId);
        }
        
        console.log("DISTRIBUIÇÃO:", distribuicao);


        // 2. DELETAR NÓS TE, EN, EM (depois do cálculo)
        let nodosParaDeletar = [];
        
        for (let i = 0; i < todosNos.length; i++) {
            let nodeIdStr = String(todosNos[i]);

            if (nodeIdStr.slice(0, 3) === "TE_" || nodeIdStr.slice(0, 3) === "EN_" || nodeIdStr.slice(0, 3) === "EM_") {
                nodosParaDeletar.push(todosNos[i]);
            }
        }
        
        
        if (nodosParaDeletar.length > 0) {
            nodes.remove(nodosParaDeletar);
            console.log(`✓ ${nodosParaDeletar.length} nós deletados (TE/EN/EM)`);

            tempAlert(`Otimização: ${nodosParaDeletar.length} nós deletados`, 2000);
        }

        
        // 3. CALCULAR NÚMERO IDEAL DE PRESSIONAMENTOS
        // Conta apenas os nós que realmente entraram na distribuição (exclui TE/EN/EM)
        let totalNos = 0;
        for (let faixa in distribuicao) {
            totalNos += distribuicao[faixa].length;
        }
        let nosAcumulados = 0;
        let pressionamentosIdeal = 0;



        
        let faixas = [100, 95, 90, 85, 80, 75, 70, 65, 60, 55, 50, 45, 40, 35, 30, 25, 20];
        
        // =========================================================================
        // CONFIGURAÇÕES - AJUSTÁVEIS
        // =========================================================================
        // ESTRATÉGIA: 3 critérios independentes para detectar saltos
        // Mínimo relativo adapta-se ao tamanho do grafo
        // =========================================================================
        
        const LIMIAR_SALTO_PERCENTUAL = 0.15;      // 10% do total (salto absoluto)
        const LIMIAR_SALTO_RELATIVO = 2.0;         // 3.5x a média (salto moderado)
        const LIMIAR_MINIMO_RELATIVO = 0.05;       // 5% do total (mínimo para salto moderado)
        const LIMIAR_SALTO_GIGANTE = 9.0;          // 9x a média (salto gigante)
        const MINIMO = 2;                          // Mínimo 2 pressionamentos
        const MAXIMO = 16;                         // Máximo 16 pressionamentos
        
        // Calcula mínimo absoluto baseado no tamanho do grafo (mínimo: 10 nós)
        let minimoAbsoluto = Math.max(3, Math.floor(totalNos * LIMIAR_MINIMO_RELATIVO));
        console.log(`\nMínimo absoluto calculado: ${minimoAbsoluto} nós (${LIMIAR_MINIMO_RELATIVO*100}% de ${totalNos})`);
        
        // Calcula média móvel das últimas faixas processadas (janela de 3)
        let historicoFaixas = [];
        
        console.log("\n=== ANÁLISE FAIXA POR FAIXA ===");
        
        for (let i = 0; i < faixas.length - 1; i++) {
            let faixaAtual = faixas[i];
            let faixaProxima = faixas[i + 1];
            let nosNaFaixaAtual = distribuicao[faixaAtual].length;
            let nosNaProximaFaixa = distribuicao[faixaProxima].length;
            
            // Adiciona faixa atual ao acumulado
            nosAcumulados += nosNaFaixaAtual;
            pressionamentosIdeal++;
            
            let porcentagemFaixaAtual = nosNaFaixaAtual / totalNos;
            let porcentagemProximaFaixa = nosNaProximaFaixa / totalNos;
            
            // Atualiza histórico (mantém últimas 3 faixas não-vazias)
            if (nosNaFaixaAtual > 0) {
                historicoFaixas.push(nosNaFaixaAtual);
                if (historicoFaixas.length > 3) {
                    historicoFaixas.shift();
                }
            }
            
            // Calcula média das faixas recentes
            let mediaRecente = historicoFaixas.length > 0 
                ? historicoFaixas.reduce((a, b) => a + b, 0) / historicoFaixas.length 
                : nosNaFaixaAtual;
            
            console.log(`Faixa ${faixaAtual}: ${nosNaFaixaAtual} nós (${(porcentagemFaixaAtual*100).toFixed(1)}%)`);
            console.log(`  → Próxima faixa ${faixaProxima}: ${nosNaProximaFaixa} nós (${(porcentagemProximaFaixa*100).toFixed(1)}%)`);
            console.log(`  → Média recente: ${mediaRecente.toFixed(1)} nós`);
            
            // =====================================================================
            // CRITÉRIOS DE DETECÇÃO DE SALTO (3 critérios independentes)
            // =====================================================================
            
            if (pressionamentosIdeal >= MINIMO) {
                
                // CRITÉRIO 1: SALTO ABSOLUTO (% do total)
                // Para se próxima faixa tem muitos nós em relação ao total
                if (porcentagemProximaFaixa >= LIMIAR_SALTO_PERCENTUAL) {
                    console.log(`✓ CRITÉRIO 1 - SALTO ABSOLUTO detectado!`);
                    console.log(`  Próxima faixa ${faixaProxima} tem ${(porcentagemProximaFaixa*100).toFixed(1)}% dos nós (limiar: ${(LIMIAR_SALTO_PERCENTUAL*100).toFixed(0)}%)`);
                    console.log(`  → PARA AQUI para evitar espalhar grafo`);
                    break;
                }
                
                // CRITÉRIO 2: SALTO GIGANTE (independente do valor absoluto)
                // Para se próxima faixa tem MUITAS vezes mais nós que a média
                if (mediaRecente > 0 && nosNaProximaFaixa > mediaRecente * LIMIAR_SALTO_GIGANTE) {
                    console.log(`✓ CRITÉRIO 2 - SALTO GIGANTE detectado!`);
                    console.log(`  Próxima faixa ${faixaProxima} tem ${nosNaProximaFaixa} nós`);
                    console.log(`  Média recente: ${mediaRecente.toFixed(1)} nós`);
                    console.log(`  Proporção: ${(nosNaProximaFaixa / mediaRecente).toFixed(1)}x (limiar: ${LIMIAR_SALTO_GIGANTE}x)`);
                    console.log(`  → PARA AQUI para evitar espalhar grafo`);
                    break;
                }
                
                // CRITÉRIO 3: SALTO MODERADO + MUITOS NÓS (relativo ao total)
                // Para se próxima faixa é maior que a média E tem muitos nós proporcionalmente
                if (mediaRecente > 0 && 
                    nosNaProximaFaixa > mediaRecente * LIMIAR_SALTO_RELATIVO &&
                    nosNaProximaFaixa >= minimoAbsoluto) {
                    console.log(`✓ CRITÉRIO 3 - SALTO MODERADO + MUITOS NÓS detectado!`);
                    console.log(`  Próxima faixa ${faixaProxima} tem ${nosNaProximaFaixa} nós`);
                    console.log(`  Média recente: ${mediaRecente.toFixed(1)} nós`);
                    console.log(`  Proporção: ${(nosNaProximaFaixa / mediaRecente).toFixed(1)}x (limiar: ${LIMIAR_SALTO_RELATIVO}x)`);
                    console.log(`  E tem ≥${minimoAbsoluto} nós (${LIMIAR_MINIMO_RELATIVO*100}% do total)`);
                    console.log(`  → PARA AQUI para evitar espalhar grafo`);
                    break;
                }
            }
            
            // Limite máximo de segurança
            if (pressionamentosIdeal >= MAXIMO) {
                console.log(`✓ Limite máximo de segurança atingido (${MAXIMO})`);
                break;
            }
        }
        
        // Garante mínimo de segurança
        if (pressionamentosIdeal < MINIMO) {
            pressionamentosIdeal = MINIMO;
            console.log(`✓ Aplicando mínimo de segurança: ${MINIMO} pressionamentos`);
        }

        console.log(`\n>>> RESULTADO: ${pressionamentosIdeal} pressionamentos`);
        console.log(`>>> Cobertura: ${(nosAcumulados/totalNos*100).toFixed(1)}%`);
        
        // 4. PRESSIONAR TECLA ESPAÇO
        tempAlert(`Otimização: Aplicando ${pressionamentosIdeal} ajustes...`, 2000);
        
        function simularEspaco() {
            const evt = new KeyboardEvent('keydown', {
                key: ' ', code: 'Space', keyCode: 32, which: 32,
                bubbles: true, cancelable: true, view: window
            });
            document.dispatchEvent(evt);
        }
        
        let contador = 0;
        const intervalo = setInterval(() => {
            simularEspaco();
            contador++;
            console.log(`  Pressionamento ${contador}/${pressionamentosIdeal}`);
            
            if (contador >= pressionamentosIdeal) {
                clearInterval(intervalo);
                
                // 5. CENTRALIZAR (ESC)
                setTimeout(() => {
                    const evtEsc = new KeyboardEvent('keydown', {
                        key: 'Escape', code: 'Escape', keyCode: 27, which: 27,
                        bubbles: true, cancelable: true, view: window
                    });
                    document.dispatchEvent(evtEsc);

                    // ✅ DESSELECIONA TODOS OS NÓS APÓS CADA PRESSIONAMENTO
                    network.unselectAll();
                    
                    console.log("✓ OTIMIZAÇÃO CONCLUÍDA!");
                    tempAlert(`✓ Grafo otimizado! (${pressionamentosIdeal} ajustes aplicados)`, 3000);
                }, 1000);
            }
        }, 200);
    }

    // Torna função global
    window.otimizarGrafoAutomaticamente = otimizarGrafoAutomaticamente;

    </script>


    


    <script>
    // Event listener para o botão de otimização
    document.getElementById('sinarc-otimizar-button').addEventListener('click', function() {
        // Feedback visual
        this.style.background = 'rgba(89, 201, 67, 0.4)';
        setTimeout(() => {
            this.style.background = '';
        }, 300);
        
        // Chama a função de otimização
        if (typeof otimizarGrafoAutomaticamente === 'function') {
            otimizarGrafoAutomaticamente();
        } else {
            console.error('Função otimizarGrafoAutomaticamente não encontrada!');
            alert('Erro: Função de otimização não está disponível.');
        }
    });
    </script>





    <script>
    // ========================================
    // DUPLO CLIQUE NO FUNDO = ESC
    // ========================================

    function ativarDuploCliqueESC() {
        let container = document.getElementById('mynetwork') || 
                        document.querySelector('#network') || 
                        document.querySelector('[id*="network"]');
        
        if (!container) {
            console.error('❌ Container do grafo não encontrado!');
            return;
        }
        
        if (typeof network === 'undefined') {
            console.error('❌ Objeto network não encontrado!');
            return;
        }
        
        // Listener para duplo clique
        network.on('doubleClick', function(params) {
            // Verificar se clicou no fundo (não em nó ou aresta)
            if (params.nodes.length === 0 && params.edges.length === 0) {
                //console.log('⚡ Duplo clique no fundo - simulando ESC');
                
                // Simular pressionamento da tecla ESC
                const eventESC = new KeyboardEvent('keydown', {
                    key: 'Escape',
                    code: 'Escape',
                    keyCode: 27,
                    which: 27,
                    bubbles: true,
                    cancelable: true
                });
                
                document.dispatchEvent(eventESC);
                
                // Também disparar keyup para completar o ciclo
                const eventESCUp = new KeyboardEvent('keyup', {
                    key: 'Escape',
                    code: 'Escape',
                    keyCode: 27,
                    which: 27,
                    bubbles: true,
                    cancelable: true
                });
                
                document.dispatchEvent(eventESCUp);
            }
        });
        
        //console.log('✅ Duplo clique no fundo = ESC ativado');
    }

    // Ativar quando o network estiver pronto
    if (typeof network !== 'undefined') {
        ativarDuploCliqueESC();
    } else {
        // Tentar após um pequeno delay se network ainda não existe
        setTimeout(function() {
            if (typeof network !== 'undefined') {
                ativarDuploCliqueESC();
            }
        }, 1000);
    }
    </script>






    











<script>

// ======================================
// FUNÇÕES PARA MAPA GEOGRÁFICO DO SINARC
// ======================================

// ==============
// DADOS DE TESTE
// ==============
const empresasTeste = [
    {
        razao_social: "EMPRESA TESTE LTDA",
        endereco_completo: "Av. Paulista, 1000 - Bela Vista, São Paulo - SP, 01310-100",
        cidade: "São Paulo",
        uf: "SP"
    },
    {
        razao_social: "CONSULTORIA ABC S/A",
        endereco_completo: "Rua da Candelária, 65 - Centro, Rio de Janeiro - RJ, 20091-020",
        cidade: "Rio de Janeiro",
        uf: "RJ"
    },
    {
        razao_social: "TECH SOLUTIONS ME",
        endereco_completo: "Rua Sete de Setembro, 500 - Centro, Fortaleza - CE, 60060-000",
        cidade: "Fortaleza",
        uf: "CE"
    },
    {
        razao_social: "COMÉRCIO XYZ EIRELI",
        endereco_completo: "Av. Expedito Garcia, 83 - Campo Grande, Cariacica - ES, 29146-201",
        cidade: "Cariacica",
        uf: "ES"
    },
    {
        razao_social: "INDÚSTRIA BETA LTDA",
        endereco_completo: "Sunset Boulevard, 1000 - Hollywood, Los Angeles - CA, USA",
        cidade: "Los Angeles",
        uf: "CA"
    }
];

// ===============================
// FUNÇÃO PARA EXTRAIR DADOS DO GRAFO E GERAR MAPA (VERSÃO CORRIGIDA)
// ===============================
function extrairDadosGrafoParaMapa() {
    
    // Array para armazenar os dados das empresas
    const empresas = [];
    
    // Acessa os nós do grafo via vis.js
    // ===============================
    // USAR APENAS NÓS SELECIONADOS
    // ===============================
    const idsSelecionados = network.getSelectedNodes();

    if (!idsSelecionados || idsSelecionados.length === 0) {
        // Exibe informações na tela
        tempAlert(`Exibe endereços no mapa - Nenhum nó selecionado no grafo.`, 3000);
        //alert('Nenhum nó selecionado no grafo.');
        return [];
    }

    // Recupera apenas os nós selecionados
    const nosDoGrafo = idsSelecionados
    .map(id => nodes.get(id))
    .filter(no => no); // segurança

    
    console.log(`Total de nós no grafo: ${nosDoGrafo.length}`);
    
    /*
    // Filtra apenas nós do tipo PJ_ (pessoas jurídicas)
    const empresasPJ = nosDoGrafo.filter(no => no.id && no.id.startsWith('PJ_'));
    
    console.log(`Total de empresas (PJ) no grafo: ${empresasPJ.length}`);
    */
    
    // Filtra nós do tipo PJ_ (pessoas jurídicas) e PE_ (pessoas estrangeiras)
    const empresasPJ = nosDoGrafo.filter(no => no.id && (no.id.startsWith('PJ_') || no.id.startsWith('PE_')));
    
    //console.log(`Total de empresas (PJ/PE) no grafo: ${empresasPJ.length}`);
    
    // Itera sobre cada empresa
    empresasPJ.forEach(no => {
        try {
            //const title = no.title || '';
            const title = (typeof no.title === 'string' && no.title.trim() !== '')
            ? no.title
            : (typeof no._tooltip_html === 'string' ? no._tooltip_html : '');


            const razaoSocial = no.label || 'Empresa não identificada';
            
            const linhas = title.split('\n');

		

// ===============================
// EXTRAIR SITUAÇÃO DA EMPRESA (PELA IMAGEM DO NÓ)
// ===============================
let situacao = 'Desconhecida';

if (typeof no.image === 'string') {
    const nomeImagem = no.image.toLowerCase();

    if (nomeImagem.includes('_inativa')) {
        situacao = 'Baixada';
    } else if (nomeImagem.includes('_ativa')) {
        situacao = 'Ativa';
    }
}




            
            if (linhas.length < 2) {
                console.warn(`Empresa ${razaoSocial}: informações insuficientes no title`);
                return;
            }
            
            // CORREÇÃO: Procura a linha que contém o endereço
            // O endereço sempre termina com " - UF" ou "-UF" (2 letras maiúsculas)
            let enderecoLinha = '';
            
            // ATENÇÃO: O MAPA EXIBE OS ENDEREÇOS DE TODAS AS PJ/ES, MESMO QUANDO NÃO COMPARTILHADOS COM OUTRAS PJ/PE NA BASE DE DADOS
            for (let i = 1; i < linhas.length && i < 5; i++) {
                const linha = linhas[i].trim();
                
                // Verifica se a linha termina com UF (padrão: - UF ou -UF)
                if (/-[A-Z]{2}\s*$/.test(linha) || /\s+-\s+[A-Z]{2}\s*$/.test(linha)) {
                //if (/-\sEX\s/.test(linha) || /[A-Z]{2}\s-/.test(linha)) {
                    enderecoLinha = linha;
                    break;
                }
            }
            
            if (!enderecoLinha) {
                console.warn(`Empresa ${razaoSocial}: endereço não encontrado no title`);
                return;
            }
            
            let municipio = '';
            let uf = '';
            
            // Divide o endereço por " - "
            const partesEndereco = enderecoLinha.split(' - ');
            
            if (partesEndereco.length >= 2) {
                const ultimaParte = partesEndereco[partesEndereco.length - 1].trim();
                
                // CASO 1: Última parte é só a UF (2 letras)
                // Exemplo: "... - São Paulo - SP"
                if (/^[A-Z]{2}$/.test(ultimaParte)) {
                    uf = ultimaParte;
                    municipio = partesEndereco[partesEndereco.length - 2].trim();
                }
                // CASO 2: Última parte é MUNICÍPIO-UF (hífen grudado, sem espaços)
                // Exemplo: "... - FEIRA DE SANTANA-BA"
                else if (/^(.+)-([A-Z]{2})$/.test(ultimaParte)) {
                    const match = ultimaParte.match(/^(.+)-([A-Z]{2})$/);
                    municipio = match[1].trim();
                    uf = match[2].trim();
                }
                // CASO 3: Última parte é MUNICÍPIO - UF (com espaços ao redor do hífen)
                else {
                    const match = ultimaParte.match(/^(.+?)\s+-\s+([A-Z]{2})$/);
                    if (match) {
                        municipio = match[1].trim();
                        uf = match[2].trim();
                    }
                }
            }
            
            // Se ainda não encontrou, tenta extrair diretamente da linha completa
            if (!municipio || !uf) {
                // Busca padrão: qualquer coisa seguida de hífen e 2 letras maiúsculas no final
                const match = enderecoLinha.match(/([A-ZÀ-Ÿ][A-Za-zÀ-ÿ\s]+)-([A-Z]{2})\s*$/);
                if (match) {
                    municipio = match[1].trim();
                    uf = match[2].trim();
                }
            }


            
            // Validações
            if (!municipio || municipio === '' || municipio.length < 2) {
                // Para exterior (EX), usa o endereço completo como "cidade"
                if (uf === 'EX') {
                    municipio = enderecoLinha.split(' - ')[0].trim();  // Pega primeira parte do endereço
                    console.log(`⚠ Empresa exterior ${razaoSocial}: usando endereço como cidade: "${municipio}"`);
                } else {
                    console.warn(`Empresa ${razaoSocial}: município inválido. Endereço: "${enderecoLinha}"`);
                    return;
                }
            }

            if (!uf || !/^[A-Z]{2}$/.test(uf)) {
                console.warn(`Empresa ${razaoSocial}: UF inválida "${uf}". Endereço: "${enderecoLinha}"`);
                return;
            }



            
            // Pula empresas do exterior
            //if (uf === 'EX') {
            //    console.log(`Empresa ${razaoSocial}: localizada no exterior, ignorada`);
            //    return;
            //}
            
            console.log(`✓ ${razaoSocial}: ${municipio} - ${uf}`);
            
            // Adiciona ao array
            empresas.push({
                razao_social: razaoSocial,
                situacao: situacao, // <-- NOVO CAMPO
                endereco_completo: enderecoLinha,
                cidade: municipio,
                uf: uf
            });

            
        } catch (erro) {
            console.error(`Erro ao processar empresa ${no.label}:`, erro);
        }
    });
    
    console.log(`Total de empresas válidas para o mapa: ${empresas.length}`);
    
    return empresas;
}

// ===============================
// FUNÇÃO PARA GERAR E ABRIR MAPA A PARTIR DO GRAFO
// ===============================
function gerarMapaDoGrafo() {
    
    console.log('Extraindo dados do grafo...');
    
    // Extrai dados das empresas do grafo
    const empresas = extrairDadosGrafoParaMapa();
    
    if (empresas.length === 0) {
        //tempAlert(`Nenhuma empresa com localização válida encontrada no grafo.`, 3000);
        //alert('Nenhuma empresa com localização válida encontrada no grafo.');
        return;
    }
    
    console.log(`Abrindo mapa com ${empresas.length} empresas...`);
    
    // Abre o mapa em nova janela
    abrirMapaEmpresas(empresas);
}

// ===============================
// FUNÇÃO PARA ABRIR MAPA EM NOVA JANELA
// ===============================
function abrirMapaEmpresas(empresas) {
    
    // Gerar HTML do mapa
    const htmlMapa = gerarHTMLMapa(empresas);
    
    // Abrir nova janela
    const janela = window.open(
    'about:blank',
    '_blank',
    'width=1200,height=800,scrollbars=yes,resizable=yes'
);

    
    // Escrever HTML na janela
    janela.document.open();
    janela.document.write(htmlMapa);
    janela.document.close();
}

// ===============================
// FUNÇÃO PARA GERAR HTML DO MAPA
// ===============================
function gerarHTMLMapa(empresas) {
    
    // Converter array completo para string JavaScript
    const empresasArray = JSON.stringify(empresas);
    
    let html = '<!DOCTYPE html>';
    html += '<html lang="pt-BR">';
    html += '<head>';
    html += '<meta charset="utf-8">';
    html += '<meta name="viewport" content="width=device-width, initial-scale=1.0">';
    html += '<title>Mapa SINARC – Agrupamento por Cidade</title>';
    html += '<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />';
    html += '<style>';
    html += 'html, body { margin: 0; height: 100%; }';
    html += '#map { height: 100vh; width: 100%; }';
    html += '#status { position: fixed; bottom: 10px; left: 10px; background: white; padding: 6px 10px; border: 1px solid #ccc; z-index: 1000; font-family: "Helvetica Neue", Arial, Helvetica, sans-serif; font-size: 12px; line-height: 1.4; }';
    html += '.marker-label { background: white; border: 1px solid #444; border-radius: 10px; padding: 2px 6px; font-size: 11px; font-weight: bold; text-align: center; }';
    html += '.empresa-link { color: #2c5f8d; text-decoration: none; font-weight: 500; transition: color 0.2s; }';
    html += '.empresa-link:hover { color: #1e4163; text-decoration: underline; }';

    html += '.leaflet-popup-content-wrapper { width: auto !important; min-width: 300px; max-width: none !important; }';
    html += '.leaflet-popup-content { width: auto !important; min-width: 280px; max-height: 400px; overflow-y: auto; white-space: nowrap; }';

    html += '.empresa-link { white-space: nowrap; }';

    html += '#btn-fit { position: fixed; top: 10px; right: 10px; z-index: 1000; ';
    html += 'background: white; ';
    html += 'border: 2px solid rgba(0,0,0,0.2); ';
    html += 'background-clip: padding-box; ';  
    html += 'border-radius: 4px; ';
    html += 'box-shadow: none; ';
    html += 'width: 34px; height: 34px; ';
    html += 'cursor: pointer; ';
    html += 'display: flex; align-items: center; justify-content: center; ';
    html += 'font-size: 26px; ';  
    html += 'line-height: 30px; ';
    html += 'text-align: center; ';
    html += 'text-decoration: none; ';
    html += 'color: black; ';
    html += '-webkit-text-fill-color: black; ';
    html += 'font-weight: bold; ';  
    html += 'transition: background 0.2s; }';  
    html += '#btn-fit:hover { background: #f4f4f4; }';
    html += '#btn-fit:active { transform: scale(0.98); }';

    html += '#btn-toggle-labels { position: fixed; top: 50px; right: 10px; z-index: 1000; ';
    html += 'background: white; ';
    html += 'border: 2px solid rgba(0,0,0,0.2); ';
    html += 'background-clip: padding-box; ';
    html += 'border-radius: 4px; ';
    html += 'box-shadow: none; ';
    html += 'width: 34px; height: 34px; ';
    html += 'cursor: pointer; ';
    html += 'display: flex; align-items: center; justify-content: center; ';
    html += 'font-size: 20px; ';
    html += 'line-height: 30px; ';
    html += 'text-align: center; ';
    html += 'text-decoration: none; ';
    html += 'color: black; ';
    html += '-webkit-text-fill-color: black; ';
    html += 'font-weight: bold; ';
    html += 'transition: background 0.2s; }';
    html += '#btn-toggle-labels:hover { background: #f4f4f4; }';
    html += '#btn-toggle-labels:active { transform: scale(0.98); }';
    html += '.tooltip-quantidade.hidden { display: none !important; }';

    html += '</style>';
    html += '</head>';
    html += '<body>';
    html += '<button id="btn-fit" title="Enquadrar todos os pontos">⌂</button>';
    html += '<button id="btn-toggle-labels" title="Mostrar/Ocultar rótulos das cidades">👁️</button>';
    html += '<div id="map"></div>';
    html += '<div id="status">Carregando mapa e cidades...</div>';
    html += '<script src="https://unpkg.com/leaflet/dist/leaflet.js"><\/script>';
    html += '<script>';
    
    // Dados das empresas
    html += 'const empresas = ' + empresasArray + ';';
    
    // Função de geocodificação
    html += 'async function geocodificarCidade(nomeCidade, uf) {';
    html += '  const countryParam = (uf === "EX") ? "" : "&countrycodes=br";';
    html += '  const url = "https://nominatim.openstreetmap.org/search?format=json&limit=1&accept-language=pt-BR&addressdetails=1" + countryParam + "&q=" + encodeURIComponent(nomeCidade);';
    html += '  const resposta = await fetch(url, { headers: { "User-Agent": "sinarc-mapa-teste/1.0" } });';
    html += '  const dados = await resposta.json();';
    html += '  if (dados.length === 0) { console.warn("Cidade não encontrada:", nomeCidade); return null; }';
    html += '  return { lat: parseFloat(dados[0].lat), lng: parseFloat(dados[0].lon), nome: nomeCidade, pais: dados[0].address?.country_code || "" };';
    html += '}';
    
    // Ícones
    html += 'const iconeBrasil = L.icon({ iconUrl: "https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png", shadowUrl: "https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png", iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41] });';
    html += 'const iconeExterior = L.icon({ iconUrl: "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png", shadowUrl: "https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png", iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41] });';
    
    // Função principal do mapa
    html += 'async function carregarMapaPorCidade() {';
    html += '  const status = document.getElementById("status");';
    html += '  window.mapaSinarc = L.map("map");';  // ← GLOBAL
    html += '  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", { attribution: "© OpenStreetMap contributors" }).addTo(window.mapaSinarc);';  // ← CORRIGIDO
    
    // Agrupar empresas por cidade+UF (chave única)
    html += '  const empresasPorCidade = {};';
    html += '  empresas.forEach(emp => {';
    html += '    const chave = `${emp.cidade} - ${emp.uf}`;';
    html += '    if (!empresasPorCidade[chave]) { ';
    html += '      empresasPorCidade[chave] = { cidade: emp.cidade, uf: emp.uf, empresas: [] };';
    html += '    }';
    html += '    empresasPorCidade[chave].empresas.push(emp);';
    html += '  });';
    
    html += '  console.log("Empresas por cidade:", empresasPorCidade);';
    html += '  window.limitesSinarc = L.latLngBounds([]);';  // ← GLOBAL
    html += '  let processadas = 0;';
    html += '  const total = Object.keys(empresasPorCidade).length;';

    // Array para coletar falhas
    html += '  const empresasNaoLocalizadas = [];';
    
    html += '  for (const chave in empresasPorCidade) {';
    html += '    const dadosCidade = empresasPorCidade[chave];';
    html += '    const cidadeNome = dadosCidade.cidade;';
    html += '    const uf = dadosCidade.uf;';
    html += '    const cidadeUF = (uf === "EX") ? cidadeNome : `${cidadeNome} - ${uf}`;';

    html += '    status.textContent = `Geocodificando: ${cidadeUF} (${++processadas}/${total})`;';
    html += '    const ponto = await geocodificarCidade(cidadeUF, uf);';
    html += '    if (ponto) {';
    html += '      const ehBrasil = ponto.pais.toLowerCase() === "br";';
    html += '      const marcador = L.marker([ponto.lat, ponto.lng], { icon: ehBrasil ? iconeBrasil : iconeExterior }).addTo(window.mapaSinarc);';  // ← CORRIGIDO
    
    // Tooltip mostra cidade - UF e quantidade
    html += '      const qtd = dadosCidade.empresas.length;';
    html += '      marcador.bindTooltip(`${cidadeUF} (${qtd})`, { permanent: true, direction: "top", offset: [0, -45], className: "tooltip-quantidade" });';
    
    // Popup mostra cidade - UF e lista de empresas (ORDENADAS ALFABETICAMENTE)
    html += '      let popupHTML = `<b>${cidadeUF} (${qtd})</b><br>`;';
    html += '      const empresasOrdenadas = dadosCidade.empresas.sort((a, b) => a.razao_social.localeCompare(b.razao_social));';
    html += '      empresasOrdenadas.forEach(emp => {';
    html += '        const enderecoEncoded = encodeURIComponent(emp.endereco_completo);';
    html += '        const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${enderecoEncoded}`;';
    html += '        popupHTML += `• <a href="${googleMapsUrl}" target="_blank" class="empresa-link" title="Ver localização no Google Maps">${emp.razao_social} <span style="color:#555;">(${emp.situacao})</span></a><br>`;';
    html += '      });';
    html += '      marcador.bindPopup(popupHTML);';
    
    // Sistema de delay para fechar o popup
    html += '      let timeoutFecharPopup = null;';
    html += '      marcador.on("mouseover", function () {';
    html += '        if (timeoutFecharPopup) { clearTimeout(timeoutFecharPopup); timeoutFecharPopup = null; }';
    html += '        this.openPopup();';
    html += '      });';
    
    html += '      marcador.on("mouseout", function () {';
    html += '        const popup = this.getPopup();';
    html += '        timeoutFecharPopup = setTimeout(() => { this.closePopup(); }, 500);';
    html += '        const popupElement = popup.getElement();';
    html += '        if (popupElement) {';
    html += '          popupElement.addEventListener("mouseenter", () => {';
    html += '            if (timeoutFecharPopup) { clearTimeout(timeoutFecharPopup); timeoutFecharPopup = null; }';
    html += '          });';
    html += '          popupElement.addEventListener("mouseleave", () => {';
    html += '            this.closePopup();';
    html += '          });';
    html += '        }';
    html += '      });';
    
    html += '      window.limitesSinarc.extend([ponto.lat, ponto.lng]);';  // ← CORRIGIDO

    // Se não localizou, adiciona à lista de falhas
    html += '    } else {';
    html += '      dadosCidade.empresas.forEach(emp => {';
    html += '        empresasNaoLocalizadas.push({ razao: emp.razao_social, endereco: emp.endereco_completo });';
    html += '      });';
    html += '    }';

    html += '    await new Promise(r => setTimeout(r, 800));';
    html += '  }';
    
    html += '  if (window.limitesSinarc.isValid()) { window.mapaSinarc.fitBounds(window.limitesSinarc, { padding: [50, 50], maxZoom: 11 }); }';  // ← CORRIGIDO
    html += '  status.textContent = `Mapa carregado (${empresas.length} PJ/PE).`;';

    // Exibir popup com empresas não localizadas
    html += '  if (empresasNaoLocalizadas.length > 0) {';
    html += '    let mensagem = `⚠️ ${empresasNaoLocalizadas.length} empresa(s) não localizada(s):\n\n`;';
    html += '    empresasNaoLocalizadas.forEach(emp => {';
    html += '      mensagem += `• ${emp.razao}\n  ${emp.endereco}\n\n`;';
    html += '    });';
    html += '    alert(mensagem);';
    html += '    console.warn("Empresas não localizadas:", empresasNaoLocalizadas);';
    html += '  }';

    html += '}';
    html += 'carregarMapaPorCidade();';

    // Função para enquadrar todos os pontos
    html += 'function enquadrarTudo() {';
    html += '  if (window.limitesSinarc && window.limitesSinarc.isValid()) {';  // ← CORRIGIDO
    html += '    window.mapaSinarc.fitBounds(window.limitesSinarc, { padding: [50, 50], maxZoom: 11 });';  // ← CORRIGIDO
    html += '  }';
    html += '}';

    // Variável para controlar estado dos rótulos
    html += 'let tooltipsVisiveis = true;';
    
    // Função para alternar visibilidade dos tooltips
    html += 'function alternarTooltips() {';
    html += '  tooltipsVisiveis = !tooltipsVisiveis;';
    html += '  const tooltips = document.querySelectorAll(".tooltip-quantidade");';
    html += '  tooltips.forEach(tooltip => {';
    html += '    if (tooltipsVisiveis) {';
    html += '      tooltip.classList.remove("hidden");';
    html += '    } else {';
    html += '      tooltip.classList.add("hidden");';
    html += '    }';
    html += '  });';
    html += '  const btn = document.getElementById("btn-toggle-labels");';
    html += '  btn.textContent = tooltipsVisiveis ? "👁️" : "👁️‍🗨️";';
    html += '  btn.title = tooltipsVisiveis ? "Ocultar rótulos das cidades (Tecla L)" : "Mostrar rótulos das cidades (Tecla L)";';
    html += '}';
    
    // Event listeners para botão e tecla Home
    html += 'document.getElementById("btn-fit").addEventListener("click", enquadrarTudo);';
    html += 'document.getElementById("btn-toggle-labels").addEventListener("click", alternarTooltips);';
    //html += 'document.addEventListener("keydown", (e) => {';
    //html += '  if (e.key === "Home") { e.preventDefault(); enquadrarTudo(); }';
    //html += '});';

    html += '<\/script>';
    html += '</body>';
    html += '</html>';
    
    return html;
}

// ===============================
// FUNÇÃO DE TESTE COM DADOS FICTÍCIOS
// ===============================
function testarMapaComDadosTeste() {
    console.log('Testando mapa com dados de teste...');
    abrirMapaEmpresas(empresasTeste);
}

// ===============================
// FIM DAS FUNÇÕES PARA MAPA GEOGRÁFICO
// ===============================

// Torna função global
window.gerarMapaDoGrafo = gerarMapaDoGrafo;

</script>

















<div id="sinarc-tooltip-node"
     style="
        position: fixed;
        display: none;
        max-height: 295px;
        max-width: min(600px, calc(100vw - 24px));
        overflow-y: auto;
        overflow-x: auto;
        background: rgba(255,255,216,0.98);
        border: 1px solid #999;
        border-radius: 3px;
        font-size: 11px;
        padding: 6px 60px 6px 6px;
        z-index: 99999;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        white-space: pre;
        pointer-events: auto;
     ">
</div>

<style>
    .tooltip-buttons {
        display: flex;
        flex-direction: column;
        padding: 0px;
        margin-bottom: 10px;
    }

    .buttons-label {
        font-size: 11px;
        text-align: center;
        margin-bottom: 5px;
        font-weight: normal;
        align-self: left;
        width: 330px;
    }

    .buttons-row {
        display: flex;
        gap: 20px;
        justify-content: left;
        align-items: left;
    }

    .tooltip-buttons button {
        min-width: 50px;
        padding: 1px 18px;
        background: #52a0fa;
        color: #FFFFFF;
        border: 1px solid #0b66cf;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        font-weight: bold;
        transition: all 0.2s;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .tooltip-buttons button:hover {
        background: #2b8ef7;
        border-color: #1f7fe0;
    }

    .tooltip-buttons button:active {
        background: #095cc0;
        border-color: #074b9e;
    }


    
    
    
    .tooltip-close-button {
        position: absolute;
        top: 5px;
        right: 5px;
        background: #f0f0f0;
        border: none;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-weight: bold;
        font-size: 12px;
        color: #666;
        z-index: 10;
        transition: background 0.2s;
    }

    
    .tooltip-close-button:hover {
        background: #e0e0e0;
    }
</style>

<script>
(function () {
    const tooltip = document.getElementById("sinarc-tooltip-node");
    if (!tooltip) return;

    // --- SISTEMA GLOBAL DE RASTREIO DE MOUSE ---
    let globalMouseX = 0;
    let globalMouseY = 0;
    
    // Atualiza posição do mouse em qualquer movimento na tela
    document.addEventListener('mousemove', (e) => {
        globalMouseX = e.clientX;
        globalMouseY = e.clientY;
    });
    // -------------------------------------------------

    // --- VARIÁVEIS DO LOOP DE PARADA ---
    let stillnessInterval = null;
    let hoverStartTime = 0;
    let hoverStartX = 0;
    let hoverStartY = 0;
    let currentHoveredNodeId = null;

    function closeTooltip() {
        tooltip.style.display = "none";
        tooltip.scrollTop = 0;
        hoveredNodeId = null;
        isMouseOverNode = false;
        isMouseOverTooltip = false;
        stopStillnessCheck();
    }

    const STILLNESS_DELAY = 1500; // 1.5s
    const MOVEMENT_THRESHOLD = 3; // Tolerância de 3px (movimentos menores que isso não resetam)
    // ---------------------------------

    let hideTimer = null;
    let isMouseOverNode = false;
    let isMouseOverTooltip = false;

    // Função que verifica periodicamente se o mouse parou
    function startStillnessCheck(nodeId) {
        stopStillnessCheck(); // Para verificação anterior se houver

        currentHoveredNodeId = nodeId;
        hoverStartTime = Date.now(); // Registra início da contagem
        hoverStartX = globalMouseX;  // Marca posição inicial
        hoverStartY = globalMouseY;

        // Inicia loop de verificação (a cada 50ms)
        stillnessInterval = setInterval(() => {
            // Calcula distância Euclidiana da posição atual para a posição de "início da contagem"
            const dist = Math.hypot(globalMouseX - hoverStartX, globalMouseY - hoverStartY);

            if (dist > MOVEMENT_THRESHOLD) {
                // O mouse se moveu! Reinicia a contagem.
                // A nova posição se torna a posição base.
                hoverStartTime = Date.now();
                hoverStartX = globalMouseX;
                hoverStartY = globalMouseY;
                // console.log("Mouse moveu, resetando timer...");
            } 
            else if (Date.now() - hoverStartTime >= STILLNESS_DELAY) {
                // O tempo passou E o mouse está parado (dentro do threshold).
                stopStillnessCheck(); // Para o loop
                const node = nodes.get(nodeId);
                if (node) {
                    // Passa a posição atual do mouse para posicionar o tooltip exatamente onde parou
                    mostrarTooltip(node, {event: {clientX: globalMouseX, clientY: globalMouseY}});
                }
            }
        }, 50); // Checa 20 vezes por segundo
    }

    function stopStillnessCheck() {
        if (stillnessInterval) {
            clearInterval(stillnessInterval);
            stillnessInterval = null;
        }
        currentHoveredNodeId = null;
    }

    // --- FUNÇÃO DE EXIBIÇÃO ---
    function mostrarTooltip(node, params) {
        if (!node || !node._tooltip_html) return;

        const lines = node._tooltip_html.split(/\n/);
        
        const primeiraLinhaTexto = lines[0]
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;");
        
        /*
        const textoPesquisa = `Realize uma pesquisa profunda e detalhada sobre o histórico de conformidade e integridade da pessoa a seguir. 
            O objetivo é identificar riscos reputacionais por meio de uma análise forense com foco no controle externo da Administração Pública e na produção de insights para a defesa do interesse público. 
            Utilize inteligência com fontes abertas (OSINT) para coletar dados relevantes disponíveis na internet, incluindo notícias, registros públicos, listas de sanções, portais de transparência, redes sociais e outras fontes confiáveis. 
            Concentre-se em aspectos que possam indicar envolvimento em práticas ilícitas, má conduta empresarial ou qualquer outro fator que possa comprometer a integridade e a reputação da pessoa investigada.
            O número do CPF de pessoas físicas está no formato PF_***NNNNNN** e o número do CNPJ de pessoas jurídicas está no formato PJ_NNNNNNNNNNNNNN.
            Por favor, forneça as informações estruturadas da seguinte forma: 
            1. Notícias e Irregularidades: Liste menções em investigações, processos judiciais e administrativos públicos, inquéritos ou notícias sobre fraudes, corrupção e irregularidades envolvendo a Administração Pública e o interesse coletivo. 
            2. Rede de Ligações: Identifique sócios, empresas coligadas ou parceiros de negócios frequentemente citados em conjunto com o alvo. 
            3. Presença em Listas: Verifique se há menções em portais de transparência, listas de sanções ou registros de empresas e pessoas suspensas ou impedidas de contratar com a Administração Pública (CEIS, CNEP, CEPIM, CEAF, CNIA, Acordo de Leniência, PEP).
            4. Atividades Comerciais: Descreva o setor de atuação, principais atividades comerciais e qualquer histórico de contratos com o setor público. 
            5. Reputação Online: Analise avaliações, comentários e discussões em redes sociais, fóruns e sites especializados. 
            6. Histórico Financeiro: Investigue falências, recuperações judiciais ou outras questões financeiras relevantes. 
            7. Conformidade Legal: Verifique o cumprimento de obrigações legais, fiscais e regulatórias. 
            8. Outras Informações Relevantes: Inclua quaisquer outras informações que possam impactar a avaliação de risco reputacional do alvo.
            9. Insights para Pesquisa: Forneça 5 insights ou pontos de atenção que possam guiar uma investigação mais aprofundada sobre o alvo. 
            10. Prompts para Aprofundamento: Ao final de cada resposta, apresente 6 novas sugestões de prompts para IA (de 1 a 6), distintas das sugestões já apresentadas na conversa, sendo a sexta opção específica para gerar novos prompts contendo sugestões de pontos de auditoria ainda não abordados nesta converesa, visando aprofundar ainda mais a investigação por meio de dados públicos disponíveis na internet, de modo que o usuário precise apenas digitar o número do prompt desejado para a IA realizar a pesquisa correspondente. Peça para o usuário digitar um número.
            ATENÇÃO: Se o alvo for um telefone (11 12345678), um endereço (DEPUTADO EDUARDO KM LUIS MAGALHAES 529-FEIRA DE SANTANA-BA) ou um e-mail, realize uma pesquisa profunda sobre o alvo, objetivando encontrar menções em bases públicas, redes sociais, listas de spam, vazamentos de dados e outras fontes abertas na internet.
            `;
        */
        
        const textoPesquisaFormatado = encodeURIComponent(window.textoPesquisa);
        const url = 'https://www.google.com/search?q=' + textoPesquisaFormatado + '+Entidade:+' + lines[0] + '&udm=50';
        
        const firstLine = '<strong><a href="\#" style="color: #0066cc; text-decoration: none; cursor: pointer;" onclick="window.open(\'' + url + '\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + primeiraLinhaTexto + '<\/a> 🔍<\/strong>';
        
        const otherLines = lines.slice(1)
            .map(line => line
                .trim()
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
            )
            .join("<br>");
        
        const botoesSection = `<div class="tooltip-buttons">
                <div class="buttons-label">Abrir nó em camadas</div>
                <div class="buttons-row">
                    <button onclick="abrirGrafo(1)">1</button>
                    <button onclick="abrirGrafo(2)">2</button>
                    <button onclick="abrirGrafo(3)">3</button>
                    <button onclick="abrirGrafo(4)">4</button>
                    <button onclick="abrirGrafo(5)">5</button>
                </div>
            </div>`;
        
        
        //const html = botoesSection + firstLine + (otherLines ? "<br>" + otherLines : "");
        const closeButton = `<button class="tooltip-close-button">X</button>`;
        const html = closeButton + botoesSection + firstLine + (otherLines ? "<br>" + otherLines : "");

        tooltip.innerHTML = html;

        // ADICIONAR EVENTO PROGRAMATICAMENTE (DENTRO DO SCOP)
        const closeButtonElement = tooltip.querySelector('.tooltip-close-button');
        if (closeButtonElement) {
            closeButtonElement.addEventListener('click', closeTooltip);
        }

        
        
        // Posicionamento usando o evento de mouse (que agora é garantido)
        const evt = params && params.event ? params.event : window.event;
        if (!evt) return;
        
        let x = evt.clientX + 12;
        let y = evt.clientY + 12;

        tooltip.style.visibility = "hidden";
        tooltip.style.display = "block";
        const w = tooltip.offsetWidth;
        const h = tooltip.offsetHeight;

        const maxX = window.innerWidth - w - 12;
        const maxY = window.innerHeight - h - 12;

        if (x > maxX) x = Math.max(12, maxX);
        if (x < 12) x = 12;
        if (y > maxY) y = Math.max(12, maxY);
        if (y < 12) y = 12;

        tooltip.style.left = x + "px";
        tooltip.style.top  = y + "px";
        tooltip.style.visibility = "visible";
        
        hoveredNodeId = node.id;
        isMouseOverNode = true;
    }

    function checkHideTooltip() {
        if (hideTimer) clearTimeout(hideTimer);
        hideTimer = setTimeout(() => {
            if (!isMouseOverNode && !isMouseOverTooltip) {
                tooltip.style.display = "none";
                tooltip.scrollTop = 0;
                if (typeof hoveredNodeId !== 'undefined') hoveredNodeId = null;
            }
        }, 100); 
    }

    network.on("hoverNode", function (params) {
        const nodeId = params.node;
        const node = nodes.get(nodeId);
        if (!node) return;
        
        if (!node._tooltip_html && node.title) {
            node._tooltip_html = node.title;
            //nodes.update({ id: nodeId, title: undefined });
        }
        if (!node._tooltip_html) return;
        
        isMouseOverNode = true;
        if (hideTimer) clearTimeout(hideTimer);
        
        // Inicia a verificação de parada (coordenadas)
        startStillnessCheck(nodeId);
    });
    
    network.on("blurNode", function () {
        isMouseOverNode = false;
        stopStillnessCheck(); // Para o timer de verificação imediatamente
        checkHideTooltip();
    });

    tooltip.addEventListener("mouseenter", () => {
        isMouseOverTooltip = true;
        if (hideTimer) clearTimeout(hideTimer);
    });

    tooltip.addEventListener("mouseleave", () => {
        isMouseOverTooltip = false;
        checkHideTooltip();
    });

})();

function closeTooltip() {
        tooltip.style.display = "none";
        tooltip.scrollTop = 0;
        hoveredNodeId = null;
        isMouseOverNode = false;
        isMouseOverTooltip = false;
        stopStillnessCheck();
    }


let hoveredNodeId = null;

function abrirGrafo(camadasSelecionada) {
    if (!hoveredNodeId) {
        tempAlert("Nenhum nó em foco para abrir em camadas", 3000);
        return;
    }

    const cnpj = hoveredNodeId;
    const conf_destaca = false;

    if (location.protocol === "https:") {
        const url = `https://sinarc.app/?cnpj=${cnpj}&camada=${camadasSelecionada}`;
        window.open(url, "_blank");
        tempAlert(`Botão ${camadasSelecionada} - Abrindo nó ${cnpj} em nova aba`, 3000);
        return;
    }

    const textoCopiar = cnpj + "***" + camadasSelecionada + "***" + conf_destaca;
    async function copyOperation(texto) {
        await navigator.clipboard.writeText(texto);
    }
    setTimeout(() => {
        copyOperation(textoCopiar);
    }, 200);

    tempAlert(
        `Botão ${camadasSelecionada} - Nó ${cnpj} copiado (${camadasSelecionada} camada${camadasSelecionada > 1 ? 's' : ''})`,
        3000
    );
}
</script>



    

        <style>
            #info-base-dados {
                position: fixed;
                bottom: 7px;  /* Distância do fundo - ajustável */
                left: 11px;    /* Distância da esquerda - ajustável */
                font-family: Arial, sans-serif;
                font-size: 10px;  /* Tamanho da fonte - ajustável */
                color: #666;      /* Cor do texto - ajustável */
                background-color: rgba(255, 255, 255, 0.0);  /* Fundo semi-transparente - ajustável */
                padding: 5px 10px;  /* Espaçamento interno - ajustável */
                border-radius: 3px;  /* Cantos arredondados - ajustável */
                z-index: 999;
                pointer-events: none;  /* Não interfere com cliques */
                opacity: 0.5;  /* Transparência do elemento - ajustável */
            }
            
            #info-base-dados:hover {
                opacity: 1;  /* Fica mais visível ao passar o mouse */
            }

        </style>

        <div id="info-base-dados">
            Base de dados: 13/12/2025
        </div>

    

<script>


    function gerarRelatorio() {

        const selectedNodes = network.getSelectedNodes();
        const totalSelecionados = selectedNodes.length;
        const textoNos = totalSelecionados === 1 ? 'NÓ SELECIONADO' : 'NÓS SELECIONADOS';

        if (selectedNodes.length == 0){
                tempAlert('Selecione pelo menos um nó para gerar o relatório. Pressione SHIFT + a para selecionar todos os nós.', 3000);
                return;
        }

        const textoPesquisa = window.textoPesquisa


        // CALCULA TOTAL E EXTRAI DADOS DE PJ (apenas Brasil) e PE (exterior + estrangeiros)
        const pessoasJuridicas = [];
        const pessoasEstrangeiras = [];
        
        selectedNodes.forEach(function (id) {
            if (typeof id !== 'string') return;
            
            const node = network.body.data.nodes.get(id);
            const title = node.title || '';
            const image = node.image || '';
            const conexoes = network.getConnectedEdges(id).length;
            
            // Situação baseada na imagem
            let situacao = 'ATIVA';
            if (image.includes('_inativa')) {
                situacao = 'BAIXADA';
            }
            
            // Restrição (procura "Situação Fiscal:")
            let restricao = '';
            const matchFiscal = title.match(/Situação Fiscal:\s*(\w+)/i);
            if (matchFiscal) {
                restricao = matchFiscal[1].toUpperCase();
            }
            
            // PROCESSA PE_ (Pessoa Estrangeira)
            if (id.startsWith('PE_')) {
                const nome = id.substring(3);
                
                // País e endereço - percorre todas as linhas buscando "- EX"
                let pais = '';
                let endereco = '';
                const linhas = title.split('\n').slice(1);
                for (let i = 0; i < linhas.length; i++) {
                    const linha = linhas[i].trim();
                    if (linha === 'nan' || linha === '' || linha.startsWith('(EMPRESA')) continue;
                    if (linha.startsWith('NÓ -') || linha.startsWith('GRAFO -') || linha.includes('Nós Adjacentes')) break;
                    
                    /*
                    // Verifica se termina com "- EX" (endereço estrangeiro)
                    if (linha.endsWith('- EX') || linha.endsWith('- EX ')) {
                        const partes = linha.split(' - ');
                        if (partes.length >= 2 && partes[0].trim() !== 'nan') {
                            pais = partes[0].trim();
                            // Endereço é tudo entre o país e o "- EX" final
                            endereco = partes.slice(1, -1).join(' - ').trim();
                            if (endereco === '') {
                                endereco = partes.slice(1).join(' - ').replace(/\s*-\s*EX\s*$/i, '').trim();
                            }
                        }
                        break;
                    }
                    */

                    // 1. Verifica se a linha contém "- EX" ou "- EX " em qualquer posição
                    if (linha.endsWith('- EX') || linha.includes('- EX ')) {
                        
                        // 2. O endereço agora é a linha completa (sem espaços extras nas pontas)
                        endereco = linha.trim();
                        
                        // 3. (Opcional) Se ainda precisar extrair o país separadamente:
                        const partes = linha.split(' - ');
                        if (partes.length >= 1 && partes[0].trim().toLowerCase() !== 'nan') {
                            pais = partes[0].trim();
                        }

                        // Como é a "primeira linha que contém", interrompemos o loop
                        break;
                    }

                }
                
                pessoasEstrangeiras.push({
                    id: id,
                    nome: nome,
                    cnpj: '',
                    pais: pais,
                    endereco: endereco,
                    situacao: situacao,
                    restricao: restricao,
                    conexoes: conexoes
                });
                return;
            }
            
            // PROCESSA PJ_
            if (id.startsWith('PJ_')) {
                const cnpj = id.substring(3);
                
                // Extrai nome (primeira linha do title, antes do "(PJ_")
                const primeiraLinha = title.split('\n')[0] || '';
                const nome = primeiraLinha.split('(PJ_')[0].trim();
                
                // Percorre todas as linhas para encontrar endereço e verificar se é exterior
                const linhas = title.split('\n');
                let linhaEndereco = '';
                let linhaEnderecoExterior = '';
                let isExterior = false;
                
                for (let i = 1; i < linhas.length; i++) {
                    const linha = linhas[i].trim();
                    if (linha === '' || linha === nome) continue;
                    if (linha.startsWith('NÓ -') || linha.startsWith('GRAFO -') || linha.includes('Nós Adjacentes')) break;
                    
                    // Verifica se esta linha termina com "- EX"
                    if (linha.endsWith('- EX') || linha.includes('- EX ')) {
                        linhaEnderecoExterior = linha;
                        isExterior = true;
                    }
                    
                    // Guarda a primeira linha como endereço padrão (para PJ nacional)
                    if (linhaEndereco === '') {
                        linhaEndereco = linha;
                    }
                }
                
                // Se for exterior, usa a linha com "- EX" como endereço
                if (isExterior) {
                    linhaEndereco = linhaEnderecoExterior;
                }
                
                if (isExterior) {
                    // PJ no exterior vai para o array de PE
                    let pais = '';
                    let endereco = '';
                    const partes = linhaEndereco.split(' - ');
                    if (partes.length >= 2) {
                        pais = partes[0].trim();
                        // Remove o país do início e "EX" do final
                        endereco = partes.slice(1, -1).join(' - ').trim();
                        if (endereco === '') {
                            endereco = partes.slice(1).join(' - ').replace(/\s*-\s*EX\s*$/i, '').trim();
                        }
                    }
                    
                    pessoasEstrangeiras.push({
                        id: id,
                        nome: nome,
                        cnpj: cnpj,
                        pais: pais,
                        endereco: endereco,
                        situacao: situacao,
                        restricao: restricao,
                        conexoes: conexoes
                    });
                } else {
                    // PJ nacional
                    pessoasJuridicas.push({
                        id: id,
                        nome: nome,
                        cnpj: cnpj,
                        endereco: linhaEndereco,
                        situacao: situacao,
                        restricao: restricao,
                        conexoes: conexoes
                    });
                }
                return;
            }
        });
        
        const totalPJ = pessoasJuridicas.length;
        const textoPJ = totalPJ === 1 ? 'PESSOA JURÍDICA (PJ) SEDIADA NO BRASIL' : 'PESSOAS JURÍDICAS (PJ) SEDIADAS NO BRASIL';
        
        const totalPE = pessoasEstrangeiras.length;
        const textoPE = totalPE === 1 ? 'PESSOA JURÍDICA (PJ) SEDIADA NO EXTERIOR OU PESSOA ESTRANGEIRA (PE)' : 'PESSOAS JURÍDICAS (PJ) SEDIADAS NO EXTERIOR OU PESSOAS ESTRANGEIRAS (PE)';
        

        // CALCULA TOTAL E EXTRAI DADOS DE EN (Endereço)
        const enderecos = [];

        selectedNodes.forEach(function (id) {
            if (typeof id !== 'string' || !id.startsWith('EN_')) return;

            const node = network.body.data.nodes.get(id);
            if (!node || !node.title) return;

            // Primeira linha do title
            const primeiraLinha = node.title.split('\n')[0].trim();

            const conexoes = network.getConnectedEdges(id).length;

            enderecos.push({
                id: id,
                endereco: primeiraLinha,
                conexoes: conexoes
            });
        });


        const totalEN = enderecos.length;
        const textoEN = totalEN === 1 ? 'ENDEREÇO (EN)' : 'ENDEREÇOS (EN)';

        // CALCULA TOTAL E EXTRAI DADOS DE TE (Telefone)
        const telefones = [];
        selectedNodes.forEach(function (id) {
            if (typeof id !== 'string' || !id.startsWith('TE_')) return;
            
            const telefone = id.substring(3);
            const conexoes = network.getConnectedEdges(id).length;
            
            telefones.push({
                id: id,
                telefone: telefone,
                conexoes: conexoes
            });
        });
        const totalTE = telefones.length;
        const textoTE = totalTE === 1 ? 'TELEFONE (TE)' : 'TELEFONES (TE)';

        // CALCULA TOTAL E EXTRAI DADOS DE EM (E-mail)
        const emails = [];
        selectedNodes.forEach(function (id) {
            if (typeof id !== 'string' || !id.startsWith('EM_')) return;
            
            const email = id.substring(3);
            const conexoes = network.getConnectedEdges(id).length;
            
            emails.push({
                id: id,
                email: email,
                conexoes: conexoes
            });
        });
        const totalEM = emails.length;
        const textoEM = totalEM === 1 ? 'E-MAIL (EM)' : 'E-MAILS (EM)';


        // CALCULA TOTAL PF
        let totalPF = 0;
        selectedNodes.forEach(function (id) {
            if (typeof id === 'string' && id.startsWith('PF_')) {
                totalPF++;
            }
        });
        const textoNosPF = totalPF === 1 ? 'PESSOA FÍSICA (PF)' : 'PESSOAS FÍSICAS (PF)';

        // GERA LINHAS DE PJ
        let linhasPJ = '';
        pessoasJuridicas.forEach(function (pj) {
            const badgeSituacao = pj.situacao === 'ATIVA' 
                ? '<span class="badge badge-success">ATIVA</span>' 
                : '<span class="badge badge-danger">BAIXADA</span>';
            const badgeRestricao = pj.restricao 
                ? '<span class="badge badge-danger">' + pj.restricao + '</span>' 
                : '';
            
            linhasPJ += '<tr>';
            linhasPJ += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Abrir dados da pessoa jurídica" onclick="window.opener.consultarCNPJ(\'' + pj.cnpj + '\'); return false;">' + pj.nome + '</a> 🔍</div></td>';
            linhasPJ += '<td><a href="#" onclick="window.open(\'https://solucoes.receita.fazenda.gov.br/servicos/cnpjreva/Cnpjreva_Solicitacao.asp?cnpj=' + pj.cnpj + '\', \'popupCNPJ\', \'left=50,top=50,width=800,height=600,scrollbars=yes,resizable=yes\'); return false;" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Consultar CNPJ na Receita Federal">' + pj.cnpj + '</a> 🔍</td>';
            linhasPJ += '<td><span class="connections">🔗 ' + pj.conexoes + '</span></td>';
            linhasPJ += '<td>' + badgeSituacao + '</td>';
            linhasPJ += '<td></td>';
            linhasPJ += '<td><div class="restrictions">' + badgeRestricao + '</div></td>';
            linhasPJ += '</tr>';
        });


        // GERA LINHAS DE PE
        let linhasPE = '';
        pessoasEstrangeiras.forEach(function (pe) {
            const badgeSituacao = pe.situacao === 'ATIVA' 
                ? '<span class="badge badge-success">ATIVA</span>' 
                : '<span class="badge badge-danger">BAIXADA</span>';
            const badgeRestricao = pe.restricao 
                ? '<span class="badge badge-danger">' + pe.restricao + '</span>' 
                : '';
            const badgePais = pe.pais 
                ? '<span class="badge badge-info">' + pe.pais + '</span>' 
                : '';
            const coluna2 = pe.cnpj ? pe.cnpj : pe.endereco;
            
            linhasPE += '<tr>';
            linhasPE += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Pesquisar no Google com IA" onclick="window.open(\'https://www.google.com/search?q=' + encodeURIComponent(textoPesquisa + ' Entidade: ' + pe.nome + (pe.cnpj ? ' (CNPJ: ' + pe.cnpj + ')' : ' (Pessoa Estrangeira)')) + '&udm=50\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + pe.nome + '</a> 🔍</div></td>';
            linhasPE += '<td>' + (pe.cnpj ? '<a href="#" onclick="window.open(\'https://solucoes.receita.fazenda.gov.br/servicos/cnpjreva/Cnpjreva_Solicitacao.asp?cnpj=' + pe.cnpj + '\', \'popupCNPJ\', \'left=50,top=50,width=800,height=600,scrollbars=yes,resizable=yes\'); return false;" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Consultar CNPJ na Receita Federal">' + pe.cnpj + '</a> 🔍</td>' : coluna2) + '</td>';
            linhasPE += '<td><span class="connections">🔗 ' + pe.conexoes + '</span></td>';
            linhasPE += '<td>' + badgeSituacao + '</td>';
            linhasPE += '<td>' + badgePais + '</td>';
            linhasPE += '<td><div class="restrictions">' + badgeRestricao + '</div></td>';
            linhasPE += '</tr>';
        });



        // GERA LINHAS DE EN
        let linhasEN = '';
        enderecos.forEach(function (en) {
            linhasEN += '<tr>';
            linhasEN += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Pesquisar no Google com IA" onclick="window.open(\'https://www.google.com/search?q=' + encodeURIComponent(textoPesquisa + ' Entidade: Endereço ' + en.endereco) + '&udm=50\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + en.endereco + '</a> 🔍</div></td>';
            linhasEN += '<td></td>';
            linhasEN += '<td><span class="connections">🔗 ' + en.conexoes + '</span></td>';
            linhasEN += '<td></td>';
            linhasEN += '<td></td>';
            linhasEN += '<td></td>';
            linhasEN += '</tr>';
        });



        // GERA LINHAS DE TE
        let linhasTE = '';
        telefones.forEach(function (te) {
            linhasTE += '<tr>';
            linhasTE += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Pesquisar no Google com IA" onclick="window.open(\'https://www.google.com/search?q=' + encodeURIComponent(textoPesquisa + ' Entidade: Telefone ' + te.telefone) + '&udm=50\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + te.telefone + '</a> 🔍</div></td>';
            linhasTE += '<td></td>';
            linhasTE += '<td><span class="connections">🔗 ' + te.conexoes + '</span></td>';
            linhasTE += '<td></td>';
            linhasTE += '<td></td>';
            linhasTE += '<td></td>';
            linhasTE += '</tr>';
        });



        // GERA LINHAS DE EM
        let linhasEM = '';
        emails.forEach(function (em) {
            linhasEM += '<tr>';
            linhasEM += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Pesquisar no Google com IA" onclick="window.open(\'https://www.google.com/search?q=' + encodeURIComponent(textoPesquisa + ' Entidade: E-mail ' + em.email) + '&udm=50\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + em.email + '</a> 🔍</div></td>';
            linhasEM += '<td></td>';
            linhasEM += '<td><span class="connections">🔗 ' + em.conexoes + '</span></td>';
            linhasEM += '<td></td>';
            linhasEM += '<td></td>';
            linhasEM += '<td></td>';
            linhasEM += '</tr>';
        });


        // EXTRAI NOME, CEP E CONEXÕES
        const pessoasFisicas = [];

        selectedNodes.forEach(function (id) {
            if (typeof id !== 'string' || !id.startsWith('PF_')) return;

            // Remove o prefixo "PF_"
            const dados = id.substring(3);

            // CPF é o primeiro bloco, nome vem depois
            const primeiroEspaco = dados.indexOf('-');
            if (primeiroEspaco === -1) return;

            const cpf = dados.substring(0, primeiroEspaco).trim();
            const nome = dados.substring(primeiroEspaco + 1).trim();

            // Conta conexões adjacentes
            const conexoes = network.getConnectedEdges(id).length;

            pessoasFisicas.push({
                id: id,
                nome: nome,
                cpf: cpf,
                conexoes: conexoes
            });
        });


        let linhasPF = '';
        pessoasFisicas.forEach(function (pf) {
            linhasPF += '<tr>';
            linhasPF += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Pesquisar no Google com IA" onclick="window.open(\'https://www.google.com/search?q=' + encodeURIComponent(textoPesquisa + ' Entidade: ' + pf.nome + ' (CPF: ' + pf.cpf + ')') + '&udm=50\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + pf.nome + '</a> 🔍</div></td>';
            linhasPF += '<td>' + pf.cpf + '</td>';
            linhasPF += '<td><span class="connections">🔗 ' + pf.conexoes + '</span></td>';
            linhasPF += '<td></td>';
            linhasPF += '<td></td>';
            linhasPF += '<td></td>';
            linhasPF += '</tr>';
        });



        let html = "";

        html += '<!DOCTYPE html>';
        html += '<html lang="pt-BR">';
        html += '<head>';
        html += '    <meta charset="UTF-8">';
        html += '    <meta name="viewport" content="width=device-width, initial-scale=1.0">';
        html += '    <title>SINARC - Nós Selecionados</title>';
        html += '    <style>';
        html += '    * {';
        html += '    margin: 0;';
        html += '    padding: 0;';
        html += '    box-sizing: border-box;';
        html += '    }';
        html += '    body {';
        html += '        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;';
        html += '        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);';
        html += '        padding: 20px;';
        html += '        color: #2c3e50;';
        html += '    }';
        html += '    .container {';
        html += '        max-width: 1200px;';
        html += '        margin: 0 auto;';
        html += '        background: white;';
        html += '        border-radius: 12px;';
        html += '            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);';
        html += '            overflow: hidden;';
        html += '        }';
        html += '        .header {';
        html += '            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);';
        html += '            color: white;';
        html += '            padding: 20px 30px;';
        html += '        }';
        html += '        .header h1 {';
        html += '            font-size: 24px;';
        html += '            margin-bottom: 0px;';
        html += '        }';
        html += '        .toolbar {';
        html += '            padding: 20px 30px;';
        html += '            background: transparent;';
        html += '            border-bottom: none;';
        html += '            display: flex;';
        html += '            gap: 15px;';
        html += '            flex-wrap: wrap;';
        html += '            align-items: center;';
        html += '        }';
        html += '        .search-box {';
        html += '            flex: 1;';
        html += '            min-width: 250px;';
        html += '            position: relative;';
        html += '        }';
        html += '        .search-box input {';
        html += '            width: 100%;';
        html += '            padding: 10px 40px 10px 15px;';
        html += '            border: 2px solid #e9ecef;';
        html += '            border-radius: 8px;';
        html += '            font-size: 14px;';
        html += '            transition: all 0.3s;';
        html += '        }';
        html += '        .search-box input:focus {';
        html += '            outline: none;';
        html += '            border-color: #667eea;';
        html += '        }';
        html += '        .search-icon {';
        html += '            position: absolute;';
        html += '            right: 12px;';
        html += '            top: 50%;';
        html += '            transform: translateY(-50%);';
        html += '            color: #adb5bd;';
        html += '        }';
        html += '        .btn {';
        html += '        padding: 10px 20px;';
        html += '            border: none;';
        html += '            border-radius: 8px;';
        html += '            cursor: pointer;';
        html += '            font-size: 14px;';
        html += '            font-weight: 600;';
        html += '            transition: all 0.3s;';
        html += '            display: inline-flex;';
        html += '            align-items: center;';
        html += '            gap: 8px;';
        html += '        }';
        html += '        .btn-primary {';
        html += '            background: #667eea;';
        html += '            color: white;';
        html += '        }';
        html += '        .btn-primary:hover {';
        html += '            background: #5568d3;';
        html += '            transform: translateY(-2px);';
        html += '            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);';
        html += '        }';
        html += '        .btn-secondary {';
        html += '            background: #28a745;';
        html += '            color: white;';
        html += '        }';
        html += '        .btn-secondary:hover {';
        html += '            background: #218838;';
        html += '            transform: translateY(-2px);';
        html += '            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);';
        html += '        }';
        html += '        .content {';
        html += '            padding: 30px;';
        html += '        }';
        html += '        .node-section {';
        html += '            margin-bottom: 30px;';
        html += '        }';
        html += '        .table-wrapper {';
        html += '            overflow-x: auto;';
        html += '            -webkit-overflow-scrolling: touch;';
        html += '        }';
        html += '        .section-header {';
        html += '            display: flex;';
        html += '            align-items: center;';
        html += '            gap: 15px;';
        html += '            margin-bottom: 15px;';
        html += '            padding: 15px;';
        html += '            border-radius: 8px;';
        html += '            cursor: pointer;';
        html += '            transition: all 0.3s;';
        html += '            background: linear-gradient(135deg, #667eea20 0%, #764ba220 100%);';
        html += '            border-left: 4px solid #667eea;';
        html += '        }';
        html += '        .section-header:hover {';
        html += '            transform: translateX(5px);';
        html += '        }';
        html += '        .section-header .icon {';
        html += '            width: 32px;';
        html += '            height: 32px;';
        html += '            object-fit: contain;';
        html += '            flex-shrink: 0;';
        html += '        }';
        html += '        @media (max-width: 768px) {';
        html += '            .section-header .icon {';
        html += '                width: 28px;';
        html += '                height: 28px;';
        html += '            }';
        html += '        }';
        html += '        .section-header .title {';
        html += '            flex: 1;';
        html += '        }';
        html += '        .section-header .title h2 {';
        html += '            font-size: 18px;';
        html += '            margin-bottom: 3px;';
        html += '        }';
        html += '        .section-header .title .count {';
        html += '            font-size: 12px;';
        html += '            opacity: 0.7;';
        html += '        }';
        html += '        .node-table {';
        html += '            width: 100%;';
        html += '            border-collapse: collapse;';
        html += '            margin-bottom: 20px;';
        html += '            display: none;';
        html += '            min-width: 1000px;';
        html += '        }';
        html += '        .node-table.show {';
        html += '            display: table;';
        html += '        }';
        html += '        .node-table {';
        html += '            table-layout: fixed;';
        html += '        }';
        html += '        .node-table th:nth-child(1),';
        html += '        .node-table td:nth-child(1) {';
        html += '            width: 40%;';
        html += '        }';
        html += '        .node-table th:nth-child(2),';
        html += '        .node-table td:nth-child(2) {';
        html += '            width: 15%;';
        html += '        }';
        html += '        .node-table th:nth-child(3),';
        html += '        .node-table td:nth-child(3) {';
        html += '            width: 10%;';
        html += '        }';
        html += '        .node-table th:nth-child(4),';
        html += '        .node-table td:nth-child(4) {';
        html += '            width: 10%;';
        html += '        }';
        html += '        .node-table th:nth-child(5),';
        html += '        .node-table td:nth-child(5) {';
        html += '            width: 15%;';
        html += '        }';
        html += '        .node-table th:nth-child(6),';
        html += '        .node-table td:nth-child(6) {';
        html += '            width: 10%;';
        html += '        }';
        html += '        .node-table thead {';
        html += '            background: #f8f9fa;';
        html += '        }';
        html += '        .node-table th {';
        html += '            padding: 12px;';
        html += '            text-align: left;';
        html += '            font-size: 12px;';
        html += '            font-weight: 600;';
        html += '            color: #6c757d;';
        html += '            text-transform: uppercase;';
        html += '            border-bottom: 2px solid #dee2e6;';
        html += '        }';
        html += '        .node-table th {';
        html += '            padding: 12px;';
        html += '            text-align: left;';
        html += '            font-size: 12px;';
        html += '            font-weight: 600;';
        html += '            color: #6c757d;';
        html += '            text-transform: uppercase;';
        html += '            border-bottom: 2px solid #dee2e6;';
        html += '        }';
        html += '        .node-table th.sortable {';
        html += '            cursor: pointer;';
        html += '            user-select: none;';
        html += '            position: relative;';
        html += '            padding-right: 25px;';
        html += '        }';
        html += '        .node-table th.sortable:hover {';
        html += '            background: #e9ecef;';
        html += '        }';
        html += '        .node-table th.sortable::after {';
        html += '            content: "⇅";';
        html += '            position: absolute;';
        html += '            right: 8px;';
        html += '            opacity: 0.3;';
        html += '            font-size: 14px;';
        html += '        }';
        html += '        .node-table th.sortable.asc::after {';
        html += '            content: "▲";';
        html += '            opacity: 1;';
        html += '            color: #667eea;';
        html += '        }';
        html += '        .node-table th.sortable.desc::after {';
        html += '            content: "▼";';
        html += '            opacity: 1;';
        html += '            color: #667eea;';
        html += '        }';
        html += '        .node-table td {';
        html += '            padding: 12px;';
        html += '            border-bottom: 1px solid #f1f3f5;';
        html += '            font-size: 14px;';
        html += '        }';
        html += '        .node-table tbody tr:hover {';
        html += '            background: #f8f9fa;';
        html += '        }';
        html += '        .node-table tbody tr:nth-child(even) {';
        html += '            background: #fafbfc;';
        html += '        }';
        html += '        .badge {';
        html += '            display: inline-block;';
        html += '            padding: 4px 8px;';
        html += '            border-radius: 4px;';
        html += '            font-size: 11px;';
        html += '            font-weight: 600;';
        html += '            margin-right: 5px;';
        html += '            margin-bottom: 3px;';
        html += '        }';
        html += '        .badge-success {';
        html += '            background: #d4edda;';
        html += '            color: #155724;';
        html += '        }';
        html += '        .badge-danger {';
        html += '            background: #f8d7da;';
        html += '            color: #721c24;';
        html += '        }';
        html += '        .badge-warning {';
        html += '            background: #fff3cd;';
        html += '            color: #856404;';
        html += '        }';
        html += '        .badge-info {';
        html += '            background: #d1ecf1;';
        html += '            color: #0c5460;';
        html += '        }';
        html += '        .badge-secondary {';
        html += '            background: #e2e3e5;';
        html += '            color: #383d41;';
        html += '        }';
        html += '        .node-name {';
        html += '            font-weight: 600;';
        html += '            color: #2c3e50;';
        html += '        }';
        html += '        .node-id {';
        html += '            font-size: 11px;';
        html += '            color: #6c757d;';
        html += '            font-family: "Courier New", monospace;';
        html += '        }';
        html += '        .connections {';
        html += '            display: inline-flex;';
        html += '            align-items: center;';
        html += '            gap: 5px;';
        html += '            padding: 4px 10px;';
        html += '            background: #e7f3ff;';
        html += '            border-radius: 12px;';
        html += '            font-size: 12px;';
        html += '            color: #0066cc;';
        html += '            font-weight: 600;';
        html += '        }';
        html += '        .restrictions {';
        html += '            display: flex;';
        html += '            flex-wrap: wrap;';
        html += '            gap: 5px;';
        html += '        }';
        html += '        .collapse-icon {';
        html += '            transition: transform 0.3s;';
        html += '        }';
        html += '        .collapse-icon.rotated {';
        html += '            transform: rotate(180deg);';
        html += '        }';
        html += '</style>';
        html += '</head>';

        html += '<body>';
        html += '<div class="container">';
        html += '<div class="header">';
        html += '<h1>🔍 ' + totalSelecionados + ' ' + textoNos + '</h1>';
        html += '</div>';
        html += '<div class="toolbar">';
        html += '            <div class="search-box">';
        html += '                <input type="text" id="searchInput" placeholder="🔎 Buscar por nome, CPF, CNPJ...">';
        html += '                <span class="search-icon">⌕</span>';
        html += '            </div>';
        html += '            <button class="btn btn-secondary" onclick="salvarArquivo()">';
        html += '                💾 Salvar Relatório';
        html += '            </button>';
        html += '        </div>';
        html += '<div class="content">';
        
        html += '    <div class="node-section">';
        html += '        <div class="section-header" onclick="toggleSection(\'pf\')">';
        html += '            <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/pf_homem.png" alt="Pessoa Física" class="icon">';
        html += '            <div class="title">';
        html += '                <h2>' + totalPF +  ' ' + textoNosPF + '</h2>';
        html += '            </div>';
        html += '            <span class="collapse-icon" id="icon-pf">▼</span>';
        html += '        </div>';
        html += '        <div class="table-wrapper">';
        html += '            <table class="node-table show" id="table-pf">';
        html += '                <thead>';
        html += '                    <tr>';
        html += '                        <th>Nome</th>';
        html += '                        <th>CPF</th>';
        html += '                        <th>Conexões</th>';
        html += '                        <th></th>';
        html += '                        <th></th>';
        html += '                        <th></th>';
        html += '                    </tr>';
        html += '                </thead>';
        html += '                <tbody>';
        html +=                      linhasPF;
        html += '                </tbody>';
        html += '            </table>';
        html += '        </div>';
        html += '    </div>';
        
        html += '            <div class="node-section">';
        html += '                <div class="section-header" onclick="toggleSection(\'pj\')">';
        html += '                    <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/pj_brasil_ativa.png" alt="Pessoa Jurídica" class="icon">';
        html += '                    <div class="title">';
        html += '                        <h2>' + totalPJ + ' ' + textoPJ + '</h2>';
        html += '                    </div>';
        html += '                    <span class="collapse-icon" id="icon-pj">▼</span>';
        html += '                </div>';
        html += '                <div class="table-wrapper">';
        html += '                    <table class="node-table show" id="table-pj">';
        html += '                        <thead>';
        html += '                            <tr>';
        html += '                                <th>Razão Social</th>';
        html += '                                <th>CNPJ</th>';
        html += '                                <th>Conexões</th>';
        html += '                                <th>Situação</th>';
        html += '                                <th>País</th>';
        html += '                                <th>Restrições</th>';
        html += '                            </tr>';
        html += '                        </thead>';
        html += '                        <tbody>';
        html +=                              linhasPJ;
        html += '                        </tbody>';
        html += '                    </table>';
        html += '                </div>';
        html += '            </div>';
        
        html += '            <div class="node-section">';
        html += '                <div class="section-header" onclick="toggleSection(\'pe\')">';
        html += '                    <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/pj_exterior_ativa.png" alt="Pessoa Estrangeira" class="icon">';
        html += '                    <div class="title">';
        html += '                        <h2>' + totalPE + ' ' + textoPE + '</h2>';
        html += '                    </div>';
        html += '                    <span class="collapse-icon" id="icon-pe">▼</span>';
        html += '                </div>';
        html += '                <div class="table-wrapper">';
        html += '                    <table class="node-table show" id="table-pe">';
        html += '                        <thead>';
        html += '                            <tr>';
        html += '                                <th>Razão Social</th>';
        html += '                                <th>CNPJ</th>';
        html += '                                <th>Conexões</th>';
        html += '                                <th>Situação</th>';
        html += '                                <th>País</th>';
        html += '                                <th>Restrições</th>';
        html += '                            </tr>';
        html += '                        </thead>';
        html += '                        <tbody>';
        html +=                              linhasPE;
        html += '                        </tbody>';
        html += '                    </table>';
        html += '                </div>';
        html += '            </div>';
        
        html += '            <div class="node-section">';
        html += '                <div class="section-header" onclick="toggleSection(\'en\')">';
        html += '                    <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/endereco.png" alt="Endereço" class="icon">';
        html += '                    <div class="title">';
        html += '                        <h2>' + totalEN + ' ' + textoEN + '</h2>';
        html += '                    </div>';
        html += '                    <span class="collapse-icon" id="icon-en">▼</span>';
        html += '                </div>';
        html += '                <div class="table-wrapper">';
        html += '                    <table class="node-table show" id="table-en">';
        html += '                        <thead>';
        html += '                            <tr>';
        html += '                                <th>Endereço</th>';
        html += '                                <th></th>';
        html += '                                <th>Conexões</th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                            </tr>';
        html += '                        </thead>';
        html += '                        <tbody>';
        html +=                              linhasEN;
        html += '                        </tbody>';
        html += '                    </table>';
        html += '                </div>';
        html += '            </div>';
        
        html += '            <div class="node-section">';
        html += '                <div class="section-header" onclick="toggleSection(\'te\')">';
        html += '                    <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/telefone.png" alt="Telefone" class="icon">';
        html += '                    <div class="title">';
        html += '                        <h2>' + totalTE + ' ' + textoTE + '</h2>';
        html += '                    </div>';
        html += '                    <span class="collapse-icon" id="icon-te">▼</span>';
        html += '                </div>';
        html += '                <div class="table-wrapper">';
        html += '                    <table class="node-table show" id="table-te">';
        html += '                        <thead>';
        html += '                            <tr>';
        html += '                                <th>Telefone</th>';
        html += '                                <th></th>';
        html += '                                <th>Conexões</th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                            </tr>';
        html += '                        </thead>';
        html += '                        <tbody>';
        html +=                              linhasTE;
        html += '                        </tbody>';
        html += '                    </table>';
        html += '                </div>';
        html += '            </div>';
        
        html += '            <div class="node-section">';
        html += '                <div class="section-header" onclick="toggleSection(\'em\')">';
        html += '                    <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/email.png" alt="E-mail" class="icon">';
        html += '                    <div class="title">';
        html += '                        <h2>' + totalEM + ' ' + textoEM + '</h2>';
        html += '                    </div>';
        html += '                    <span class="collapse-icon" id="icon-em">▼</span>';
        html += '                </div>';
        html += '                <div class="table-wrapper">';
        html += '                    <table class="node-table show" id="table-em">';
        html += '                        <thead>';
        html += '                            <tr>';
        html += '                                <th>E-mail</th>';
        html += '                                <th></th>';
        html += '                                <th>Conexões</th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                            </tr>';
        html += '                        </thead>';
        html += '                        <tbody>';
        html +=                              linhasEM;
        html += '                        </tbody>';
        html += '                    </table>';
        html += '                </div>';
        html += '            </div>';
        html += '        </div>';
        html += '    </div>';

        html += '<scr' + 'ipt>';
        html += '        function toggleSection(type) {';
        html += '            const table = document.getElementById(`table-${type}`);';
        html += '            const icon = document.getElementById(`icon-${type}`);';
        html += '            table.classList.toggle("show");';
        html += '            icon.classList.toggle("rotated");';    
        html += '        }';
        html += '        function salvarArquivo() {';
        html += '            const conteudoHTML = document.documentElement.outerHTML;';
        html += '            const blob = new Blob([conteudoHTML], { type: "text/html;charset=utf-8" });';
        html += '            const url = URL.createObjectURL(blob);';
        html += '            const link = document.createElement("a");';
        html += '            link.href = url;';
        html += '            const agora = new Date();';
        html += '            const dataHora = agora.getFullYear() + "-" + String(agora.getMonth() + 1).padStart(2, "0") + "-" + String(agora.getDate()).padStart(2, "0") + "_" + String(agora.getHours()).padStart(2, "0") + "-" + String(agora.getMinutes()).padStart(2, "0");';
        html += '            link.download = "SINARC_Relatorio_" + dataHora + ".html";';
        html += '            document.body.appendChild(link);';
        html += '            link.click();';
        html += '            document.body.removeChild(link);';
        html += '            URL.revokeObjectURL(url);';
        html += '        }';
        html += '        document.getElementById("searchInput").addEventListener("input", function(e) {';
        html += '            const searchTerm = e.target.value.toLowerCase();';
        html += '            const tables = document.querySelectorAll(".node-table");';
        html += '            tables.forEach(table => {';
        html += '                const rows = table.querySelectorAll("tbody tr");';
        html += '                rows.forEach(row => {';
        html += '                    const text = row.textContent.toLowerCase();';
        html += '                    row.style.display = text.includes(searchTerm) ? "" : "none";';
        html += '                });';
        html += '            });';
        html += '        });';
        html += '        function tornarColunasOrdenaveis() {';
        html += '            const tabelas = document.querySelectorAll(".node-table");';
        html += '            tabelas.forEach(tabela => {';
        html += '                const cabecalhos = tabela.querySelectorAll("thead th");';
        html += '                cabecalhos.forEach((th, index) => {';
        html += '                    if (th.textContent.trim() !== "") {';
        html += '                        th.classList.add("sortable");';
        html += '                        th.addEventListener("click", function() {';
        html += '                            ordenarTabela(tabela, index);';
        html += '                        });';
        html += '                    }';
        html += '                });';
        html += '            });';
        html += '        }';
        html += '        function ordenarTabela(tabela, colunaIndex) {';
        html += '            const tbody = tabela.querySelector("tbody");';
        html += '            const linhas = Array.from(tbody.querySelectorAll("tr"));';
        html += '            const cabecalhos = tabela.querySelectorAll("thead th");';
        html += '            const cabecalhoAtual = cabecalhos[colunaIndex];';
        html += '            let ordemAtual = "none";';
        html += '            if (cabecalhoAtual.classList.contains("asc")) ordemAtual = "asc";';
        html += '            if (cabecalhoAtual.classList.contains("desc")) ordemAtual = "desc";';
        html += '            cabecalhos.forEach(th => th.classList.remove("asc", "desc"));';
        html += '            let novaOrdem = ordemAtual === "asc" ? "desc" : "asc";';
        html += '            cabecalhoAtual.classList.add(novaOrdem);';
        html += '            linhas.sort(function(a, b) {';
        html += '                const celulaA = a.cells[colunaIndex];';
        html += '                const celulaB = b.cells[colunaIndex];';
        html += '                if (!celulaA || !celulaB) return 0;';
        html += '                let valorA = celulaA.querySelector(".node-name")';
        html += '                    ? celulaA.querySelector(".node-name").textContent';
        html += '                    : celulaA.querySelector(".connections")';
        html += '                        ? celulaA.querySelector(".connections").textContent';
        html += '                        : celulaA.textContent;';
        html += '                let valorB = celulaB.querySelector(".node-name")';
        html += '                    ? celulaB.querySelector(".node-name").textContent';
        html += '                    : celulaB.querySelector(".connections")';
        html += '                        ? celulaB.querySelector(".connections").textContent';
        html += '                        : celulaB.textContent;';
        html += '                valorA = valorA.trim();';
        html += '                valorB = valorB.trim();';
        html += '                const numA = parseFloat(valorA.replace(/[^\\d.-]/g, ""));';
        html += '                const numB = parseFloat(valorB.replace(/[^\\d.-]/g, ""));';
        html += '                let resultado;';
        html += '                if (!isNaN(numA) && !isNaN(numB)) {';
        html += '                    resultado = numA - numB;';
        html += '                } else {';
        html += '                    resultado = valorA.localeCompare(valorB, "pt-BR", { sensitivity: "base" });';
        html += '                }';
        html += '                return novaOrdem === "asc" ? resultado : -resultado;';
        html += '            });';
        html += '            linhas.forEach(function(linha) { tbody.appendChild(linha); });';
        html += '        }';
        html += '        function ordenarTabelas() {';
        html += '            const tabelas = document.querySelectorAll(".node-table tbody");';
        html += '            tabelas.forEach(tbody => {';
        html += '                const linhas = Array.from(tbody.querySelectorAll("tr"));';
        html += '                if (linhas.length === 0) return;';
        html += '                linhas.sort((a, b) => {';
        html += '                    const aNomeEl = a.querySelector(".node-name");';
        html += '                    const bNomeEl = b.querySelector(".node-name");';
        html += '                    if (!aNomeEl || !bNomeEl) return 0;';
        html += '                    const nomeA = aNomeEl.textContent.trim().toUpperCase();';
        html += '                    const nomeB = bNomeEl.textContent.trim().toUpperCase();';
        html += '                    return nomeA.localeCompare(nomeB, "pt-BR");';
        html += '                });';
        html += '                linhas.forEach(linha => tbody.appendChild(linha));';
        html += '            });';
        html += '        }';
        html += '        window.addEventListener("DOMContentLoaded", function() {';
        html += '            ordenarTabelas();';
        html += '            tornarColunasOrdenaveis();';
        html += '        });';
        html += '</scr' + 'ipt>';
        html += '</body>';
        html += '</html>'

        const janela = window.open(
            'about:blank',
            '_blank',
            'width=1200,height=800,scrollbars=yes,resizable=yes'
        );

        //console.log(html);

        // Escrever HTML na janela
        janela.document.open();
        janela.document.write(html);
        janela.document.close();
    }

    window.gerarRelatorio = gerarRelatorio;

    const selectedNodes_2 = network.getSelectedNodes();
    const totalSelecionados = selectedNodes_2.length;
    const textoNos = totalSelecionados === 1 ? 'NÓ SELECIONADO' : 'NÓS SELECIONADOS';

</script>







</body>)     -->
    <!-- ===================================================== -->

    <style>
    /* Estilos do Menu Suspenso SINARC */
    #sinarc-menu-container {
        position: fixed;
        top: 30px;
        left: 21px;
        z-index: 10000;
        font-family: Arial, sans-serif;
    }

    #sinarc-menu-toggle {
        background: rgba(255, 255, 255, 0.7);
        border: 1px solid rgba(89, 201, 67, 0.6);
        border-radius: 4px;
        width: 40px;
        height: 40px;
        cursor: pointer;
        font-size: 20px;
        color: #555;
        box-shadow: 0 1px 5px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        user-select: none;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    #sinarc-menu-toggle:hover {
        background: rgba(89, 201, 67, 0.15);
        border-color: rgba(89, 201, 67, 0.9);
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    #sinarc-menu-dropdown {
        display: none;
        position: absolute;
        top: 42px;
        left: 0;
        background: rgba(255, 255, 255, 0.97);
        border: 2px solid rgba(89, 201, 67, 1);
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        min-width: 300px;
        max-height: 600px;
        overflow-y: auto;
        overflow-x: hidden;
    }

    #sinarc-menu-dropdown.show {
        display: block;
    }

    .menu-category {
        border-bottom: 1px solid rgba(200, 200, 200, 0.5);
    }

    .menu-category:last-child {
        border-bottom: none;
    }

    .category-header {
        background: linear-gradient(to right, rgba(89, 201, 67, 0.15), rgba(89, 201, 67, 0.05));
        padding: 10px 15px;
        font-weight: bold;
        font-size: 13px;
        color: #2c5f2d;
        cursor: pointer;
        user-select: none;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background 0.2s ease;
    }

    .category-header:hover {
        background: linear-gradient(to right, rgba(89, 201, 67, 0.25), rgba(89, 201, 67, 0.1));
    }

    .category-header .arrow {
        font-size: 12px;
        transition: transform 0.3s ease;
    }

    .category-header.expanded .arrow {
        transform: rotate(90deg);
    }

    .category-items {
        display: none;
        background: rgba(255, 255, 255, 0.5);
    }

    .category-items.show {
        display: block;
    }

    .menu-item {
        padding: 8px 15px 8px 30px;
        font-size: 12px;
        border-bottom: 1px solid rgba(230, 230, 230, 0.5);
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .menu-item:last-child {
        border-bottom: none;
    }

    .menu-item:hover {
        background: rgba(89, 201, 67, 0.1);
        padding-left: 35px;
    }

    .menu-item:active {
        background: rgba(89, 201, 67, 0.3);
    }

    .menu-item .key {
        display: inline-block;
        background: rgba(89, 201, 67, 0.3);
        padding: 2px 8px;
        border-radius: 4px;
        font-weight: bold;
        font-size: 11px;
        min-width: 70px;
        text-align: center;
        margin-right: 10px;
        color: #2c5f2d;
        font-family: 'Consolas', 'Courier New', monospace; /* <-- FONTE DAS LETRAS DO BOTÃO */
    }

    .menu-item .description {
        color: #555;
        font-size: 11px;
    }

    .menu-search {
        padding: 10px;
        border-bottom: 2px solid rgba(89, 201, 67, 0.3);
    }

    .menu-search input {
        width: 100%;
        padding: 8px;
        border: 1px solid rgba(200, 200, 200, 0.8);
        border-radius: 5px;
        font-size: 12px;
        box-sizing: border-box;
    }

    .menu-search input:focus {
        outline: none;
        border-color: rgba(89, 201, 67, 1);
    }

    /* Scrollbar personalizada */
    #sinarc-menu-dropdown::-webkit-scrollbar {
        width: 8px;
    }

    #sinarc-menu-dropdown::-webkit-scrollbar-track {
        background: rgba(240, 240, 240, 0.5);
        border-radius: 4px;
    }

    #sinarc-menu-dropdown::-webkit-scrollbar-thumb {
        background: rgba(89, 201, 67, 0.5);
        border-radius: 4px;
    }

    #sinarc-menu-dropdown::-webkit-scrollbar-thumb:hover {
        background: rgba(89, 201, 67, 0.8);
    }

    .menu-item.hidden {
        display: none;
    }

    .menu-note {
        padding: 8px 15px;
        font-size: 10px;
        color: #777;
        font-style: italic;
        background: rgba(255, 255, 200, 0.3);
    }

    /* Oculta campo de busca */
    .menu-search {
        display: none !important;
    }

    </style>

    <div id="sinarc-menu-container">
        <div id="sinarc-menu-toggle" title="Comandos do SINARC">⌨</div>
        <div id="sinarc-menu-dropdown">
            
            <!-- Campo de Busca -->
            <div class="menu-search">
                <input type="text" id="menu-search-input" placeholder="🔍 Buscar comando..." autocomplete="off">
            </div>

            <!-- 1. CONTROLES BÁSICOS E NAVEGAÇÃO -->
            <div class="menu-category">
                <div class="category-header" data-category="basicos">
                    <span>🎮 Controles Básicos</span>
                    <span class="arrow">▶</span>
                </div>
                <div class="category-items" data-category="basicos">
            
                    <div class="menu-item" data-key="s" title="Consulta livre por CNPJ, razão social, nome de fantasia ou CPF (não gera alvo com destaque em vermelho)">
                        <span class="key">s</span>
                        <span class="description">Consulta na base de dados</span>
                    </div>
                    <div class="menu-item" data-key="o" title="Abre nós selecionados (nós-alvos) em n camadas">
                        <span class="key">o</span>
                        <span class="description">Abre nós selecionados (alvos)</span>
                    </div>
                    <div class="menu-item" data-key="O" title="Abre matriz e filiais da PJ selecionada">
                        <span class="key">Shift + o</span>
                        <span class="description">Abre matriz e filiais</span>
                    </div>
                    <div class="menu-item" data-key="p" title="Pausa/retoma interação gravitacional entre os nós">
                        <span class="key">p</span>
                        <span class="description">Pausa movimentos dos nós</span>
                    </div>              
                    <div class="menu-item" data-key="A" title="Seleciona todos os nós">
                        <span class="key">Shift + a</span>
                        <span class="description">Seleciona todos os nós</span>
                    </div>
                    <div class="menu-item" data-function="gerarRelatorio" title="Gera relatório dos nós selecionados">
                        <span class="key">📝</span>
                        <span class="description">Abre relatório nós selecionados</span>
                    </div>
                    <div class="menu-item" data-function="gerarMapaDoGrafo" title="Exibe no mapa os endereços das PJ selecionadas (não inclui PE)">
                        <span class="key">📌</span>
                        <span class="description">Exibe no mapa endereços PJ </span>
                    </div>
                    <div class="menu-item" data-function="exportarGrafoParaPDF" title="Exporta estrutura de dados JSON do grafo (nós e arestas) em formato PDF para análise com IA">
                        <span class="key">⬆️</span>
                        <span class="description">Exporta estrutura em PDF</span>
                    </div>
                    <div class="menu-item" data-function="exibirSistemasIA" title="Sistemas de Inteligência Artificial para análise de grafos">
                        <span class="key">🤖</span>
                        <span class="description">Sistemas de IA</span>
                    </div>
                    <div class="menu-item" data-key="h" title="Abre manual do SINARC no navegador">
                        <span class="key">h</span>
                        <span class="description">Abre manual SINARC</span>
                    </div>
                    <div class="menu-item" data-key="f" title="Fixa/libera nós selecionados">
                        <span class="key">f</span>
                        <span class="description">Fixa nós selecionados</span>
                    </div> 
                    <div class="menu-item" data-key="F5" title="Recarrega grafo em uma posição aleatória (apenas tecla física)">
                        <span class="key">F5</span>
                        <span class="description">Recarrega grafo (tecla física)</span>
                    </div>
                    <div class="menu-item" data-key="F11" title="Ativa/desativa modo tela cheia (apenas tecla física)">
                        <span class="key">F11</span>
                        <span class="description">Modo tela cheia (tecla física)</span>
                    </div>
                    <div class="menu-item" data-key="Escape" title="Centraliza grafo na tela (mesmo que duplo clique na área vazia do grafo)">
                        <span class="key">ESC</span>
                        <span class="description">Centraliza grafo</span>
                    </div>        
                </div>
            </div>

            <!-- 2. LAYOUTS E VISUALIZAÇÃO -->
            <div class="menu-category">
                <div class="category-header" data-category="layout">
                    <span>👁 Layouts e Visualização</span>
                    <span class="arrow">▶</span>
                </div>
                <div class="category-items" data-category="layout">
                    <div class="menu-item" data-key="k" title="Alterna layouts: gravitacional → hierárquico folhas → hierárquico raízes (3 opções cíclicas)">
                        <span class="key">k</span>
                        <span class="description">Alterna layouts</span>
                    </div>
                    <div class="menu-item" data-key="K" title="Ativa/desativa layout circular (2 opções cíclicas)">
                        <span class="key">Shift + k</span>
                        <span class="description">Layout circular</span>
                    </div>
                    <div class="menu-item" data-key="e" title="Alterna tamanho dos nós e exibição de seus rótulos (7 opções cíclicas)">
                        <span class="key">e</span>
                        <span class="description">Tamanho e rótulos dos nós</span>
                    </div>
                    <div class="menu-item" data-key="l" title="Alterna exibição das arestas e de seus rótulos (3 opções cíclicas)">
                        <span class="key">l</span>
                        <span class="description">Rótulos das arestas</span>
                    </div>
                    <div class="menu-item" data-key="t" title="Modo transparência por tipos de nós (15 opções cíclicas, F5 para reset)">
                        <span class="key">t</span>
                        <span class="description">Transparência por tipos de nós</span>
                    </div>
                    <div class="menu-item" data-key="T" title="Modo transparência por conexões (hover mostra adjacentes, F5 para reset)">
                        <span class="key">Shift + t</span>
                        <span class="description">Transparência por conexões</span>
                    </div>
                    <div class="menu-item" data-key="z" title="Ativa modo de navegação automática pelos nós">
                        <span class="key">z</span>
                        <span class="description">Visualização automática</span>
                    </div>
                    <div class="menu-item" data-key="b" title="Ajusta altura da janela de visualização (elimina barra de rolagem vertical)">
                        <span class="key">b</span>
                        <span class="description">Ajusta altura da janela</span>
                    </div>
                </div>
            </div>

            <!-- 3. SELEÇÃO DE NÓS -->
            <div class="menu-category">
                <div class="category-header" data-category="selecao">
                    <span>🎯 Seleção de Nós</span>
                    <span class="arrow">▶</span>
                </div>
                <div class="category-items" data-category="selecao">
                    <div class="menu-item" data-key="a" title="Amplia seleção para nós adjacentes">
                        <span class="key">a</span>
                        <span class="description">Nós adjacentes</span>
                    </div>
                    <div class="menu-item" data-key="A" title="Seleciona todos os nós">
                        <span class="key">Shift + a</span>
                        <span class="description">Todos os nós</span>
                    </div>
                    <div class="menu-item" data-key="c" title="Centraliza nós selecionados e adjacentes">
                        <span class="key">c</span>
                        <span class="description">Centraliza seleção</span>
                    </div>
                    <div class="menu-item" data-key="i" title="Alterna entre nós selecionados">
                        <span class="key">i</span>
                        <span class="description">Alterna entre nós selecionados</span>
                    </div>
                    <div class="menu-item" data-key="I" title="Inverte seleção dos nós">
                        <span class="key">Shift + i</span>
                        <span class="description">Inverte seleção</span>
                    </div>
                    <div class="menu-item" data-key="j" title="Seleciona nós adjacentes comuns aos nós selecionados (mínimo 2 nós)">
                        <span class="key">j</span>
                        <span class="description">Nós comuns</span>
                    </div>
                    <div class="menu-item" data-key="J" title="Seleciona nós não comuns (mínimo 2 nós)">
                        <span class="key">Shift + j</span>
                        <span class="description">Nós não comuns</span>
                    </div>
                    <div class="menu-item" data-key="q" title="Localiza nós no grafo pelos rótulos e IDs (ENTER para localizar por arestas)">
                        <span class="key">q</span>
                        <span class="description">Localiza nós</span>
                    </div>
                    <div class="menu-item" data-key="Q" title="Seleciona apenas nós-alvos (bordas vermelhas)">
                        <span class="key">Shift + q</span>
                        <span class="description">Seleciona nós-alvos</span>
                    </div>
                    <div class="menu-item" data-key="ç" title="Seleciona endereços (EN), telefones (TE) e e-mails (EM) de forma cumulativa pelo nº de conexões">
                        <span class="key">ç</span>
                        <span class="description">EN/TE/EM por conexões</span>
                    </div>
                    <div class="menu-item" data-key="Shift + ç" title="Seleciona nós por número de conexões">
                        <span class="key">Shift + ç</span>
                        <span class="description">Nós por nº de conexões</span>
                    </div>
                    <div class="menu-item" data-key="." title="Alterna seleção por tipo de imagem (15 opções cíclicas)">
                        <span class="key">.</span>
                        <span class="description">Nós por tipo de imagem</span>
                    </div>
                    <div class="menu-item" data-key=";" title="Alterna seleção dos nós adjacentes por origem/destino das arestas (3 opções cíclicas)">
                        <span class="key">;</span>
                        <span class="description">Nós por origem/destino</span>
                    </div>
                    <div class="menu-item" data-key="/" title="Seleciona nós acrescidos na última consulta ao banco de dados">
                        <span class="key">/</span>
                        <span class="description">Nós da última consulta</span>
                    </div>
                    <div class="menu-item" data-key="," title="Exibe relação de nós selecionados em nova janela do navegador">
                        <span class="key">,</span>
                        <span class="description">Exibe nós selecionados</span>
                    </div>
                </div>
            </div>

            <!-- 4. MASSA E TAMANHO DOS NÓS -->
            <div class="menu-category">
                <div class="category-header" data-category="massa">
                    <span>⚖ Massa e Tamanho</span>
                    <span class="arrow">▶</span>
                </div>
                <div class="category-items" data-category="massa">
                    <div class="menu-item" data-key="m" title="Aumenta massa de todos os nós (+0.5)">
                        <span class="key">m</span>
                        <span class="description">+ massa todos nós</span>
                    </div>
                    <div class="menu-item" data-key="M" title="Diminui massa de todos os nós (-0.5)">
                        <span class="key">Shift + m</span>
                        <span class="description">- massa todos nós</span>
                    </div>
                    <div class="menu-item" data-key="n" title="Aumenta massa dos nós ≥ tamanho ref (+5) - padrão 40">
                        <span class="key">n</span>
                        <span class="description">+ massa nós grandes</span>
                    </div>
                    <div class="menu-item" data-key="N" title="Diminui massa dos nós ≥ tamanho ref (-5) - padrão 40">
                        <span class="key">Shift + n</span>
                        <span class="description">- massa nós grandes</span>
                    </div>
                    <div class="menu-item" data-key=" " title="Aumenta massa dos nós de forma proporcional ao seu tamanho (cíclico) - do maior para o menor tamanho">
                        <span class="key">ESPAÇO</span>
                        <span class="description">+ massa nós proporcional</span>
                    </div>
                    <div class="menu-item" data-key="]" title="Aumenta massa dos nós selecionados (+5)">
                        <span class="key">]</span>
                        <span class="description">+ massa nós selecionados</span>
                    </div>
                    <div class="menu-item" data-key="[" title="Diminui massa dos nós selecionados (-5)">
                        <span class="key">[</span>
                        <span class="description">- massa nós selecionados</span>
                    </div>
                    <div class="menu-item" data-key="Shift + ArrowUp" title="Aumenta tamanho de referência dos nós (+5) - padrão 40">
                        <span class="key">Shift + Seta ↑</span>
                        <span class="description">+ tamanho referência nós</span>
                    </div>
                    <div class="menu-item" data-key="Shift + ArrowDown" title="Diminui tamanho de referência dos nós (-5) - padrão 40">
                        <span class="key">Shift + Seta ↓</span>
                        <span class="description">- tamanho referência nós</span>
                    </div>
                    <div class="menu-item" data-key="Shift + ArrowRight" title="Aumenta comprimento das arestas (+30) - padrão 300">
                        <span class="key">Shift + Seta →</span>
                        <span class="description">+ comprimento arestas</span>
                    </div>
                    <div class="menu-item" data-key="Shift + ArrowLeft" title="Aumenta comprimento das arestas (-30) - padrão 300">
                        <span class="key">Shift + Seta ←</span>
                        <span class="description">- comprimento arestas</span>
                    </div>
                </div>
            </div>

            <!-- 5. ANÁLISE E COMUNIDADES -->
            <div class="menu-category">
                <div class="category-header" data-category="analise">
                    <span>🔗 Análise e Comunidades</span>
                    <span class="arrow">▶</span>
                </div>
                <div class="category-items" data-category="analise">
                    <div class="menu-item" data-key="u" title="Medidas de centralidade do grafo">
                        <span class="key">u</span>
                        <span class="description">Medidas de centralidade</span>
                    </div>
                    <div class="menu-item" data-key="U" title="Distribuição de nós por tamanho">
                        <span class="key">Shift + u</span>
                        <span class="description">Distribuição nós por tamanhos</span>
                    </div>
                    <div class="menu-item" data-key="L" title="Distribuição de arestas por tipo">
                        <span class="key">Shift + l</span>
                        <span class="description">Distribuição arestas por tipo</span>
                    </div>
                    <div class="menu-item" data-key="v" title="Destaca comunidades com cores">
                        <span class="key">v</span>
                        <span class="description">Destaca comunidades</span>
                    </div>
                    <div class="menu-item" data-key="V" title="Exibe nós por comunidade (F5 para reset)">
                        <span class="key">Shift + v</span>
                        <span class="description">Exibe nós por comunidade</span>
                    </div>
                    <div class="menu-item" data-key="w" title="Colore nós da cadeia hierárquica">
                        <span class="key">w</span>
                        <span class="description">Destaca cadeia hierárquica</span>
                    </div>
                    <div class="menu-item" data-key="W" title="Deleta nós fora da cadeia hierárquica (F5 para reset)">
                        <span class="key">Shift + w</span>
                        <span class="description">Isola cadeia hierárquica</span>
                    </div>
                    <div class="menu-item" data-key="x" title="Adiciona cores sequenciais aos nós selecionados (4 cores)">
                        <span class="key">x</span>
                        <span class="description">Adiciona cores nós</span>
                    </div>
                    <div class="menu-item" data-key="X" title="Remove cores de todos os nós">
                        <span class="key">Shift + x</span>
                        <span class="description">Remove cores nós</span>
                    </div>
                </div>
            </div>

            <!-- 6. EXCLUSÃO E FILTRAGEM -->
            <div class="menu-category">
                <div class="category-header" data-category="exclusao">
                    <span>✂ Exclusão e Filtragem</span>
                    <span class="arrow">▶</span>
                </div>
                <div class="category-items" data-category="exclusao">
                    <div class="menu-item" data-key="Delete" title="Deleta nós selecionados (F5 para reset)">
                        <span class="key">Delete</span>
                        <span class="description">Deleta nós selecionados</span>
                    </div>
                    <div class="menu-item" data-key="Backspace" title="Mesmo que Delete (para celular)">
                        <span class="key">Backspace</span>
                        <span class="description">Deleta nós selecionados</span>
                    </div>
                    <div class="menu-item" data-key="r" title="Deleta nós NÃO selecionados (F5 para reset)">
                        <span class="key">r</span>
                        <span class="description">Deleta nós não selecionados</span>
                    </div>
                    <div class="menu-item" data-key="R" title="Isola nós com arestas coloridas (F5 para reset)">
                        <span class="key">Shift + r</span>
                        <span class="description">Isola nós com arestas coloridas</span>
                    </div>
                </div>
            </div>

            <!-- 7. CONSULTAS E PESQUISAS -->
            <div class="menu-category">
                <div class="category-header" data-category="consultas">
                    <span>🔍 Consultas e Pesquisas</span>
                    <span class="arrow">▶</span>
                </div>
                <div class="category-items" data-category="consultas">
                    <div class="menu-item" data-key="d" title="Detalhes sobre os nós em sites externos (exceto TE)">
                        <span class="key">d</span>
                        <span class="description">Sites externos</span>
                    </div>
                    <div class="menu-item" data-key="D" title="Pesquisa em DOU, DIO-ES, DOM-ES, etc">
                        <span class="key">Shift + d</span>
                        <span class="description">Pesquisa diários</span>
                    </div>
                    <div class="menu-item" data-key="g" title="Pesquisa geral no Google (exceto TE)">
                        <span class="key">g</span>
                        <span class="description">Pesquisa geral Google</span>
                    </div>
                    <div class="menu-item" data-key="G" title="Pesquisa avançada no Google (domínios oficiais)">
                        <span class="key">Shift + g</span>
                        <span class="description">Pesquisa avançada Google</span>
                    </div>
                    <div class="menu-item" data-key="1" title="Comprovante de inscrição no CNPJ (RFB)">
                        <span class="key">1</span>
                        <span class="description">Comprovante CNPJ</span>
                    </div>
                    <div class="menu-item" data-key="2" title="Sanções CGU (CEIS, CNEP, CEPIM, Acordos de Leniência)">
                        <span class="key">2</span>
                        <span class="description">Sanções CGU</span>
                    </div>
                    <div class="menu-item" data-key="5" title="Abre site do Rede CNPJ">
                        <span class="key">5</span>
                        <span class="description">Site Rede CNPJ</span>
                    </div>
                    <div class="menu-item" data-key="6" title="Bases de dados primárias (CNPJ, Sanções, Dívida Ativa União, PEP)">
                        <span class="key">6</span>
                        <span class="description">Bases primárias</span>
                    </div>
                    <div class="menu-item" data-key="7" title="Detalhes JSON do CNPJ">
                        <span class="key">7</span>
                        <span class="description">CNPJ no formato JSON</span>
                    </div>
                    <div class="menu-item" data-key="8" title="API Compras Governamentais">
                        <span class="key">8</span>
                        <span class="description">Compras Gov Federal</span>
                    </div>
                    <div class="menu-note">⚠️ Comandos 1, 2, 5, 7 e 8 requerem nó selecionado</div>
                </div>
            </div>

            <!-- 8. BANCO DE DADOS (consultas ao vivo) -->
            <div class="menu-category">
                <div class="category-header" data-category="bd">
                    <span>💾 Banco de Dados</span>
                    <span class="arrow">▶</span>
                </div>
                <div class="category-items" data-category="bd">
                    <div class="menu-item" data-key="s" title="Consulta livre por CNPJ, razão social, nome de fantasia ou CPF (sem destaque vermelho)">
                        <span class="key">s</span>
                        <span class="description">Consulta livre</span>
                    </div>
                    <div class="menu-item" data-key="S" title="Abre nós selecionados em 1 camada (sem destaque vermelho)">
                        <span class="key">Shift + s</span>
                        <span class="description">Abre nós selecionados</span>
                    </div>
                    <div class="menu-item" data-key="o" title="Abre nós selecionados (nós-alvos) em n camadas">
                        <span class="key">o</span>
                        <span class="description">Abre nós selecionados</span>
                    </div>
                    <div class="menu-item" data-key="O" title="Abre matriz e filiais do nó selecionado (apenas PJ)">
                        <span class="key">Shift + o</span>
                        <span class="description">Abre matriz e filiais</span>
                    </div>
                    <div class="menu-item" data-key="+" title="Adiciona nós selecionados à lista de alvos ou exibe os nós armazenados">
                        <span class="key">+</span>
                        <span class="description">Inclui nós à lista de alvos</span>
                    </div>
                    <div class="menu-item" data-key="-" title="Remove último nó da lista de alvos">
                        <span class="key">-</span>
                        <span class="description">Exclui nós da lista de alvos</span>
                    </div>
                    <div class="menu-item" data-key="y" title="Abre lista de alvos acumulados">
                        <span class="key">y</span>
                        <span class="description">Abre lista de alvos</span>
                    </div>
                    <div class="menu-item" data-key="4" title="Gera arquivo Excel com nós e arestas">
                        <span class="key">4</span>
                        <span class="description">Gera arquivo Excel</span>
                    </div>
                    <div class="menu-item" data-key="|" title="Ativa/desativa modo captura">
                        <span class="key">|</span>
                        <span class="description">Modo captura</span>
                    </div>
                    <div class="menu-item" data-key="9" title="Baixa objetos JSON do vis.js (nodes.json e edges.json) contendo exclusões e alterações de massa dos nós. Salve-os na pasta 'sinarc-main'">
                        <span class="key">9</span>
                        <span class="description">Baixa arquivos JSON</span>
                    </div>
                    <div class="menu-item" data-key="!" title="Gera novo arquivo HTML (grafo_final_atualizado.html) a partir dos arquivos JSON (nodes.json e edges.json).">
                        <span class="key">!</span>
                        <span class="description">Gera arquivo HTML atualizado</span>
                    </div>
                    <div class="menu-note">⚠️ Requer SINARC em execução no computador</div>
                </div>
            </div>

        </div>
    </div>




    <script>
    // JavaScript para controlar o menu suspenso com HOVER automático e simulação de teclas
    (function() {
        const menuToggle = document.getElementById('sinarc-menu-toggle');
        const menuDropdown = document.getElementById('sinarc-menu-dropdown');
        const categoryHeaders = document.querySelectorAll('.category-header');
        const searchInput = document.getElementById('menu-search-input');
        const menuItems = document.querySelectorAll('.menu-item');

        // Toggle do menu principal
        menuToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            menuDropdown.classList.toggle('show');
        });

        // // Fecha o menu ao clicar fora (funcionalidade desativada)
        // document.addEventListener('click', function(e) {
        //     if (!document.getElementById('sinarc-menu-container').contains(e.target)) {
        //         menuDropdown.classList.remove('show');
        //     }
        // });

        // Toggle das categorias (apenas CLICK)
        categoryHeaders.forEach(header => {
            header.addEventListener('click', function(e) {
                e.stopPropagation();
                const category = this.getAttribute('data-category');
                const items = document.querySelector(`.category-items[data-category="${category}"]`);
                
                this.classList.toggle('expanded');
                items.classList.toggle('show');
            });
        });

        // Expande primeira categoria por padrão
        // if (categoryHeaders.length > 0) {
        //     categoryHeaders[0].click();
        // }

        // Função para simular pressionamento de tecla
        function simulateKeyPress(keyData) {
            const hiddenInput = document.getElementById('hidden-input');
            const target = hiddenInput || document;
            
            if (hiddenInput) hiddenInput.focus();
            
            // Determina as propriedades da tecla
            let key, code, keyCode;
            let shiftKey = false;
            let mainKey = keyData.trim(); // Remove espaços extras
            
            // console.log('SHIFT:', shiftKey, 'TECLA:', mainKey)
            // Verifica se tem Shift (aceita "Shift +" ou "Shift+")
            if (mainKey.startsWith('Shift +') || mainKey.startsWith('Shift+')) {
                shiftKey = true;
                mainKey = mainKey.replace(/^Shift\s*\+\s*/, '').trim();
            }
            // console.log('SHIFT:', shiftKey, 'TECLA:', mainKey)

            // --- TRATAMENTO ESPECIAL PARA Ç (TECLADO ABNT2) ---
            if (mainKey === 'ç') {
                key = shiftKey ? 'Ç' : 'ç';  // Maiúscula se Shift ativo
                code = 'Semicolon';           // Code físico comum para Ç
                keyCode = 186;                // KeyCode padrão
                
                const eventInitDict = {
                    key: key,
                    code: code,
                    keyCode: keyCode,
                    which: keyCode,
                    shiftKey: shiftKey,
                    bubbles: true,
                    cancelable: true,
                    view: window
                };

                target.dispatchEvent(new KeyboardEvent('keydown', eventInitDict));
                target.dispatchEvent(new KeyboardEvent('keypress', eventInitDict));
                target.dispatchEvent(new KeyboardEvent('keyup', eventInitDict));
                
                // console.log(`Tecla Ç enviada: ${key} (Code: ${code}, Shift: ${shiftKey})`);
                return; // Retorna aqui para Ç
            }
            
            // --- OUTRAS TECLAS ---
            
            // Setas
            if (mainKey.includes('↑') || mainKey === 'ArrowUp') {
                key = 'ArrowUp';
                code = 'ArrowUp';
                keyCode = 38;
            } else if (mainKey.includes('↓') || mainKey === 'ArrowDown') {
                key = 'ArrowDown';
                code = 'ArrowDown';
                keyCode = 40;
            } else if (mainKey.includes('→') || mainKey === 'ArrowRight') {
                key = 'ArrowRight';
                code = 'ArrowRight';
                keyCode = 39;
            } else if (mainKey.includes('←') || mainKey === 'ArrowLeft') {
                key = 'ArrowLeft';
                code = 'ArrowLeft';
                keyCode = 37;
            }
            // [NOVO] Correção Pontual para o "c" (minúscula)
            else if (mainKey === 'c') { 
                key = 'c'; 
                code = 'KeyC'; 
                keyCode = 67; 
            }

            // [NOVO] Adiciona o bloco de despacho de eventos para setas

            if (['ArrowUp', 'ArrowDown', 'ArrowRight', 'ArrowLeft'].includes(key)) {
                    const eventInitDict = {
                    key: key,
                    code: code,
                    keyCode: keyCode,
                    which: keyCode,
                    shiftKey: shiftKey,
                    bubbles: true,
                    cancelable: true,
                    view: window
                };

                target.dispatchEvent(new KeyboardEvent('keydown', eventInitDict));
                // Teclas não imprimíveis (setas) geralmente só disparam keydown/keyup
                // target.dispatchEvent(new KeyboardEvent('keypress', eventInitDict)); // Opcional para setas
                target.dispatchEvent(new KeyboardEvent('keyup', eventInitDict));

                // console.log(`Tecla Seta enviada: ${key} (Code: ${code}, Shift: ${shiftKey})`);
                return; // Adiciona return para setas
            }

            // Teclas de Controle
            else if (mainKey === 'ESC' || mainKey === 'Escape') {
                key = 'Escape';
                code = 'Escape';
                keyCode = 27;
            } else if (mainKey === 'ESPAÇO' || mainKey === ' ') {
                key = ' ';
                code = 'Space';
                keyCode = 32;
            } else if (mainKey === 'Delete') {
                key = 'Delete';
                code = 'Delete';
                keyCode = 46;
            } else if (mainKey === 'Backspace') {
                key = 'Backspace';
                code = 'Backspace';
                keyCode = 8;
            } else if (mainKey === 'F5') {
                key = 'F5';
                code = 'F5';
                keyCode = 116;
            } else if (mainKey === 'F11') {
                key = 'F11';
                code = 'F11';
                keyCode = 122;
            }
            // Padrão (Letras, Números e Símbolos)
            else {
                key = mainKey;
                code = mainKey.length === 1 ? 'Key' + mainKey.toUpperCase() : mainKey;
                keyCode = mainKey.toUpperCase().charCodeAt(0);
            }

            // Define o valor final da tecla (maiúscula se Shift ativo)
            const finalKey = shiftKey ? key.toUpperCase() : key;

            // Cria eventos de teclado
            const eventInitDict = {
                key: finalKey,
                code: code,
                keyCode: keyCode,
                which: keyCode,
                shiftKey: shiftKey,
                ctrlKey: false,
                altKey: false,
                metaKey: false,
                bubbles: true,
                cancelable: true,
                view: window
            };

            // Dispara eventos keydown, keypress e keyup
            target.dispatchEvent(new KeyboardEvent('keydown', eventInitDict));
            target.dispatchEvent(new KeyboardEvent('keypress', eventInitDict));
            target.dispatchEvent(new KeyboardEvent('keyup', eventInitDict));
            
            // console.log(`Comando enviado: ${finalKey} (Code: ${code}, Shift: ${shiftKey})`);
        }

        // Adiciona evento de clique aos itens do menu para simular tecla
        menuItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.stopPropagation();
                
                const keyData = this.getAttribute('data-key');
                const functionData = this.getAttribute('data-function');
                
                if (keyData) {
                    // Feedback visual
                    this.style.background = 'rgba(89, 201, 67, 0.4)';
                    setTimeout(() => {
                        this.style.background = '';
                    }, 300);
                    
                    // Simula o pressionamento da tecla
                    simulateKeyPress(keyData);
                    
                    // Opcional: fecha o menu após clicar
                    // menuDropdown.classList.remove('show');
                } else if (functionData) {
                    // Feedback visual
                    this.style.background = 'rgba(89, 201, 67, 0.4)';
                    setTimeout(() => {
                        this.style.background = '';
                    }, 300);
                    
                    // Chama a função diretamente
                    if (typeof window[functionData] === 'function') {
                        window[functionData]();
                    } else {
                        console.error(`Função '${functionData}' não encontrada.`);
                    }
                }
            });
        });

        // Função de busca
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase().trim();
            
            if (searchTerm === '') {
                // Mostra todos os itens e fecha todas as categorias
                menuItems.forEach(item => item.classList.remove('hidden'));
                categoryHeaders.forEach(header => {
                    header.classList.remove('expanded');
                    const category = header.getAttribute('data-category');
                    const items = document.querySelector(`.category-items[data-category="${category}"]`);
                    items.classList.remove('show');
                });
            } else {
                // Filtra itens
                categoryHeaders.forEach(header => {
                    const category = header.getAttribute('data-category');
                    const categoryItems = document.querySelectorAll(`.category-items[data-category="${category}"] .menu-item`);
                    let categoryHasResults = false;
                    
                    categoryItems.forEach(item => {
                        const text = item.textContent.toLowerCase();
                        if (text.includes(searchTerm)) {
                            item.classList.remove('hidden');
                            categoryHasResults = true;
                        } else {
                            item.classList.add('hidden');
                        }
                    });
                    
                    // Expande categorias com resultados
                    const items = document.querySelector(`.category-items[data-category="${category}"]`);
                    if (categoryHasResults) {
                        header.classList.add('expanded');
                        items.classList.add('show');
                    } else {
                        header.classList.remove('expanded');
                        items.classList.remove('show');
                    }
                });
            }
        });

        // Previne que cliques nos itens fechem o menu
        menuDropdown.addEventListener('click', function(e) {
            e.stopPropagation();
        });

        // Previne que busca feche o menu
        searchInput.addEventListener('click', function(e) {
            e.stopPropagation();
        });

    })();
    </script>



    
    
    
    <script>

    // =================================================== 
    // EXIBE LINKS PARA SISTEMAS DE IA 
    // =================================================== 

    function exibirSistemasIA() {
        // Cria overlay escuro
        const overlay = document.createElement('div');
        overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 99999; display: flex; align-items: center; justify-content: center;';

        // Cria modal
        const modal = document.createElement('div');
        modal.style.cssText = 'background: white; border: 3px solid rgba(89, 201, 67, 1); border-radius: 12px; padding: 30px; max-width: 500px; max-height: 85vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5); font-family: Arial, sans-serif;';

        // Header
        const header = document.createElement('div');
        header.style.cssText = 'text-align: center; margin-bottom: 25px;';
        header.innerHTML = '<h2 style="color: #2c5f2d; margin: 0 0 10px 0; font-size: 24px;">🤖 Sistemas de Inteligência Artificial</h2><p style="color: #666; font-size: 14px; margin: 0;">Analise os grafos gerados pelo SINARC com assistentes de IA</p>';
        modal.appendChild(header);

        // Dica
        const dica = document.createElement('div');
        dica.style.cssText = 'background: rgba(89, 201, 67, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid rgba(89, 201, 67, 1);';
        dica.innerHTML = '<p style="margin: 0; font-size: 13px; color: #555; line-height: 1.6;"><strong>💡 Dica:</strong> Exporte a estrutura do grafo em PDF usando o botão <strong>⬆️</strong> do menu de comandos e faça upload do arquivo nos sistemas abaixo para análise detalhada.</p>';
        modal.appendChild(dica);

        // Container de IAs
        const container = document.createElement('div');
        container.style.cssText = 'display: grid; gap: 12px;';

        // Lista de IAs
        const ias = [
            { nome: 'NotebookLM (Google)', url: 'https://notebooklm.google.com', cor: '#ea4335', dominio: 'notebooklm.google.com' },
            { nome: 'Gemini (Google)', url: 'https://gemini.google.com', cor: '#4285f4', dominio: 'gemini.google.com' },
            { nome: 'Claude (Anthropic)', url: 'https://claude.ai', cor: '#d4a574', dominio: 'claude.ai' },
            { nome: 'ChatGPT (OpenAI)', url: 'https://chat.openai.com', cor: '#10a37f', dominio: 'chat.openai.com' },
            { nome: 'Perplexity AI', url: 'https://www.perplexity.ai', cor: '#20808d', dominio: 'perplexity.ai' },
            { nome: 'DeepSeek', url: 'https://chat.deepseek.com/', cor: '#1e40af', dominio: 'chat.deepseek.com' },
            { nome: 'Z.ai', url: 'https://chat.z.ai/', cor: '#8b5cf6', dominio: 'chat.z.ai' },
            { nome: 'Qwen (Alibaba)', url: 'https://chat.qwen.ai/', cor: '#f97316', dominio: 'chat.qwen.ai' }
        ];

        // Cria cards
        ias.forEach(function(ia) {
            const card = document.createElement('div');
            card.className = 'ia-card';
            card.style.cssText = 'border: 2px solid ' + ia.cor + '; border-radius: 8px; padding: 12px; transition: all 0.3s ease; cursor: pointer;';
            card.innerHTML = '<h3 style="margin: 0; color: ' + ia.cor + '; font-size: 15px;">' + ia.nome + '</h3><span style="font-size: 11px; color: #999;">' + ia.dominio + '</span>';
            card.onclick = function() {
                window.open(ia.url, '_blank');
            };
            container.appendChild(card);
        });

        modal.appendChild(container);

        // Botão fechar
        const footer = document.createElement('div');
        footer.style.cssText = 'margin-top: 25px; padding-top: 20px; border-top: 2px solid rgba(200, 200, 200, 0.3); text-align: center;';
        
        const btnFechar = document.createElement('button');
        btnFechar.textContent = '✓ Fechar';
        btnFechar.style.cssText = 'background: rgba(89, 201, 67, 0.9); color: white; border: none; padding: 12px 30px; border-radius: 6px; font-size: 14px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.2);';
        btnFechar.onmouseover = function() {
            this.style.background = 'rgba(89, 201, 67, 1)';
            this.style.transform = 'translateY(-2px)';
            this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.3)';
        };
        btnFechar.onmouseout = function() {
            this.style.background = 'rgba(89, 201, 67, 0.9)';
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 2px 8px rgba(0,0,0,0.2)';
        };
        btnFechar.onclick = function() {
            overlay.remove();
        };
        
        footer.appendChild(btnFechar);
        modal.appendChild(footer);

        // Adiciona hover aos cards
        const style = document.createElement('style');
        style.textContent = '.ia-card:hover { transform: translateX(5px); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15) !important; } .ia-card:active { transform: scale(0.98); }';
        document.head.appendChild(style);

        overlay.appendChild(modal);
        document.body.appendChild(overlay);

        // Fecha ao clicar fora do modal
        overlay.addEventListener('click', function(e) {
            if (e.target === overlay) {
                overlay.remove();
            }
        });

        // Fecha com ESC
        const handleEscape = function(e) {
            if (e.key === 'Escape') {
                overlay.remove();
                document.removeEventListener('keydown', handleEscape);
            }
        };
        document.addEventListener('keydown', handleEscape);
    }

    // Torna a função global
    window.exibirSistemasIA = exibirSistemasIA;

    </script>    




    
    <!-- ======================================================== -->
    <!-- BOTÃO DE OTIMIZAÇÃO AUTOMÁTICA - CANTO INFERIOR ESQUERDO -->
    <!-- ======================================================== -->

    <style>
    #sinarc-otimizar-container {
        position: fixed;
        bottom: 33px;
        left: 21px;  /* Alinhado com o menu suspenso */
        z-index: 10000;
        font-family: Arial, sans-serif;
    }

    #sinarc-otimizar-button {
        background: rgba(255, 255, 255, 0.7);
        border: 1px solid rgba(89, 201, 67, 0.6);
        border-radius: 4px;
        width: 40px;
        height: 40px;
        cursor: pointer;
        font-size: 20px;
        color: #555;
        box-shadow: 0 1px 5px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        user-select: none;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    #sinarc-otimizar-button:hover {
        background: rgba(89, 201, 67, 0.15);
        border-color: rgba(89, 201, 67, 0.9);
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        transform: scale(1.05);
    }

    #sinarc-otimizar-button:active {
        background: rgba(89, 201, 67, 0.3);
        transform: scale(0.95);
    }

    /* Tooltip ao passar o mouse */
    #sinarc-otimizar-button::after {
        content: 'Otimizar grafo automaticamente (Botão Fireworks)';
        position: absolute;
        bottom: 50px;
        left: 0;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 8px 12px;
        border-radius: 4px;
        font-size: 12px;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }

    /* ✅ OCULTA O TOOLTIP */
    #sinarc-otimizar-button::after {
        display: none !important;
    }

    #sinarc-otimizar-button:hover::after {
        opacity: 1;
    }
    </style>


    <div id="sinarc-otimizar-container">
        <div id="sinarc-otimizar-button" title="Otimizar grafo automaticamente (Botão Fireworks)">🪄</div>
    </div>

    



    <script>


    <!-- =================================================== -->
    <!-- EXPORTA DADOS ESTRUTURADOS DO GRAFO PARA USO COM IA -->
    <!-- =================================================== -->

    async function exportarGrafoParaPDF() {

      // 1) Garantir jsPDF disponível
      if (typeof window.jspdf === "undefined") {
          await new Promise((resolve, reject) => {
          const script = document.createElement("script");
          script.src = "https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js";
          script.onload = resolve;
          script.onerror = reject;
          document.head.appendChild(script);
          });
      }

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ unit: "mm", format: "a4" });

      // 2) Recuperar nodes e edges
      let nodesJSON = null;
      let edgesJSON = null;

      if (window.nodes && typeof window.nodes.get === "function") {
          nodesJSON = window.nodes.get();
      } else if (network && network.body && network.body.data && network.body.data.nodes) {
        nodesJSON = network.body.data.nodes.get();
      }

      if (window.edges && typeof window.edges.get === "function") {
        edgesJSON = window.edges.get();
      } else if (network && network.body && network.body.data && network.body.data.edges) {
        edgesJSON = network.body.data.edges.get();
      }

      const grafoExport = {
        exportado_em: new Date().toISOString(),
        total_nodes: nodesJSON ? nodesJSON.length : 0,
        total_edges: edgesJSON ? edgesJSON.length : 0,
        nodes: nodesJSON || [],
        edges: edgesJSON || []
      };

      const textoJSON = JSON.stringify(grafoExport, null, 2);

      // 2.1) Preparar legenda do grafo


      const legendaGrafo = `
{
  "nome": "Legenda de Grafos SINARC",
  "versao": "1.0",
  "descricao": "Documentação estruturada para interpretação de grafos de redes complexas gerados pelo SINARC (Sistema Integrado de Análise de Redes Complexas)",
  "estrutura_geral": {
    "metadados_raiz": {
      "exportado_em": {
        "tipo": "string",
        "formato": "ISO 8601 datetime",
        "descricao": "Data e hora da exportação do grafo"
      },
      "total_nodes": {
        "tipo": "integer",
        "descricao": "Número total de nós no grafo"
      },
      "total_edges": {
        "tipo": "integer",
        "descricao": "Número total de arestas/conexões no grafo"
      },
      "nodes": {
        "tipo": "array",
        "descricao": "Lista de todos os nós do grafo"
      },
      "edges": {
        "tipo": "array",
        "descricao": "Lista de todas as arestas do grafo"
      }
    }
  },
  "resumo_prefixos": {
    "descricao": "Todos os prefixos usados no SINARC para identificar tipos de entidades",
    "prefixos": {
      "PF_": "Pessoa Física (CPF mascarado)",
      "PJ_": "Pessoa Jurídica COM CNPJ brasileiro (brasileira ou estrangeira com CNPJ no Brasil)",
      "PE_": "Pessoa Estrangeira SEM CNPJ brasileiro (empresa estrangeira sem registro na Receita Federal)",
      "EM_": "Email",
      "TE_": "Telefone",
      "EN_": "Endereço"
    },
    "regex_validacao": {
      "PF_": "^PF_\\*\\*\\*\\d{6}\\*\\*-",
      "PJ_": "^PJ_\\d{14}$",
      "PE_": "^PE_",
      "EM_": "^EM_",
      "TE_": "^TE_",
      "EN_": "^EN_"
    },
    "observacao_cnpj": "A presença do CNPJ é o que diferencia PJ_ de PE_ para empresas estrangeiras: PJ_ tem CNPJ, PE_ não tem CNPJ"
  },
  "guia_identificacao_empresas_estrangeiras": {
    "objetivo": "Distinguir corretamente empresas estrangeiras entre PJ_ e PE_",
    "arvore_decisao": {
      "passo_1": {
        "pergunta": "A entidade está domiciliada no exterior?",
        "como_verificar": [
          "Verificar se UF = 'EX' (para PJ_)",
          "Verificar se prefixo é PE_",
          "Verificar se imagem contém 'exterior'"
        ]
      },
      "passo_2": {
        "pergunta": "A entidade possui CNPJ brasileiro?",
        "como_verificar": [
          "Se ID começa com PJ_ seguido de 14 dígitos → TEM CNPJ",
          "Se ID começa com PE_ → NÃO TEM CNPJ"
        ],
        "resultado": {
          "tem_cnpj": "É uma PJ_ com UF='EX' - Empresa estrangeira COM CNPJ brasileiro",
          "nao_tem_cnpj": "É uma PE_ - Pessoa Estrangeira SEM CNPJ brasileiro"
        }
      }
    },
    "tabela_comparativa": {
      "caracteristica": {
        "cnpj_brasileiro": {
          "PJ_exterior": "SIM (14 dígitos)",
          "PE_": "NÃO (identificador próprio)"
        },
        "situacao_cadastral": {
          "PJ_exterior": "SIM (ativa ou baixada)",
          "PE_": "NÃO (sem informação)"
        },
        "operacao_brasil": {
          "PJ_exterior": "Geralmente SIM (filial, representação, operações)",
          "PE_": "Geralmente NÃO (apenas como sócia/investidora)"
        },
        "formato_id": {
          "PJ_exterior": "PJ_00000000000000 (14 dígitos)",
          "PE_": "PE_[identificador]"
        },
        "tamanho_no": {
          "PJ_exterior": "30",
          "PE_": "30"
        },
        "icone": {
          "PJ_exterior": "pj_exterior_ativa.png ou pj_exterior_inativa.png",
          "PE_": "pj_exterior_ativa.png (sempre)"
        }
      }
    },
    "exemplos_praticos": {
      "pj_exterior": {
        "descricao": "NESTLE S.A (Suíça) com CNPJ no Brasil",
        "id_exemplo": "PJ_05497900000100",
        "uf": "EX",
        "tem_cnpj": true,
        "motivo": "Tem operações e subsidiárias no Brasil, precisa de CNPJ"
      },
      "pe_": {
        "descricao": "Holding estrangeira que apenas investe em empresa brasileira",
        "id_exemplo": "PE_[identificador]",
        "tem_cnpj": false,
        "motivo": "Apenas sócia, sem filial ou operação direta no Brasil"
      }
    }
  },
  "tipos_entidades": {
    "PF": {
      "nome": "Pessoa Física",
      "prefixo_id": "PF_",
      "formato_id": "PF_***XXXXXX**-NOME COMPLETO",
      "descricao": "Representa pessoas físicas (CPF mascarado)",
      "icone_padrao": "images\\pf_homem.png ou images\\pf_mulher.png",
      "exemplos": [
        "PF_***151678**-GUSTAVO CHIARINI BASTOS",
        "PF_***125258**-MARTHA DELIA URIBE DE LUNA"
      ]
    },
    "PJ": {
      "nome": "Pessoa Jurídica",
      "prefixo_id": "PJ_",
      "formato_id": "PJ_CNPJ (14 dígitos)",
      "descricao": "Representa empresas e organizações que POSSUEM CNPJ brasileiro - tanto empresas brasileiras quanto empresas estrangeiras domiciliadas no exterior que possuem CNPJ no Brasil",
      "subtipos": {
        "brasil_ativa": {
          "icone": "images\\pj_brasil_ativa.png",
          "descricao": "Empresa brasileira com situação cadastral ativa",
          "identificacao": "UF diferente de 'EX' e situacao_ativa = True",
          "tamanho": 20
        },
        "brasil_inativa": {
          "icone": "images\\pj_brasil_inativa.png",
          "descricao": "Empresa brasileira baixada/inativa",
          "identificacao": "UF diferente de 'EX' e situacao_ativa = False",
          "tamanho": 20
        },
        "exterior_ativa": {
          "icone": "images\\pj_exterior_ativa.png",
          "descricao": "Empresa estrangeira domiciliada no exterior que POSSUI CNPJ brasileiro com situação cadastral ativa",
          "identificacao": "UF = 'EX' e situacao_ativa = True",
          "tamanho": 30,
          "observacao": "Empresa estrangeira cadastrada na Receita Federal brasileira (ex: filial, representação, operações no Brasil)"
        },
        "exterior_inativa": {
          "icone": "images\\pj_exterior_inativa.png",
          "descricao": "Empresa estrangeira domiciliada no exterior que POSSUI CNPJ brasileiro baixado/inativo",
          "identificacao": "UF = 'EX' e situacao_ativa = False",
          "tamanho": 30,
          "observacao": "CNPJ da empresa estrangeira foi baixado na Receita Federal"
        }
      },
      "exemplos": [
        "PJ_60409075000152",
        "PJ_28053619000183",
        "PJ_05497900000100"
      ]
    },
    "PE": {
      "nome": "Pessoa Estrangeira",
      "prefixo_id": "PE_",
      "formato_id": "PE_IDENTIFICADOR",
      "descricao": "Representa empresas estrangeiras domiciliadas no exterior que NÃO POSSUEM CNPJ brasileiro. Diferente de PJ_ com UF='EX', que são empresas estrangeiras COM CNPJ no Brasil",
      "icone_padrao": "images\\pj_exterior_ativa.png",
      "tamanho_padrao": 30,
      "observacoes": [
        "Pessoa estrangeira NÃO possui CNPJ brasileiro - apenas identificador próprio",
        "Não possui informação de situação cadastral (ativa/inativa) na Receita Federal brasileira",
        "A imagem é sempre de empresa domiciliada no exterior ativa (por padrão)",
        "Tipicamente são sócias estrangeiras de empresas brasileiras, sem operação direta no Brasil",
        "Aparecem nos registros da Receita Federal apenas como vinculadas a empresas brasileiras (ex: como sócias)"
      ],
      "exemplos": [
        "PE_[identificador]"
      ],
      "casos_uso": [
        "Empresa matriz estrangeira que é sócia de subsidiária brasileira",
        "Holding internacional sem CNPJ no Brasil",
        "Pessoa jurídica estrangeira que apenas investe em empresa brasileira sem ter filial/representação no Brasil"
      ]
    },
    "EM": {
      "nome": "Email",
      "prefixo_id": "EM_",
      "formato_id": "EM_endereco@email.com",
      "descricao": "Representa endereços de email",
      "icone_padrao": "images\\email.png",
      "tamanho_padrao": 15,
      "exemplos": [
        "EM_atendimento.fiscalizacao@br.nestle.com",
        "EM_fiscal@puravida.com.br"
      ]
    },
    "TE": {
      "nome": "Telefone",
      "prefixo_id": "TE_",
      "formato_id": "TE_DD NUMERO",
      "descricao": "Representa números de telefone",
      "icone_padrao": "images\\telefone.png",
      "tamanho_padrao": 15,
      "exemplos": [
        "TE_11 55084400",
        "TE_71 33139467"
      ]
    },
    "EN": {
      "nome": "Endereço",
      "prefixo_id": "EN_",
      "formato_id": "EN_LOGRADOURO-CIDADE-UF",
      "descricao": "Representa endereços físicos",
      "icone_padrao": "images\\endereco.png",
      "tamanho_padrao": 15,
      "exemplos": [
        "EN_MEYERFREUND 1-VILA VELHA-ES",
        "EN_DEPUTADO EDUARDO KM LUIS MAGALHAES 529-FEIRA DE SANTANA-BA"
      ]
    }
  },
  "estrutura_nodes": {
    "propriedades_obrigatorias": {
      "id": {
        "tipo": "string",
        "descricao": "Identificador único do nó, inclui prefixo do tipo de entidade"
      },
      "label": {
        "tipo": "string",
        "descricao": "Rótulo de exibição do nó (nome simplificado)"
      },
      "shape": {
        "tipo": "string",
        "valores_possiveis": ["image", "dot", "circle"],
        "descricao": "Forma visual do nó"
      },
      "image": {
        "tipo": "string",
        "descricao": "Caminho para o ícone do nó"
      },
      "size": {
        "tipo": "integer",
        "descricao": "Tamanho do nó (geralmente 15, 20 ou 30)"
      },
      "title": {
        "tipo": "string",
        "descricao": "Tooltip com informações detalhadas do nó (endereço, distância, adjacências)"
      },
      "value": {
        "tipo": "integer",
        "descricao": "Grau do nó (número de conexões diretas)"
      }
    },
    "propriedades_opcionais": {
      "font": {
        "tipo": "object",
        "descricao": "Configurações de fonte",
        "propriedades": {
          "color": {
            "tipo": "string",
            "padrao": "#777777",
            "descricao": "Cor do texto do rótulo"
          }
        }
      },
      "color": {
        "tipo": "object",
        "descricao": "Configurações de cor do nó",
        "propriedades": {
          "border": {
            "tipo": "string",
            "descricao": "Cor da borda (ex: 'red' para nó alvo)"
          },
          "background": {
            "tipo": "string",
            "padrao": "transparent",
            "descricao": "Cor de fundo do nó"
          },
          "hover": {
            "tipo": "object",
            "descricao": "Cores ao passar o mouse"
          },
          "highlight": {
            "tipo": "object",
            "descricao": "Cores ao selecionar"
          }
        }
      },
      "borderWidth": {
        "tipo": "integer",
        "descricao": "Largura da borda do nó"
      },
      "borderWidthSelected": {
        "tipo": "integer",
        "descricao": "Largura da borda quando selecionado"
      },
      "shapeProperties": {
        "tipo": "object",
        "descricao": "Propriedades especiais da forma",
        "propriedades": {
          "useBorderWithImage": {
            "tipo": "boolean",
            "descricao": "Se deve usar borda com imagem"
          },
          "borderDashes": {
            "tipo": "array",
            "descricao": "Padrão de tracejado [comprimento_traço, comprimento_espaço]"
          }
        }
      },
      "camadas_solicitadas": {
        "tipo": "integer",
        "descricao": "Número de camadas de profundidade solicitadas na pesquisa"
      },
      "algoritmos": {
        "tipo": "string",
        "descricao": "Resultados de algoritmos de centralidade executados no grafo"
      },
      "z_ancestor": {
        "tipo": "string",
        "valores_possiveis": ["true", "false"],
        "descricao": "Indica se o nó é ancestral (estava na pesquisa original)"
      },
      "z_novo": {
        "tipo": "integer",
        "valores_possiveis": [1],
        "descricao": "Indica se é um nó novo na pesquisa atual"
      },
      "z_group": {
        "tipo": "integer",
        "descricao": "Identificador do grupo ao qual o nó pertence"
      },
      "z_group_total": {
        "tipo": "integer",
        "descricao": "Total de grupos no grafo"
      }
    },
    "marcadores_visuais_especiais": {
      "no_alvo": {
        "caracteristicas": {
          "color.border": "red",
          "borderWidth": 4,
          "titulo_contem": "Distância Alvo: 0"
        },
        "descricao": "Nó principal da pesquisa"
      },
      "no_conectado_diretamente": {
        "caracteristicas": {
          "titulo_contem": "Distância Alvo: 1"
        },
        "descricao": "Nós a 1 conexão do alvo"
      },
      "empresa_tracejada": {
        "caracteristicas": {
          "shapeProperties.borderDashes": [15, 5]
        },
        "descricao": "Empresas com características especiais (ex: matriz)"
      }
    }
  },
  "estrutura_edges": {
    "propriedades": {
      "id": {
        "tipo": "string",
        "formato": "UUID",
        "descricao": "Identificador único da aresta"
      },
      "from": {
        "tipo": "string",
        "descricao": "ID do nó de origem"
      },
      "to": {
        "tipo": "string",
        "descricao": "ID do nó de destino"
      },
      "label": {
        "tipo": "string",
        "descricao": "Rótulo da relação (tipo de vínculo)",
        "exemplos": [
          "Administrador",
          "Sócio",
          "Diretor",
          "Presidente",
          "rep-sócio-Administrador",
          "rep-sócio-Procurador",
          "Sociedade Consorciada",
          "Sócio Pessoa Jurídica Domiciliado no Exterior"
        ]
      },
      "title": {
        "tipo": "string",
        "descricao": "Tooltip da aresta (geralmente igual ao label)"
      },
      "arrows": {
        "tipo": "string",
        "valores_possiveis": ["to", "from", "to;from"],
        "descricao": "Direção das setas na aresta"
      },
      "width": {
        "tipo": "integer",
        "padrao": 1,
        "descricao": "Largura da linha da aresta"
      },
      "arrowStrikethrough": {
        "tipo": "boolean",
        "padrao": false,
        "descricao": "Se a linha atravessa a seta"
      }
    },
    "interpretacao_direcao": {
      "arrows_to": {
        "descricao": "A seta aponta de FROM para TO",
        "interpretacao": "FROM tem o papel/vínculo em relação a TO",
        "exemplo": "PF_GUSTAVO --> Administrador --> PJ_EMPRESA significa que Gustavo é administrador da empresa"
      },
      "arrows_from": {
        "descricao": "A seta aponta de TO para FROM",
        "interpretacao": "TO tem o papel/vínculo em relação a FROM"
      }
    }
  },
  "tipos_relacionamentos": {
    "vinculos_pessoas_empresas": [
      "Administrador",
      "Sócio",
      "Diretor",
      "Presidente",
      "rep-sócio-Administrador",
      "rep-sócio-Procurador",
      "Procurador"
    ],
    "vinculos_empresas": [
      "Sócio",
      "Sociedade Consorciada",
      "Sócio Pessoa Jurídica Domiciliado no Exterior"
    ],
    "vinculos_dados": {
      "descricao": "Conexões sem label específico, indicam posse/uso",
      "exemplos": [
        "Empresa --> Email",
        "Empresa --> Telefone",
        "Empresa --> Endereço"
      ]
    }
  },
  "metricas_centralidade": {
    "descricao": "Métricas calculadas e armazenadas no campo 'algoritmos' de alguns nós",
    "metricas": {
      "Betweenness Centrality": {
        "descricao": "Mede quantas vezes um nó aparece no caminho mais curto entre outros nós",
        "interpretacao": "Nós com alta betweenness são pontes/intermediários importantes na rede"
      },
      "Closeness Centrality": {
        "descricao": "Mede a proximidade média de um nó a todos os outros",
        "interpretacao": "Nós com alta closeness podem alcançar outros nós rapidamente",
        "escala": "0 a 1"
      },
      "Eigenvector Centrality": {
        "descricao": "Mede a influência de um nó baseado na qualidade de suas conexões",
        "interpretacao": "Nós conectados a nós importantes têm alta eigenvector centrality",
        "escala": "0 a 1"
      },
      "Degree Centrality": {
        "descricao": "Número de conexões diretas de um nó",
        "interpretacao": "Nós com muitas conexões têm alta degree centrality"
      },
      "PageRank": {
        "descricao": "Adaptação do algoritmo do Google para redes bidirecionais",
        "interpretacao": "Probabilidade de chegar a um nó seguindo arestas aleatoriamente"
      }
    }
  },
  "campos_title": {
    "descricao": "O campo 'title' dos nós contém informações estruturadas em texto",
    "estrutura_tipica": {
      "linha_1": "Nome completo (ID)",
      "linha_2": "Endereço completo (para empresas)",
      "linha_3": "NÓ - Distância Alvo: X",
      "linha_4": "GRAFO - Nós: X, Arestas: Y, Camadas Solicitadas: Z, Conectado: Sim/Não",
      "linha_5": "Mensagem: [vazio ou mensagem específica]",
      "linha_6+": "Nós Adjacentes (Grau N): lista de vizinhos com tipo de relação"
    },
    "padrao_adjacentes": {
      "formato": "--> ou <--",
      "interpretacao": {
        "-->": "Este nó aponta para (tem relação com)",
        "<--": "Este nó recebe de (é alvo da relação de)"
      },
      "exemplo": "--> PJ_EMPRESA - Ativa - (Administrador) significa que este nó é administrador da empresa"
    }
  },
  "padroes_analise": {
    "identificar_no_principal": {
      "metodo": "Procurar nó com color.border='red' ou título contendo 'Distância Alvo: 0'"
    },
    "calcular_distancias": {
      "metodo": "Extrair 'Distância Alvo: X' do campo title",
      "descricao": "Indica quantos saltos o nó está do nó principal"
    },
    "identificar_hubs": {
      "metodo": "Ordenar nós por 'value' (grau) decrescente",
      "descricao": "Nós com alto grau são hubs/concentradores"
    },
    "identificar_entidades_centrais": {
      "metodo": "Verificar campo 'algoritmos' e extrair rankings de centralidade",
      "descricao": "Entidades que aparecem em múltiplos rankings são estruturalmente importantes"
    },
    "mapear_grupos_corporativos": {
      "metodo": "Seguir arestas com label 'Sócio' entre PJs",
      "descricao": "Identifica estruturas de holdings e subsidiárias"
    },
    "identificar_controladores": {
      "metodo": "Procurar PFs com múltiplas arestas 'Administrador' ou 'Sócio' para diferentes PJs",
      "descricao": "Pessoas que controlam múltiplas empresas"
    },
    "analisar_internacionalizacao": {
      "metodo": "Contar: (1) PJs com 'images\\pj_exterior_ativa.png' ou 'images\\pj_exterior_inativa.png', (2) nós com prefixo 'PE_', e (3) arestas com label 'Sócio Pessoa Jurídica Domiciliado no Exterior'",
      "descricao": "Identifica estruturas internacionais. PJ_ com UF='EX' são empresas estrangeiras com CNPJ. PE_ são empresas estrangeiras sem informação de situação cadastral"
    }
  },
  "exemplos_queries_analise": {
    "listar_administradores_empresa_alvo": {
      "descricao": "Encontrar todas as pessoas que administram a empresa alvo",
      "logica": "Filtrar edges onde to=id_empresa_alvo e label contém 'Administrador'"
    },
    "encontrar_empresas_pessoa": {
      "descricao": "Listar todas as empresas vinculadas a uma pessoa",
      "logica": "Filtrar edges onde from=id_pessoa e to começa com 'PJ_' ou 'PE_'"
    },
    "mapear_grupo_economico": {
      "descricao": "Identificar todas as empresas de um mesmo grupo",
      "logica": "Seguir recursivamente arestas 'Sócio' entre PJs e PEs a partir de uma empresa"
    },
    "identificar_pessoas_chave": {
      "descricao": "Pessoas com vínculos em múltiplas empresas do grafo",
      "logica": "Contar edges onde from é PF e agrupar por from, ordenar por contagem"
    },
    "analisar_sobreposicao_gestores": {
      "descricao": "Empresas que compartilham administradores",
      "logica": "Encontrar PFs que aparecem como administradores de múltiplas PJs/PEs"
    },
    "identificar_estruturas_offshore": {
      "descricao": "Mapear empresas estrangeiras e suas conexões locais",
      "logica": "Filtrar nodes onde id começa com 'PE_' ou (id começa com 'PJ_' e image contém 'exterior'), depois mapear suas conexões com PFs e PJs brasileiras"
    }
  },
  "icones_especiais": {
    "com_dividas": {
      "descricao": "Quando uma entidade possui dívidas registradas, o ícone recebe sufixo '_com_bandeira'",
      "variantes": [
        "images\\pj_brasil_ativa_com_bandeira.png",
        "images\\pj_brasil_inativa_com_bandeira.png",
        "images\\pj_exterior_ativa_com_bandeira.png",
        "images\\pj_exterior_inativa_com_bandeira.png"
      ],
      "identificacao": "Verificar se o nome do arquivo de imagem contém '_com_bandeira'",
      "significado": "A entidade possui dívidas ou pendências cadastradas"
    }
  },
  "interpretacao_situacao_cadastral": {
    "ativa": {
      "indicadores": ["- Ativa -", "images\\pj_brasil_ativa.png", "images\\pj_exterior_ativa.png"],
      "descricao": "Empresa com situação cadastral regular na Receita Federal",
      "aplica_se_a": ["PJ_ brasileira", "PJ_ estrangeira com CNPJ (UF='EX')"]
    },
    "baixada": {
      "indicadores": ["- Baixada -", "images\\pj_brasil_inativa.png", "images\\pj_exterior_inativa.png"],
      "descricao": "Empresa encerrada/baixada na Receita Federal",
      "aplica_se_a": ["PJ_ brasileira", "PJ_ estrangeira com CNPJ (UF='EX')"]
    },
    "estrangeira_sem_info": {
      "indicadores": ["PE_", "images\\pj_exterior_ativa.png"],
      "descricao": "Pessoa Estrangeira SEM CNPJ brasileiro - não há informação de situação cadastral na Receita Federal (sempre exibida como 'ativa' por padrão visual)",
      "aplica_se_a": ["PE_ somente"],
      "observacao": "PE_ não tem situação cadastral porque não está cadastrada na Receita Federal brasileira. Aparece apenas como vinculada a empresas brasileiras."
    }
  },
  "notas_importantes": {
    "privacidade": "CPFs são mascarados com asteriscos (***XXXXXX**) para proteção de dados",
    "cnpj": "CNPJs são exibidos completos pois são dados públicos",
    "diferencas_pj_pe": {
      "titulo": "DIFERENÇA CRÍTICA ENTRE PJ_ E PE_ PARA EMPRESAS ESTRANGEIRAS",
      "PJ_com_UF_EX": {
        "descricao": "Pessoa Jurídica estrangeira domiciliada no exterior que POSSUI CNPJ brasileiro",
        "caracteristicas": [
          "Tem CNPJ de 14 dígitos registrado na Receita Federal",
          "Possui informação de situação cadastral (ativa/baixada)",
          "Geralmente tem filial, representação ou operações no Brasil",
          "ID no formato: PJ_00000000000000 (14 dígitos)"
        ],
        "exemplos_uso": "Filial brasileira de multinacional, escritório de representação, empresa estrangeira com operações no Brasil"
      },
      "PE_": {
        "descricao": "Pessoa Estrangeira domiciliada no exterior que NÃO possui CNPJ brasileiro",
        "caracteristicas": [
          "NÃO tem CNPJ brasileiro - usa identificador próprio",
          "NÃO possui informação de situação cadastral na Receita Federal",
          "Aparece apenas como vinculada a empresas brasileiras (ex: sócia)",
          "Não tem operação direta no Brasil",
          "ID no formato: PE_[identificador]"
        ],
        "exemplos_uso": "Holding internacional sócia de empresa brasileira, matriz estrangeira sem filial no Brasil, investidor estrangeiro em empresa brasileira"
      },
      "regra_pratica": "Se tem CNPJ → PJ_. Se não tem CNPJ → PE_. Ambas podem ser estrangeiras, a diferença está na presença ou não de CNPJ brasileiro"
    },
    "direcionalidade": "A direção das setas é crucial para interpretar quem tem qual papel",
    "recursividade": "Grafos podem ter múltiplos níveis (camadas) de profundidade a partir do nó alvo",
    "conectividade": "Campo 'Conectado: Sim' indica que o componente do grafo está conectado",
    "encoding": "Alguns caracteres podem aparecer com encoding especial (ex: \\ em caminhos)",
    "bandeiras": "Ícones com '_com_bandeira' indicam que a entidade possui dívidas registradas",
    "tamanho_nos": "Nós de empresas estrangeiras (PJ_ com UF='EX' e PE_) têm tamanho padrão 30, enquanto entidades nacionais têm tamanho 20 e dados de contato têm tamanho 15"
  },
  "casos_uso_ia": {
    "deteccao_conflito_interesse": {
      "descricao": "Identificar pessoas que administram empresas que se relacionam entre si",
      "aplicacao": "Análise de licitações, contratos públicos"
    },
    "mapeamento_grupos_economicos": {
      "descricao": "Reconstruir estruturas societárias complexas",
      "aplicacao": "Auditoria, compliance, investigações"
    },
    "analise_concentracao_poder": {
      "descricao": "Identificar indivíduos que controlam múltiplas entidades",
      "aplicacao": "Análise antitruste, governança corporativa"
    },
    "rastreamento_vinculacoes": {
      "descricao": "Seguir cadeias de relacionamentos entre entidades",
      "aplicacao": "Due diligence, investigações de fraude"
    },
    "identificacao_estruturas_offshore": {
      "descricao": "Detectar empresas estrangeiras e suas conexões locais",
      "aplicacao": "Análise de evasão fiscal, compliance internacional",
      "diferenciacao": {
        "pj_exterior": "Buscar PJ_ com UF='EX' - empresas com CNPJ e operações formais no Brasil",
        "pe_": "Buscar PE_ - empresas sem CNPJ que aparecem apenas como sócias/controladoras",
        "interpretacao": "PJ_ exterior indica presença formal no Brasil. PE_ indica estrutura puramente de participação societária."
      }
    },
    "mapeamento_estruturas_internacionais": {
      "descricao": "Distinguir tipos de presença estrangeira no Brasil",
      "aplicacao": "Due diligence, análise de investimento estrangeiro direto (IED)",
      "metodo": [
        "PJ_ com UF='EX': Investimento estrangeiro com estrutura local (filial/subsidiária)",
        "PE_: Investimento estrangeiro sem estrutura local (apenas participação acionária)",
        "Analisar cadeia: PE_ → PJ_brasil indica matriz estrangeira sem CNPJ controlando subsidiária brasileira",
        "Analisar cadeia: PJ_exterior → PJ_brasil indica grupo multinacional com presença formal no Brasil"
      ]
    }
  },
  "dicas_processamento": {
    "parsing_title": {
      "recomendacao": "Fazer split por \\n e parsear cada seção separadamente",
      "cuidado": "Formato pode variar entre tipos de entidade"
    },
    "normalizacao_nomes": {
      "recomendacao": "Remover acentos e converter para maiúsculas para comparações",
      "exemplo": "NESTLE vs NESTLÉ"
    },
    "identificacao_tipo": {
      "recomendacao": "Usar prefixo do ID (PF_, PJ_, PE_, EM_, TE_, EN_)",
      "alternativa": "Verificar padrão do campo image",
      "observacao": "PE_ e PJ_ com UF='EX' são ambos entidades estrangeiras, mas PE_ não possui informação de situação cadastral"
    },
    "construcao_matriz_adjacencia": {
      "recomendacao": "Usar edges para construir matriz de adjacências direcionada",
      "nota": "Manter labels das arestas para análise qualitativa"
    },
    "cache_metricas": {
      "recomendacao": "Extrair e cachear métricas do campo 'algoritmos' quando disponível",
      "beneficio": "Evita recálculo de métricas computacionalmente caras"
    }
  }
}

`;

let textoLegenda = legendaGrafo;
      

      // 3) Configurações de layout
      const margemEsq = 15;
      const margemTopo = 15;
      const larguraMax = 180;
      const alturaPagina = 280;
      const linhaAvanco = 3.5;

      doc.setFont("courier");
      doc.setFontSize(8);

      // 4) Adicionar JSON do grafo
      const linhas = doc.splitTextToSize(textoJSON, larguraMax);
      let y = margemTopo;

      for (let i = 0; i < linhas.length; i++) {
        if (y > alturaPagina) {
          doc.addPage();
          y = margemTopo;
        }
        doc.text(linhas[i], margemEsq, y);
        y += linhaAvanco;
      }

      // 5) Adicionar separador
      if (y > alturaPagina - 20) {
        doc.addPage();
        y = margemTopo;
      } else {
        y += linhaAvanco * 3;
      }
      
      doc.setFontSize(10);
      doc.text("=".repeat(60), margemEsq, y);
      y += linhaAvanco * 2;
      doc.text("LEGENDA DE INTERPRETAÇÃO DO GRAFO", margemEsq, y);
      y += linhaAvanco;
      doc.text("=".repeat(60), margemEsq, y);
      y += linhaAvanco * 2;
      
      doc.setFontSize(8);

      // 6) Adicionar JSON da legenda
      const linhasLegenda = doc.splitTextToSize(textoLegenda, larguraMax);

      for (let i = 0; i < linhasLegenda.length; i++) {
        if (y > alturaPagina) {
          doc.addPage();
          y = margemTopo;
        }
        doc.text(linhasLegenda[i], margemEsq, y);
        y += linhaAvanco;
      }

      // 7) Salvar arquivo
      doc.save("grafo_json.pdf");

      //console.log("PDF gerado com múltiplas páginas:", grafoExport);
    }


    // Torna a função global para que o menu possa chamá-la
    window.exportarGrafoParaPDF = exportarGrafoParaPDF;
    









    
    </script>


     











    <script>
    // ========================================
    // FUNÇÃO DE OTIMIZAÇÃO AUTOMÁTICA DO GRAFO
    // ========================================

    function otimizarGrafoAutomaticamente() {
        //console.log("🎯 OTIMIZAÇÃO AUTOMÁTICA - INICIANDO...");


        // ========================================
        // FORÇAR OPERAÇÃO COMO GRAFO DE 2 CAMADAS
        // ========================================
        
        

        // 0. RESETAR MASSA DOS NÓS ALTERADOS
        for (let i=0; i<n_bag.length; i++) {
            nodes.update({id: n_bag[i], mass: 1});
            // console.log('Reset mass for node id:', n_bag[i]);
        }
        // Limpa o array de nós já processados
        n_bag = [];
        
        // Reseta a referência de tamanho e o controle de primeira execução
        t_ref = 40;
        pula_100 = true;

        console.log("✓ Sistema de ajuste de massa resetado (todas as massas = 1)");



        // ========================================
        // ARMAZENA TAMANHOS ORIGINAIS (PRIMEIRA VEZ)
        // ========================================
        let nosIds = nodes.getIds();
        for (let i = 0; i < nosIds.length; i++) {
            let nodeId = nosIds[i];
            // Só armazena se ainda não existe (primeira vez)
            if (!tamanhosOriginais[nodeId]) {
                tamanhosOriginais[nodeId] = network.body.nodes[nodeId].options.size;
            }
        }

    
        // ========================================
        // VERIFICA SE É GRAFO DE 1 CAMADA
        // ========================================
        if (typeof n_cam !== 'undefined' && n_cam === 1) {
            console.log("✓ Grafo de 1 camada detectado - Pressionando K...");
            
            const evtK = new KeyboardEvent('keydown', {
                key: 'k', code: 'KeyK', keyCode: 75, which: 75,
                bubbles: true, cancelable: true, view: window
            });
            document.dispatchEvent(evtK);
            
            tempAlert('Grafo de 1 camada: aplicando layout hierárquico...', 2000);

            return;
        } else if (typeof n_cam === 'undefined' || n_cam > 1) {
            n_cam = 2;
        }

        
        // 1. CALCULAR DISTRIBUIÇÃO PRIMEIRO (antes de deletar nós)
        let todosNos = nodes.getIds();
        let distribuicao = {100:[], 95:[], 90:[], 85:[], 80:[], 75:[], 70:[], 65:[], 60:[], 55:[], 50:[], 45:[], 40:[], 35:[], 30:[], 25:[], 20:[]};
        
        for (let i = 0; i < todosNos.length; i++) {
            let nodeId = todosNos[i];
            let nodeIdStr = String(nodeId);
            
            // Ignora nós TE/EN/EM no cálculo (serão deletados)
            if (nodeIdStr.slice(0, 3) === "TE_" || nodeIdStr.slice(0, 3) === "EN_" || nodeIdStr.slice(0, 3) === "EM_") {
                continue;
            }
            
            // Usa tamanho original se existir, senão usa o atual
            let tamanho = tamanhosOriginais[nodeId] || network.body.nodes[nodeId].options.size;
            
            if (tamanho >= 99.99) distribuicao[100].push(nodeId);
            else if (tamanho >= 95) distribuicao[95].push(nodeId);
            else if (tamanho >= 90) distribuicao[90].push(nodeId);
            else if (tamanho >= 85) distribuicao[85].push(nodeId);
            else if (tamanho >= 80) distribuicao[80].push(nodeId);
            else if (tamanho >= 75) distribuicao[75].push(nodeId);
            else if (tamanho >= 70) distribuicao[70].push(nodeId);
            else if (tamanho >= 65) distribuicao[65].push(nodeId);
            else if (tamanho >= 60) distribuicao[60].push(nodeId);
            else if (tamanho >= 55) distribuicao[55].push(nodeId);
            else if (tamanho >= 50) distribuicao[50].push(nodeId);
            else if (tamanho >= 45) distribuicao[45].push(nodeId);
            else if (tamanho >= 40) distribuicao[40].push(nodeId);
            else if (tamanho >= 35) distribuicao[35].push(nodeId);
            else if (tamanho >= 30) distribuicao[30].push(nodeId);
            else if (tamanho >= 25) distribuicao[25].push(nodeId);
            else if (tamanho >= 20) distribuicao[20].push(nodeId);
        }
        
        console.log("DISTRIBUIÇÃO:", distribuicao);


        // 2. DELETAR NÓS TE, EN, EM (depois do cálculo)
        let nodosParaDeletar = [];
        
        for (let i = 0; i < todosNos.length; i++) {
            let nodeIdStr = String(todosNos[i]);

            if (nodeIdStr.slice(0, 3) === "TE_" || nodeIdStr.slice(0, 3) === "EN_" || nodeIdStr.slice(0, 3) === "EM_") {
                nodosParaDeletar.push(todosNos[i]);
            }
        }
        
        
        if (nodosParaDeletar.length > 0) {
            nodes.remove(nodosParaDeletar);
            console.log(`✓ ${nodosParaDeletar.length} nós deletados (TE/EN/EM)`);

            tempAlert(`Otimização: ${nodosParaDeletar.length} nós deletados`, 2000);
        }

        
        // 3. CALCULAR NÚMERO IDEAL DE PRESSIONAMENTOS
        // Conta apenas os nós que realmente entraram na distribuição (exclui TE/EN/EM)
        let totalNos = 0;
        for (let faixa in distribuicao) {
            totalNos += distribuicao[faixa].length;
        }
        let nosAcumulados = 0;
        let pressionamentosIdeal = 0;



        
        let faixas = [100, 95, 90, 85, 80, 75, 70, 65, 60, 55, 50, 45, 40, 35, 30, 25, 20];
        
        // =========================================================================
        // CONFIGURAÇÕES - AJUSTÁVEIS
        // =========================================================================
        // ESTRATÉGIA: 3 critérios independentes para detectar saltos
        // Mínimo relativo adapta-se ao tamanho do grafo
        // =========================================================================
        
        const LIMIAR_SALTO_PERCENTUAL = 0.15;      // 10% do total (salto absoluto)
        const LIMIAR_SALTO_RELATIVO = 2.0;         // 3.5x a média (salto moderado)
        const LIMIAR_MINIMO_RELATIVO = 0.05;       // 5% do total (mínimo para salto moderado)
        const LIMIAR_SALTO_GIGANTE = 9.0;          // 9x a média (salto gigante)
        const MINIMO = 2;                          // Mínimo 2 pressionamentos
        const MAXIMO = 16;                         // Máximo 16 pressionamentos
        
        // Calcula mínimo absoluto baseado no tamanho do grafo (mínimo: 10 nós)
        let minimoAbsoluto = Math.max(3, Math.floor(totalNos * LIMIAR_MINIMO_RELATIVO));
        console.log(`\nMínimo absoluto calculado: ${minimoAbsoluto} nós (${LIMIAR_MINIMO_RELATIVO*100}% de ${totalNos})`);
        
        // Calcula média móvel das últimas faixas processadas (janela de 3)
        let historicoFaixas = [];
        
        console.log("\n=== ANÁLISE FAIXA POR FAIXA ===");
        
        for (let i = 0; i < faixas.length - 1; i++) {
            let faixaAtual = faixas[i];
            let faixaProxima = faixas[i + 1];
            let nosNaFaixaAtual = distribuicao[faixaAtual].length;
            let nosNaProximaFaixa = distribuicao[faixaProxima].length;
            
            // Adiciona faixa atual ao acumulado
            nosAcumulados += nosNaFaixaAtual;
            pressionamentosIdeal++;
            
            let porcentagemFaixaAtual = nosNaFaixaAtual / totalNos;
            let porcentagemProximaFaixa = nosNaProximaFaixa / totalNos;
            
            // Atualiza histórico (mantém últimas 3 faixas não-vazias)
            if (nosNaFaixaAtual > 0) {
                historicoFaixas.push(nosNaFaixaAtual);
                if (historicoFaixas.length > 3) {
                    historicoFaixas.shift();
                }
            }
            
            // Calcula média das faixas recentes
            let mediaRecente = historicoFaixas.length > 0 
                ? historicoFaixas.reduce((a, b) => a + b, 0) / historicoFaixas.length 
                : nosNaFaixaAtual;
            
            console.log(`Faixa ${faixaAtual}: ${nosNaFaixaAtual} nós (${(porcentagemFaixaAtual*100).toFixed(1)}%)`);
            console.log(`  → Próxima faixa ${faixaProxima}: ${nosNaProximaFaixa} nós (${(porcentagemProximaFaixa*100).toFixed(1)}%)`);
            console.log(`  → Média recente: ${mediaRecente.toFixed(1)} nós`);
            
            // =====================================================================
            // CRITÉRIOS DE DETECÇÃO DE SALTO (3 critérios independentes)
            // =====================================================================
            
            if (pressionamentosIdeal >= MINIMO) {
                
                // CRITÉRIO 1: SALTO ABSOLUTO (% do total)
                // Para se próxima faixa tem muitos nós em relação ao total
                if (porcentagemProximaFaixa >= LIMIAR_SALTO_PERCENTUAL) {
                    console.log(`✓ CRITÉRIO 1 - SALTO ABSOLUTO detectado!`);
                    console.log(`  Próxima faixa ${faixaProxima} tem ${(porcentagemProximaFaixa*100).toFixed(1)}% dos nós (limiar: ${(LIMIAR_SALTO_PERCENTUAL*100).toFixed(0)}%)`);
                    console.log(`  → PARA AQUI para evitar espalhar grafo`);
                    break;
                }
                
                // CRITÉRIO 2: SALTO GIGANTE (independente do valor absoluto)
                // Para se próxima faixa tem MUITAS vezes mais nós que a média
                if (mediaRecente > 0 && nosNaProximaFaixa > mediaRecente * LIMIAR_SALTO_GIGANTE) {
                    console.log(`✓ CRITÉRIO 2 - SALTO GIGANTE detectado!`);
                    console.log(`  Próxima faixa ${faixaProxima} tem ${nosNaProximaFaixa} nós`);
                    console.log(`  Média recente: ${mediaRecente.toFixed(1)} nós`);
                    console.log(`  Proporção: ${(nosNaProximaFaixa / mediaRecente).toFixed(1)}x (limiar: ${LIMIAR_SALTO_GIGANTE}x)`);
                    console.log(`  → PARA AQUI para evitar espalhar grafo`);
                    break;
                }
                
                // CRITÉRIO 3: SALTO MODERADO + MUITOS NÓS (relativo ao total)
                // Para se próxima faixa é maior que a média E tem muitos nós proporcionalmente
                if (mediaRecente > 0 && 
                    nosNaProximaFaixa > mediaRecente * LIMIAR_SALTO_RELATIVO &&
                    nosNaProximaFaixa >= minimoAbsoluto) {
                    console.log(`✓ CRITÉRIO 3 - SALTO MODERADO + MUITOS NÓS detectado!`);
                    console.log(`  Próxima faixa ${faixaProxima} tem ${nosNaProximaFaixa} nós`);
                    console.log(`  Média recente: ${mediaRecente.toFixed(1)} nós`);
                    console.log(`  Proporção: ${(nosNaProximaFaixa / mediaRecente).toFixed(1)}x (limiar: ${LIMIAR_SALTO_RELATIVO}x)`);
                    console.log(`  E tem ≥${minimoAbsoluto} nós (${LIMIAR_MINIMO_RELATIVO*100}% do total)`);
                    console.log(`  → PARA AQUI para evitar espalhar grafo`);
                    break;
                }
            }
            
            // Limite máximo de segurança
            if (pressionamentosIdeal >= MAXIMO) {
                console.log(`✓ Limite máximo de segurança atingido (${MAXIMO})`);
                break;
            }
        }
        
        // Garante mínimo de segurança
        if (pressionamentosIdeal < MINIMO) {
            pressionamentosIdeal = MINIMO;
            console.log(`✓ Aplicando mínimo de segurança: ${MINIMO} pressionamentos`);
        }

        console.log(`\n>>> RESULTADO: ${pressionamentosIdeal} pressionamentos`);
        console.log(`>>> Cobertura: ${(nosAcumulados/totalNos*100).toFixed(1)}%`);
        
        // 4. PRESSIONAR TECLA ESPAÇO
        tempAlert(`Otimização: Aplicando ${pressionamentosIdeal} ajustes...`, 2000);
        
        function simularEspaco() {
            const evt = new KeyboardEvent('keydown', {
                key: ' ', code: 'Space', keyCode: 32, which: 32,
                bubbles: true, cancelable: true, view: window
            });
            document.dispatchEvent(evt);
        }
        
        let contador = 0;
        const intervalo = setInterval(() => {
            simularEspaco();
            contador++;
            console.log(`  Pressionamento ${contador}/${pressionamentosIdeal}`);
            
            if (contador >= pressionamentosIdeal) {
                clearInterval(intervalo);
                
                // 5. CENTRALIZAR (ESC)
                setTimeout(() => {
                    const evtEsc = new KeyboardEvent('keydown', {
                        key: 'Escape', code: 'Escape', keyCode: 27, which: 27,
                        bubbles: true, cancelable: true, view: window
                    });
                    document.dispatchEvent(evtEsc);

                    // ✅ DESSELECIONA TODOS OS NÓS APÓS CADA PRESSIONAMENTO
                    network.unselectAll();
                    
                    console.log("✓ OTIMIZAÇÃO CONCLUÍDA!");
                    tempAlert(`✓ Grafo otimizado! (${pressionamentosIdeal} ajustes aplicados)`, 3000);
                }, 1000);
            }
        }, 200);
    }

    // Torna função global
    window.otimizarGrafoAutomaticamente = otimizarGrafoAutomaticamente;

    </script>


    


    <script>
    // Event listener para o botão de otimização
    document.getElementById('sinarc-otimizar-button').addEventListener('click', function() {
        // Feedback visual
        this.style.background = 'rgba(89, 201, 67, 0.4)';
        setTimeout(() => {
            this.style.background = '';
        }, 300);
        
        // Chama a função de otimização
        if (typeof otimizarGrafoAutomaticamente === 'function') {
            otimizarGrafoAutomaticamente();
        } else {
            console.error('Função otimizarGrafoAutomaticamente não encontrada!');
            alert('Erro: Função de otimização não está disponível.');
        }
    });
    </script>





    <script>
    // ========================================
    // DUPLO CLIQUE NO FUNDO = ESC
    // ========================================

    function ativarDuploCliqueESC() {
        let container = document.getElementById('mynetwork') || 
                        document.querySelector('#network') || 
                        document.querySelector('[id*="network"]');
        
        if (!container) {
            console.error('❌ Container do grafo não encontrado!');
            return;
        }
        
        if (typeof network === 'undefined') {
            console.error('❌ Objeto network não encontrado!');
            return;
        }
        
        // Listener para duplo clique
        network.on('doubleClick', function(params) {
            // Verificar se clicou no fundo (não em nó ou aresta)
            if (params.nodes.length === 0 && params.edges.length === 0) {
                //console.log('⚡ Duplo clique no fundo - simulando ESC');
                
                // Simular pressionamento da tecla ESC
                const eventESC = new KeyboardEvent('keydown', {
                    key: 'Escape',
                    code: 'Escape',
                    keyCode: 27,
                    which: 27,
                    bubbles: true,
                    cancelable: true
                });
                
                document.dispatchEvent(eventESC);
                
                // Também disparar keyup para completar o ciclo
                const eventESCUp = new KeyboardEvent('keyup', {
                    key: 'Escape',
                    code: 'Escape',
                    keyCode: 27,
                    which: 27,
                    bubbles: true,
                    cancelable: true
                });
                
                document.dispatchEvent(eventESCUp);
            }
        });
        
        //console.log('✅ Duplo clique no fundo = ESC ativado');
    }

    // Ativar quando o network estiver pronto
    if (typeof network !== 'undefined') {
        ativarDuploCliqueESC();
    } else {
        // Tentar após um pequeno delay se network ainda não existe
        setTimeout(function() {
            if (typeof network !== 'undefined') {
                ativarDuploCliqueESC();
            }
        }, 1000);
    }
    </script>






    











<script>

// ======================================
// FUNÇÕES PARA MAPA GEOGRÁFICO DO SINARC
// ======================================

// ==============
// DADOS DE TESTE
// ==============
const empresasTeste = [
    {
        razao_social: "EMPRESA TESTE LTDA",
        endereco_completo: "Av. Paulista, 1000 - Bela Vista, São Paulo - SP, 01310-100",
        cidade: "São Paulo",
        uf: "SP"
    },
    {
        razao_social: "CONSULTORIA ABC S/A",
        endereco_completo: "Rua da Candelária, 65 - Centro, Rio de Janeiro - RJ, 20091-020",
        cidade: "Rio de Janeiro",
        uf: "RJ"
    },
    {
        razao_social: "TECH SOLUTIONS ME",
        endereco_completo: "Rua Sete de Setembro, 500 - Centro, Fortaleza - CE, 60060-000",
        cidade: "Fortaleza",
        uf: "CE"
    },
    {
        razao_social: "COMÉRCIO XYZ EIRELI",
        endereco_completo: "Av. Expedito Garcia, 83 - Campo Grande, Cariacica - ES, 29146-201",
        cidade: "Cariacica",
        uf: "ES"
    },
    {
        razao_social: "INDÚSTRIA BETA LTDA",
        endereco_completo: "Sunset Boulevard, 1000 - Hollywood, Los Angeles - CA, USA",
        cidade: "Los Angeles",
        uf: "CA"
    }
];

// ===============================
// FUNÇÃO PARA EXTRAIR DADOS DO GRAFO E GERAR MAPA (VERSÃO CORRIGIDA)
// ===============================
function extrairDadosGrafoParaMapa() {
    
    // Array para armazenar os dados das empresas
    const empresas = [];
    
    // Acessa os nós do grafo via vis.js
    // ===============================
    // USAR APENAS NÓS SELECIONADOS
    // ===============================
    const idsSelecionados = network.getSelectedNodes();

    if (!idsSelecionados || idsSelecionados.length === 0) {
        // Exibe informações na tela
        tempAlert(`Exibe endereços no mapa - Nenhum nó selecionado no grafo.`, 3000);
        //alert('Nenhum nó selecionado no grafo.');
        return [];
    }

    // Recupera apenas os nós selecionados
    const nosDoGrafo = idsSelecionados
    .map(id => nodes.get(id))
    .filter(no => no); // segurança

    
    console.log(`Total de nós no grafo: ${nosDoGrafo.length}`);
    
    /*
    // Filtra apenas nós do tipo PJ_ (pessoas jurídicas)
    const empresasPJ = nosDoGrafo.filter(no => no.id && no.id.startsWith('PJ_'));
    
    console.log(`Total de empresas (PJ) no grafo: ${empresasPJ.length}`);
    */
    
    // Filtra nós do tipo PJ_ (pessoas jurídicas) e PE_ (pessoas estrangeiras)
    const empresasPJ = nosDoGrafo.filter(no => no.id && (no.id.startsWith('PJ_') || no.id.startsWith('PE_')));
    
    //console.log(`Total de empresas (PJ/PE) no grafo: ${empresasPJ.length}`);
    
    // Itera sobre cada empresa
    empresasPJ.forEach(no => {
        try {
            //const title = no.title || '';
            const title = (typeof no.title === 'string' && no.title.trim() !== '')
            ? no.title
            : (typeof no._tooltip_html === 'string' ? no._tooltip_html : '');


            const razaoSocial = no.label || 'Empresa não identificada';
            
            const linhas = title.split('\n');

		

// ===============================
// EXTRAIR SITUAÇÃO DA EMPRESA (PELA IMAGEM DO NÓ)
// ===============================
let situacao = 'Desconhecida';

if (typeof no.image === 'string') {
    const nomeImagem = no.image.toLowerCase();

    if (nomeImagem.includes('_inativa')) {
        situacao = 'Baixada';
    } else if (nomeImagem.includes('_ativa')) {
        situacao = 'Ativa';
    }
}




            
            if (linhas.length < 2) {
                console.warn(`Empresa ${razaoSocial}: informações insuficientes no title`);
                return;
            }
            
            // CORREÇÃO: Procura a linha que contém o endereço
            // O endereço sempre termina com " - UF" ou "-UF" (2 letras maiúsculas)
            let enderecoLinha = '';
            
            // ATENÇÃO: O MAPA EXIBE OS ENDEREÇOS DE TODAS AS PJ/ES, MESMO QUANDO NÃO COMPARTILHADOS COM OUTRAS PJ/PE NA BASE DE DADOS
            for (let i = 1; i < linhas.length && i < 5; i++) {
                const linha = linhas[i].trim();
                
                // Verifica se a linha termina com UF (padrão: - UF ou -UF)
                if (/-[A-Z]{2}\s*$/.test(linha) || /\s+-\s+[A-Z]{2}\s*$/.test(linha)) {
                //if (/-\sEX\s/.test(linha) || /[A-Z]{2}\s-/.test(linha)) {
                    enderecoLinha = linha;
                    break;
                }
            }
            
            if (!enderecoLinha) {
                console.warn(`Empresa ${razaoSocial}: endereço não encontrado no title`);
                return;
            }
            
            let municipio = '';
            let uf = '';
            
            // Divide o endereço por " - "
            const partesEndereco = enderecoLinha.split(' - ');
            
            if (partesEndereco.length >= 2) {
                const ultimaParte = partesEndereco[partesEndereco.length - 1].trim();
                
                // CASO 1: Última parte é só a UF (2 letras)
                // Exemplo: "... - São Paulo - SP"
                if (/^[A-Z]{2}$/.test(ultimaParte)) {
                    uf = ultimaParte;
                    municipio = partesEndereco[partesEndereco.length - 2].trim();
                }
                // CASO 2: Última parte é MUNICÍPIO-UF (hífen grudado, sem espaços)
                // Exemplo: "... - FEIRA DE SANTANA-BA"
                else if (/^(.+)-([A-Z]{2})$/.test(ultimaParte)) {
                    const match = ultimaParte.match(/^(.+)-([A-Z]{2})$/);
                    municipio = match[1].trim();
                    uf = match[2].trim();
                }
                // CASO 3: Última parte é MUNICÍPIO - UF (com espaços ao redor do hífen)
                else {
                    const match = ultimaParte.match(/^(.+?)\s+-\s+([A-Z]{2})$/);
                    if (match) {
                        municipio = match[1].trim();
                        uf = match[2].trim();
                    }
                }
            }
            
            // Se ainda não encontrou, tenta extrair diretamente da linha completa
            if (!municipio || !uf) {
                // Busca padrão: qualquer coisa seguida de hífen e 2 letras maiúsculas no final
                const match = enderecoLinha.match(/([A-ZÀ-Ÿ][A-Za-zÀ-ÿ\s]+)-([A-Z]{2})\s*$/);
                if (match) {
                    municipio = match[1].trim();
                    uf = match[2].trim();
                }
            }


            
            // Validações
            if (!municipio || municipio === '' || municipio.length < 2) {
                // Para exterior (EX), usa o endereço completo como "cidade"
                if (uf === 'EX') {
                    municipio = enderecoLinha.split(' - ')[0].trim();  // Pega primeira parte do endereço
                    console.log(`⚠ Empresa exterior ${razaoSocial}: usando endereço como cidade: "${municipio}"`);
                } else {
                    console.warn(`Empresa ${razaoSocial}: município inválido. Endereço: "${enderecoLinha}"`);
                    return;
                }
            }

            if (!uf || !/^[A-Z]{2}$/.test(uf)) {
                console.warn(`Empresa ${razaoSocial}: UF inválida "${uf}". Endereço: "${enderecoLinha}"`);
                return;
            }



            
            // Pula empresas do exterior
            //if (uf === 'EX') {
            //    console.log(`Empresa ${razaoSocial}: localizada no exterior, ignorada`);
            //    return;
            //}
            
            console.log(`✓ ${razaoSocial}: ${municipio} - ${uf}`);
            
            // Adiciona ao array
            empresas.push({
                razao_social: razaoSocial,
                situacao: situacao, // <-- NOVO CAMPO
                endereco_completo: enderecoLinha,
                cidade: municipio,
                uf: uf
            });

            
        } catch (erro) {
            console.error(`Erro ao processar empresa ${no.label}:`, erro);
        }
    });
    
    console.log(`Total de empresas válidas para o mapa: ${empresas.length}`);
    
    return empresas;
}

// ===============================
// FUNÇÃO PARA GERAR E ABRIR MAPA A PARTIR DO GRAFO
// ===============================
function gerarMapaDoGrafo() {
    
    console.log('Extraindo dados do grafo...');
    
    // Extrai dados das empresas do grafo
    const empresas = extrairDadosGrafoParaMapa();
    
    if (empresas.length === 0) {
        //tempAlert(`Nenhuma empresa com localização válida encontrada no grafo.`, 3000);
        //alert('Nenhuma empresa com localização válida encontrada no grafo.');
        return;
    }
    
    console.log(`Abrindo mapa com ${empresas.length} empresas...`);
    
    // Abre o mapa em nova janela
    abrirMapaEmpresas(empresas);
}

// ===============================
// FUNÇÃO PARA ABRIR MAPA EM NOVA JANELA
// ===============================
function abrirMapaEmpresas(empresas) {
    
    // Gerar HTML do mapa
    const htmlMapa = gerarHTMLMapa(empresas);
    
    // Abrir nova janela
    const janela = window.open(
    'about:blank',
    '_blank',
    'width=1200,height=800,scrollbars=yes,resizable=yes'
);

    
    // Escrever HTML na janela
    janela.document.open();
    janela.document.write(htmlMapa);
    janela.document.close();
}

// ===============================
// FUNÇÃO PARA GERAR HTML DO MAPA
// ===============================
function gerarHTMLMapa(empresas) {
    
    // Converter array completo para string JavaScript
    const empresasArray = JSON.stringify(empresas);
    
    let html = '<!DOCTYPE html>';
    html += '<html lang="pt-BR">';
    html += '<head>';
    html += '<meta charset="utf-8">';
    html += '<meta name="viewport" content="width=device-width, initial-scale=1.0">';
    html += '<title>Mapa SINARC – Agrupamento por Cidade</title>';
    html += '<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />';
    html += '<style>';
    html += 'html, body { margin: 0; height: 100%; }';
    html += '#map { height: 100vh; width: 100%; }';
    html += '#status { position: fixed; bottom: 10px; left: 10px; background: white; padding: 6px 10px; border: 1px solid #ccc; z-index: 1000; font-family: "Helvetica Neue", Arial, Helvetica, sans-serif; font-size: 12px; line-height: 1.4; }';
    html += '.marker-label { background: white; border: 1px solid #444; border-radius: 10px; padding: 2px 6px; font-size: 11px; font-weight: bold; text-align: center; }';
    html += '.empresa-link { color: #2c5f8d; text-decoration: none; font-weight: 500; transition: color 0.2s; }';
    html += '.empresa-link:hover { color: #1e4163; text-decoration: underline; }';

    html += '.leaflet-popup-content-wrapper { width: auto !important; min-width: 300px; max-width: none !important; }';
    html += '.leaflet-popup-content { width: auto !important; min-width: 280px; max-height: 400px; overflow-y: auto; white-space: nowrap; }';

    html += '.empresa-link { white-space: nowrap; }';

    html += '#btn-fit { position: fixed; top: 10px; right: 10px; z-index: 1000; ';
    html += 'background: white; ';
    html += 'border: 2px solid rgba(0,0,0,0.2); ';
    html += 'background-clip: padding-box; ';  
    html += 'border-radius: 4px; ';
    html += 'box-shadow: none; ';
    html += 'width: 34px; height: 34px; ';
    html += 'cursor: pointer; ';
    html += 'display: flex; align-items: center; justify-content: center; ';
    html += 'font-size: 26px; ';  
    html += 'line-height: 30px; ';
    html += 'text-align: center; ';
    html += 'text-decoration: none; ';
    html += 'color: black; ';
    html += '-webkit-text-fill-color: black; ';
    html += 'font-weight: bold; ';  
    html += 'transition: background 0.2s; }';  
    html += '#btn-fit:hover { background: #f4f4f4; }';
    html += '#btn-fit:active { transform: scale(0.98); }';

    html += '#btn-toggle-labels { position: fixed; top: 50px; right: 10px; z-index: 1000; ';
    html += 'background: white; ';
    html += 'border: 2px solid rgba(0,0,0,0.2); ';
    html += 'background-clip: padding-box; ';
    html += 'border-radius: 4px; ';
    html += 'box-shadow: none; ';
    html += 'width: 34px; height: 34px; ';
    html += 'cursor: pointer; ';
    html += 'display: flex; align-items: center; justify-content: center; ';
    html += 'font-size: 20px; ';
    html += 'line-height: 30px; ';
    html += 'text-align: center; ';
    html += 'text-decoration: none; ';
    html += 'color: black; ';
    html += '-webkit-text-fill-color: black; ';
    html += 'font-weight: bold; ';
    html += 'transition: background 0.2s; }';
    html += '#btn-toggle-labels:hover { background: #f4f4f4; }';
    html += '#btn-toggle-labels:active { transform: scale(0.98); }';
    html += '.tooltip-quantidade.hidden { display: none !important; }';

    html += '</style>';
    html += '</head>';
    html += '<body>';
    html += '<button id="btn-fit" title="Enquadrar todos os pontos">⌂</button>';
    html += '<button id="btn-toggle-labels" title="Mostrar/Ocultar rótulos das cidades">👁️</button>';
    html += '<div id="map"></div>';
    html += '<div id="status">Carregando mapa e cidades...</div>';
    html += '<script src="https://unpkg.com/leaflet/dist/leaflet.js"><\/script>';
    html += '<script>';
    
    // Dados das empresas
    html += 'const empresas = ' + empresasArray + ';';
    
    // Função de geocodificação
    html += 'async function geocodificarCidade(nomeCidade, uf) {';
    html += '  const countryParam = (uf === "EX") ? "" : "&countrycodes=br";';
    html += '  const url = "https://nominatim.openstreetmap.org/search?format=json&limit=1&accept-language=pt-BR&addressdetails=1" + countryParam + "&q=" + encodeURIComponent(nomeCidade);';
    html += '  const resposta = await fetch(url, { headers: { "User-Agent": "sinarc-mapa-teste/1.0" } });';
    html += '  const dados = await resposta.json();';
    html += '  if (dados.length === 0) { console.warn("Cidade não encontrada:", nomeCidade); return null; }';
    html += '  return { lat: parseFloat(dados[0].lat), lng: parseFloat(dados[0].lon), nome: nomeCidade, pais: dados[0].address?.country_code || "" };';
    html += '}';
    
    // Ícones
    html += 'const iconeBrasil = L.icon({ iconUrl: "https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png", shadowUrl: "https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png", iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41] });';
    html += 'const iconeExterior = L.icon({ iconUrl: "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png", shadowUrl: "https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png", iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41] });';
    
    // Função principal do mapa
    html += 'async function carregarMapaPorCidade() {';
    html += '  const status = document.getElementById("status");';
    html += '  window.mapaSinarc = L.map("map");';  // ← GLOBAL
    html += '  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", { attribution: "© OpenStreetMap contributors" }).addTo(window.mapaSinarc);';  // ← CORRIGIDO
    
    // Agrupar empresas por cidade+UF (chave única)
    html += '  const empresasPorCidade = {};';
    html += '  empresas.forEach(emp => {';
    html += '    const chave = `${emp.cidade} - ${emp.uf}`;';
    html += '    if (!empresasPorCidade[chave]) { ';
    html += '      empresasPorCidade[chave] = { cidade: emp.cidade, uf: emp.uf, empresas: [] };';
    html += '    }';
    html += '    empresasPorCidade[chave].empresas.push(emp);';
    html += '  });';
    
    html += '  console.log("Empresas por cidade:", empresasPorCidade);';
    html += '  window.limitesSinarc = L.latLngBounds([]);';  // ← GLOBAL
    html += '  let processadas = 0;';
    html += '  const total = Object.keys(empresasPorCidade).length;';

    // Array para coletar falhas
    html += '  const empresasNaoLocalizadas = [];';
    
    html += '  for (const chave in empresasPorCidade) {';
    html += '    const dadosCidade = empresasPorCidade[chave];';
    html += '    const cidadeNome = dadosCidade.cidade;';
    html += '    const uf = dadosCidade.uf;';
    html += '    const cidadeUF = (uf === "EX") ? cidadeNome : `${cidadeNome} - ${uf}`;';

    html += '    status.textContent = `Geocodificando: ${cidadeUF} (${++processadas}/${total})`;';
    html += '    const ponto = await geocodificarCidade(cidadeUF, uf);';
    html += '    if (ponto) {';
    html += '      const ehBrasil = ponto.pais.toLowerCase() === "br";';
    html += '      const marcador = L.marker([ponto.lat, ponto.lng], { icon: ehBrasil ? iconeBrasil : iconeExterior }).addTo(window.mapaSinarc);';  // ← CORRIGIDO
    
    // Tooltip mostra cidade - UF e quantidade
    html += '      const qtd = dadosCidade.empresas.length;';
    html += '      marcador.bindTooltip(`${cidadeUF} (${qtd})`, { permanent: true, direction: "top", offset: [0, -45], className: "tooltip-quantidade" });';
    
    // Popup mostra cidade - UF e lista de empresas (ORDENADAS ALFABETICAMENTE)
    html += '      let popupHTML = `<b>${cidadeUF} (${qtd})</b><br>`;';
    html += '      const empresasOrdenadas = dadosCidade.empresas.sort((a, b) => a.razao_social.localeCompare(b.razao_social));';
    html += '      empresasOrdenadas.forEach(emp => {';
    html += '        const enderecoEncoded = encodeURIComponent(emp.endereco_completo);';
    html += '        const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${enderecoEncoded}`;';
    html += '        popupHTML += `• <a href="${googleMapsUrl}" target="_blank" class="empresa-link" title="Ver localização no Google Maps">${emp.razao_social} <span style="color:#555;">(${emp.situacao})</span></a><br>`;';
    html += '      });';
    html += '      marcador.bindPopup(popupHTML);';
    
    // Sistema de delay para fechar o popup
    html += '      let timeoutFecharPopup = null;';
    html += '      marcador.on("mouseover", function () {';
    html += '        if (timeoutFecharPopup) { clearTimeout(timeoutFecharPopup); timeoutFecharPopup = null; }';
    html += '        this.openPopup();';
    html += '      });';
    
    html += '      marcador.on("mouseout", function () {';
    html += '        const popup = this.getPopup();';
    html += '        timeoutFecharPopup = setTimeout(() => { this.closePopup(); }, 500);';
    html += '        const popupElement = popup.getElement();';
    html += '        if (popupElement) {';
    html += '          popupElement.addEventListener("mouseenter", () => {';
    html += '            if (timeoutFecharPopup) { clearTimeout(timeoutFecharPopup); timeoutFecharPopup = null; }';
    html += '          });';
    html += '          popupElement.addEventListener("mouseleave", () => {';
    html += '            this.closePopup();';
    html += '          });';
    html += '        }';
    html += '      });';
    
    html += '      window.limitesSinarc.extend([ponto.lat, ponto.lng]);';  // ← CORRIGIDO

    // Se não localizou, adiciona à lista de falhas
    html += '    } else {';
    html += '      dadosCidade.empresas.forEach(emp => {';
    html += '        empresasNaoLocalizadas.push({ razao: emp.razao_social, endereco: emp.endereco_completo });';
    html += '      });';
    html += '    }';

    html += '    await new Promise(r => setTimeout(r, 800));';
    html += '  }';
    
    html += '  if (window.limitesSinarc.isValid()) { window.mapaSinarc.fitBounds(window.limitesSinarc, { padding: [50, 50], maxZoom: 11 }); }';  // ← CORRIGIDO
    html += '  status.textContent = `Mapa carregado (${empresas.length} PJ/PE).`;';

    // Exibir popup com empresas não localizadas
    html += '  if (empresasNaoLocalizadas.length > 0) {';
    html += '    let mensagem = `⚠️ ${empresasNaoLocalizadas.length} empresa(s) não localizada(s):\n\n`;';
    html += '    empresasNaoLocalizadas.forEach(emp => {';
    html += '      mensagem += `• ${emp.razao}\n  ${emp.endereco}\n\n`;';
    html += '    });';
    html += '    alert(mensagem);';
    html += '    console.warn("Empresas não localizadas:", empresasNaoLocalizadas);';
    html += '  }';

    html += '}';
    html += 'carregarMapaPorCidade();';

    // Função para enquadrar todos os pontos
    html += 'function enquadrarTudo() {';
    html += '  if (window.limitesSinarc && window.limitesSinarc.isValid()) {';  // ← CORRIGIDO
    html += '    window.mapaSinarc.fitBounds(window.limitesSinarc, { padding: [50, 50], maxZoom: 11 });';  // ← CORRIGIDO
    html += '  }';
    html += '}';

    // Variável para controlar estado dos rótulos
    html += 'let tooltipsVisiveis = true;';
    
    // Função para alternar visibilidade dos tooltips
    html += 'function alternarTooltips() {';
    html += '  tooltipsVisiveis = !tooltipsVisiveis;';
    html += '  const tooltips = document.querySelectorAll(".tooltip-quantidade");';
    html += '  tooltips.forEach(tooltip => {';
    html += '    if (tooltipsVisiveis) {';
    html += '      tooltip.classList.remove("hidden");';
    html += '    } else {';
    html += '      tooltip.classList.add("hidden");';
    html += '    }';
    html += '  });';
    html += '  const btn = document.getElementById("btn-toggle-labels");';
    html += '  btn.textContent = tooltipsVisiveis ? "👁️" : "👁️‍🗨️";';
    html += '  btn.title = tooltipsVisiveis ? "Ocultar rótulos das cidades (Tecla L)" : "Mostrar rótulos das cidades (Tecla L)";';
    html += '}';
    
    // Event listeners para botão e tecla Home
    html += 'document.getElementById("btn-fit").addEventListener("click", enquadrarTudo);';
    html += 'document.getElementById("btn-toggle-labels").addEventListener("click", alternarTooltips);';
    //html += 'document.addEventListener("keydown", (e) => {';
    //html += '  if (e.key === "Home") { e.preventDefault(); enquadrarTudo(); }';
    //html += '});';

    html += '<\/script>';
    html += '</body>';
    html += '</html>';
    
    return html;
}

// ===============================
// FUNÇÃO DE TESTE COM DADOS FICTÍCIOS
// ===============================
function testarMapaComDadosTeste() {
    console.log('Testando mapa com dados de teste...');
    abrirMapaEmpresas(empresasTeste);
}

// ===============================
// FIM DAS FUNÇÕES PARA MAPA GEOGRÁFICO
// ===============================

// Torna função global
window.gerarMapaDoGrafo = gerarMapaDoGrafo;

</script>

















<div id="sinarc-tooltip-node"
     style="
        position: fixed;
        display: none;
        max-height: 295px;
        max-width: min(600px, calc(100vw - 24px));
        overflow-y: auto;
        overflow-x: auto;
        background: rgba(255,255,216,0.98);
        border: 1px solid #999;
        border-radius: 3px;
        font-size: 11px;
        padding: 6px 60px 6px 6px;
        z-index: 99999;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        white-space: pre;
        pointer-events: auto;
     ">
</div>

<style>
    .tooltip-buttons {
        display: flex;
        flex-direction: column;
        padding: 0px;
        margin-bottom: 10px;
    }

    .buttons-label {
        font-size: 11px;
        text-align: center;
        margin-bottom: 5px;
        font-weight: normal;
        align-self: left;
        width: 330px;
    }

    .buttons-row {
        display: flex;
        gap: 20px;
        justify-content: left;
        align-items: left;
    }

    .tooltip-buttons button {
        min-width: 50px;
        padding: 1px 18px;
        background: #52a0fa;
        color: #FFFFFF;
        border: 1px solid #0b66cf;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        font-weight: bold;
        transition: all 0.2s;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .tooltip-buttons button:hover {
        background: #2b8ef7;
        border-color: #1f7fe0;
    }

    .tooltip-buttons button:active {
        background: #095cc0;
        border-color: #074b9e;
    }


    
    
    
    .tooltip-close-button {
        position: absolute;
        top: 5px;
        right: 5px;
        background: #f0f0f0;
        border: none;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-weight: bold;
        font-size: 12px;
        color: #666;
        z-index: 10;
        transition: background 0.2s;
    }

    
    .tooltip-close-button:hover {
        background: #e0e0e0;
    }
</style>

<script>
(function () {
    const tooltip = document.getElementById("sinarc-tooltip-node");
    if (!tooltip) return;

    // --- SISTEMA GLOBAL DE RASTREIO DE MOUSE ---
    let globalMouseX = 0;
    let globalMouseY = 0;
    
    // Atualiza posição do mouse em qualquer movimento na tela
    document.addEventListener('mousemove', (e) => {
        globalMouseX = e.clientX;
        globalMouseY = e.clientY;
    });
    // -------------------------------------------------

    // --- VARIÁVEIS DO LOOP DE PARADA ---
    let stillnessInterval = null;
    let hoverStartTime = 0;
    let hoverStartX = 0;
    let hoverStartY = 0;
    let currentHoveredNodeId = null;

    function closeTooltip() {
        tooltip.style.display = "none";
        tooltip.scrollTop = 0;
        hoveredNodeId = null;
        isMouseOverNode = false;
        isMouseOverTooltip = false;
        stopStillnessCheck();
    }

    const STILLNESS_DELAY = 1500; // 1.5s
    const MOVEMENT_THRESHOLD = 3; // Tolerância de 3px (movimentos menores que isso não resetam)
    // ---------------------------------

    let hideTimer = null;
    let isMouseOverNode = false;
    let isMouseOverTooltip = false;

    // Função que verifica periodicamente se o mouse parou
    function startStillnessCheck(nodeId) {
        stopStillnessCheck(); // Para verificação anterior se houver

        currentHoveredNodeId = nodeId;
        hoverStartTime = Date.now(); // Registra início da contagem
        hoverStartX = globalMouseX;  // Marca posição inicial
        hoverStartY = globalMouseY;

        // Inicia loop de verificação (a cada 50ms)
        stillnessInterval = setInterval(() => {
            // Calcula distância Euclidiana da posição atual para a posição de "início da contagem"
            const dist = Math.hypot(globalMouseX - hoverStartX, globalMouseY - hoverStartY);

            if (dist > MOVEMENT_THRESHOLD) {
                // O mouse se moveu! Reinicia a contagem.
                // A nova posição se torna a posição base.
                hoverStartTime = Date.now();
                hoverStartX = globalMouseX;
                hoverStartY = globalMouseY;
                // console.log("Mouse moveu, resetando timer...");
            } 
            else if (Date.now() - hoverStartTime >= STILLNESS_DELAY) {
                // O tempo passou E o mouse está parado (dentro do threshold).
                stopStillnessCheck(); // Para o loop
                const node = nodes.get(nodeId);
                if (node) {
                    // Passa a posição atual do mouse para posicionar o tooltip exatamente onde parou
                    mostrarTooltip(node, {event: {clientX: globalMouseX, clientY: globalMouseY}});
                }
            }
        }, 50); // Checa 20 vezes por segundo
    }

    function stopStillnessCheck() {
        if (stillnessInterval) {
            clearInterval(stillnessInterval);
            stillnessInterval = null;
        }
        currentHoveredNodeId = null;
    }

    // --- FUNÇÃO DE EXIBIÇÃO ---
    function mostrarTooltip(node, params) {
        if (!node || !node._tooltip_html) return;

        const lines = node._tooltip_html.split(/\n/);
        
        const primeiraLinhaTexto = lines[0]
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;");
        
        /*
        const textoPesquisa = `Realize uma pesquisa profunda e detalhada sobre o histórico de conformidade e integridade da pessoa a seguir. 
            O objetivo é identificar riscos reputacionais por meio de uma análise forense com foco no controle externo da Administração Pública e na produção de insights para a defesa do interesse público. 
            Utilize inteligência com fontes abertas (OSINT) para coletar dados relevantes disponíveis na internet, incluindo notícias, registros públicos, listas de sanções, portais de transparência, redes sociais e outras fontes confiáveis. 
            Concentre-se em aspectos que possam indicar envolvimento em práticas ilícitas, má conduta empresarial ou qualquer outro fator que possa comprometer a integridade e a reputação da pessoa investigada.
            O número do CPF de pessoas físicas está no formato PF_***NNNNNN** e o número do CNPJ de pessoas jurídicas está no formato PJ_NNNNNNNNNNNNNN.
            Por favor, forneça as informações estruturadas da seguinte forma: 
            1. Notícias e Irregularidades: Liste menções em investigações, processos judiciais e administrativos públicos, inquéritos ou notícias sobre fraudes, corrupção e irregularidades envolvendo a Administração Pública e o interesse coletivo. 
            2. Rede de Ligações: Identifique sócios, empresas coligadas ou parceiros de negócios frequentemente citados em conjunto com o alvo. 
            3. Presença em Listas: Verifique se há menções em portais de transparência, listas de sanções ou registros de empresas e pessoas suspensas ou impedidas de contratar com a Administração Pública (CEIS, CNEP, CEPIM, CEAF, CNIA, Acordo de Leniência, PEP).
            4. Atividades Comerciais: Descreva o setor de atuação, principais atividades comerciais e qualquer histórico de contratos com o setor público. 
            5. Reputação Online: Analise avaliações, comentários e discussões em redes sociais, fóruns e sites especializados. 
            6. Histórico Financeiro: Investigue falências, recuperações judiciais ou outras questões financeiras relevantes. 
            7. Conformidade Legal: Verifique o cumprimento de obrigações legais, fiscais e regulatórias. 
            8. Outras Informações Relevantes: Inclua quaisquer outras informações que possam impactar a avaliação de risco reputacional do alvo.
            9. Insights para Pesquisa: Forneça 5 insights ou pontos de atenção que possam guiar uma investigação mais aprofundada sobre o alvo. 
            10. Prompts para Aprofundamento: Ao final de cada resposta, apresente 6 novas sugestões de prompts para IA (de 1 a 6), distintas das sugestões já apresentadas na conversa, sendo a sexta opção específica para gerar novos prompts contendo sugestões de pontos de auditoria ainda não abordados nesta converesa, visando aprofundar ainda mais a investigação por meio de dados públicos disponíveis na internet, de modo que o usuário precise apenas digitar o número do prompt desejado para a IA realizar a pesquisa correspondente. Peça para o usuário digitar um número.
            ATENÇÃO: Se o alvo for um telefone (11 12345678), um endereço (DEPUTADO EDUARDO KM LUIS MAGALHAES 529-FEIRA DE SANTANA-BA) ou um e-mail, realize uma pesquisa profunda sobre o alvo, objetivando encontrar menções em bases públicas, redes sociais, listas de spam, vazamentos de dados e outras fontes abertas na internet.
            `;
        */
        
        const textoPesquisaFormatado = encodeURIComponent(window.textoPesquisa);
        const url = 'https://www.google.com/search?q=' + textoPesquisaFormatado + '+Entidade:+' + lines[0] + '&udm=50';
        
        const firstLine = '<strong><a href="\#" style="color: #0066cc; text-decoration: none; cursor: pointer;" onclick="window.open(\'' + url + '\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + primeiraLinhaTexto + '<\/a> 🔍<\/strong>';
        
        const otherLines = lines.slice(1)
            .map(line => line
                .trim()
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
            )
            .join("<br>");
        
        const botoesSection = `<div class="tooltip-buttons">
                <div class="buttons-label">Abrir nó em camadas</div>
                <div class="buttons-row">
                    <button onclick="abrirGrafo(1)">1</button>
                    <button onclick="abrirGrafo(2)">2</button>
                    <button onclick="abrirGrafo(3)">3</button>
                    <button onclick="abrirGrafo(4)">4</button>
                    <button onclick="abrirGrafo(5)">5</button>
                </div>
            </div>`;
        
        
        //const html = botoesSection + firstLine + (otherLines ? "<br>" + otherLines : "");
        const closeButton = `<button class="tooltip-close-button">X</button>`;
        const html = closeButton + botoesSection + firstLine + (otherLines ? "<br>" + otherLines : "");

        tooltip.innerHTML = html;

        // ADICIONAR EVENTO PROGRAMATICAMENTE (DENTRO DO SCOP)
        const closeButtonElement = tooltip.querySelector('.tooltip-close-button');
        if (closeButtonElement) {
            closeButtonElement.addEventListener('click', closeTooltip);
        }

        
        
        // Posicionamento usando o evento de mouse (que agora é garantido)
        const evt = params && params.event ? params.event : window.event;
        if (!evt) return;
        
        let x = evt.clientX + 12;
        let y = evt.clientY + 12;

        tooltip.style.visibility = "hidden";
        tooltip.style.display = "block";
        const w = tooltip.offsetWidth;
        const h = tooltip.offsetHeight;

        const maxX = window.innerWidth - w - 12;
        const maxY = window.innerHeight - h - 12;

        if (x > maxX) x = Math.max(12, maxX);
        if (x < 12) x = 12;
        if (y > maxY) y = Math.max(12, maxY);
        if (y < 12) y = 12;

        tooltip.style.left = x + "px";
        tooltip.style.top  = y + "px";
        tooltip.style.visibility = "visible";
        
        hoveredNodeId = node.id;
        isMouseOverNode = true;
    }

    function checkHideTooltip() {
        if (hideTimer) clearTimeout(hideTimer);
        hideTimer = setTimeout(() => {
            if (!isMouseOverNode && !isMouseOverTooltip) {
                tooltip.style.display = "none";
                tooltip.scrollTop = 0;
                if (typeof hoveredNodeId !== 'undefined') hoveredNodeId = null;
            }
        }, 100); 
    }

    network.on("hoverNode", function (params) {
        const nodeId = params.node;
        const node = nodes.get(nodeId);
        if (!node) return;
        
        if (!node._tooltip_html && node.title) {
            node._tooltip_html = node.title;
            //nodes.update({ id: nodeId, title: undefined });
        }
        if (!node._tooltip_html) return;
        
        isMouseOverNode = true;
        if (hideTimer) clearTimeout(hideTimer);
        
        // Inicia a verificação de parada (coordenadas)
        startStillnessCheck(nodeId);
    });
    
    network.on("blurNode", function () {
        isMouseOverNode = false;
        stopStillnessCheck(); // Para o timer de verificação imediatamente
        checkHideTooltip();
    });

    tooltip.addEventListener("mouseenter", () => {
        isMouseOverTooltip = true;
        if (hideTimer) clearTimeout(hideTimer);
    });

    tooltip.addEventListener("mouseleave", () => {
        isMouseOverTooltip = false;
        checkHideTooltip();
    });

})();

function closeTooltip() {
        tooltip.style.display = "none";
        tooltip.scrollTop = 0;
        hoveredNodeId = null;
        isMouseOverNode = false;
        isMouseOverTooltip = false;
        stopStillnessCheck();
    }


let hoveredNodeId = null;

function abrirGrafo(camadasSelecionada) {
    if (!hoveredNodeId) {
        tempAlert("Nenhum nó em foco para abrir em camadas", 3000);
        return;
    }

    const cnpj = hoveredNodeId;
    const conf_destaca = false;

    if (location.protocol === "https:") {
        const url = `https://sinarc.app/?cnpj=${cnpj}&camada=${camadasSelecionada}`;
        window.open(url, "_blank");
        tempAlert(`Botão ${camadasSelecionada} - Abrindo nó ${cnpj} em nova aba`, 3000);
        return;
    }

    const textoCopiar = cnpj + "***" + camadasSelecionada + "***" + conf_destaca;
    async function copyOperation(texto) {
        await navigator.clipboard.writeText(texto);
    }
    setTimeout(() => {
        copyOperation(textoCopiar);
    }, 200);

    tempAlert(
        `Botão ${camadasSelecionada} - Nó ${cnpj} copiado (${camadasSelecionada} camada${camadasSelecionada > 1 ? 's' : ''})`,
        3000
    );
}
</script>



    

        <style>
            #info-base-dados {
                position: fixed;
                bottom: 7px;  /* Distância do fundo - ajustável */
                left: 11px;    /* Distância da esquerda - ajustável */
                font-family: Arial, sans-serif;
                font-size: 10px;  /* Tamanho da fonte - ajustável */
                color: #666;      /* Cor do texto - ajustável */
                background-color: rgba(255, 255, 255, 0.0);  /* Fundo semi-transparente - ajustável */
                padding: 5px 10px;  /* Espaçamento interno - ajustável */
                border-radius: 3px;  /* Cantos arredondados - ajustável */
                z-index: 999;
                pointer-events: none;  /* Não interfere com cliques */
                opacity: 0.5;  /* Transparência do elemento - ajustável */
            }
            
            #info-base-dados:hover {
                opacity: 1;  /* Fica mais visível ao passar o mouse */
            }

        </style>

        <div id="info-base-dados">
            Base de dados: 13/12/2025
        </div>

    

<script>


    function gerarRelatorio() {

        const selectedNodes = network.getSelectedNodes();
        const totalSelecionados = selectedNodes.length;
        const textoNos = totalSelecionados === 1 ? 'NÓ SELECIONADO' : 'NÓS SELECIONADOS';

        if (selectedNodes.length == 0){
                tempAlert('Selecione pelo menos um nó para gerar o relatório. Pressione SHIFT + a para selecionar todos os nós.', 3000);
                return;
        }

        const textoPesquisa = window.textoPesquisa


        // CALCULA TOTAL E EXTRAI DADOS DE PJ (apenas Brasil) e PE (exterior + estrangeiros)
        const pessoasJuridicas = [];
        const pessoasEstrangeiras = [];
        
        selectedNodes.forEach(function (id) {
            if (typeof id !== 'string') return;
            
            const node = network.body.data.nodes.get(id);
            const title = node.title || '';
            const image = node.image || '';
            const conexoes = network.getConnectedEdges(id).length;
            
            // Situação baseada na imagem
            let situacao = 'ATIVA';
            if (image.includes('_inativa')) {
                situacao = 'BAIXADA';
            }
            
            // Restrição (procura "Situação Fiscal:")
            let restricao = '';
            const matchFiscal = title.match(/Situação Fiscal:\s*(\w+)/i);
            if (matchFiscal) {
                restricao = matchFiscal[1].toUpperCase();
            }
            
            // PROCESSA PE_ (Pessoa Estrangeira)
            if (id.startsWith('PE_')) {
                const nome = id.substring(3);
                
                // País e endereço - percorre todas as linhas buscando "- EX"
                let pais = '';
                let endereco = '';
                const linhas = title.split('\n').slice(1);
                for (let i = 0; i < linhas.length; i++) {
                    const linha = linhas[i].trim();
                    if (linha === 'nan' || linha === '' || linha.startsWith('(EMPRESA')) continue;
                    if (linha.startsWith('NÓ -') || linha.startsWith('GRAFO -') || linha.includes('Nós Adjacentes')) break;
                    
                    /*
                    // Verifica se termina com "- EX" (endereço estrangeiro)
                    if (linha.endsWith('- EX') || linha.endsWith('- EX ')) {
                        const partes = linha.split(' - ');
                        if (partes.length >= 2 && partes[0].trim() !== 'nan') {
                            pais = partes[0].trim();
                            // Endereço é tudo entre o país e o "- EX" final
                            endereco = partes.slice(1, -1).join(' - ').trim();
                            if (endereco === '') {
                                endereco = partes.slice(1).join(' - ').replace(/\s*-\s*EX\s*$/i, '').trim();
                            }
                        }
                        break;
                    }
                    */

                    // 1. Verifica se a linha contém "- EX" ou "- EX " em qualquer posição
                    if (linha.endsWith('- EX') || linha.includes('- EX ')) {
                        
                        // 2. O endereço agora é a linha completa (sem espaços extras nas pontas)
                        endereco = linha.trim();
                        
                        // 3. (Opcional) Se ainda precisar extrair o país separadamente:
                        const partes = linha.split(' - ');
                        if (partes.length >= 1 && partes[0].trim().toLowerCase() !== 'nan') {
                            pais = partes[0].trim();
                        }

                        // Como é a "primeira linha que contém", interrompemos o loop
                        break;
                    }

                }
                
                pessoasEstrangeiras.push({
                    id: id,
                    nome: nome,
                    cnpj: '',
                    pais: pais,
                    endereco: endereco,
                    situacao: situacao,
                    restricao: restricao,
                    conexoes: conexoes
                });
                return;
            }
            
            // PROCESSA PJ_
            if (id.startsWith('PJ_')) {
                const cnpj = id.substring(3);
                
                // Extrai nome (primeira linha do title, antes do "(PJ_")
                const primeiraLinha = title.split('\n')[0] || '';
                const nome = primeiraLinha.split('(PJ_')[0].trim();
                
                // Percorre todas as linhas para encontrar endereço e verificar se é exterior
                const linhas = title.split('\n');
                let linhaEndereco = '';
                let linhaEnderecoExterior = '';
                let isExterior = false;
                
                for (let i = 1; i < linhas.length; i++) {
                    const linha = linhas[i].trim();
                    if (linha === '' || linha === nome) continue;
                    if (linha.startsWith('NÓ -') || linha.startsWith('GRAFO -') || linha.includes('Nós Adjacentes')) break;
                    
                    // Verifica se esta linha termina com "- EX"
                    if (linha.endsWith('- EX') || linha.includes('- EX ')) {
                        linhaEnderecoExterior = linha;
                        isExterior = true;
                    }
                    
                    // Guarda a primeira linha como endereço padrão (para PJ nacional)
                    if (linhaEndereco === '') {
                        linhaEndereco = linha;
                    }
                }
                
                // Se for exterior, usa a linha com "- EX" como endereço
                if (isExterior) {
                    linhaEndereco = linhaEnderecoExterior;
                }
                
                if (isExterior) {
                    // PJ no exterior vai para o array de PE
                    let pais = '';
                    let endereco = '';
                    const partes = linhaEndereco.split(' - ');
                    if (partes.length >= 2) {
                        pais = partes[0].trim();
                        // Remove o país do início e "EX" do final
                        endereco = partes.slice(1, -1).join(' - ').trim();
                        if (endereco === '') {
                            endereco = partes.slice(1).join(' - ').replace(/\s*-\s*EX\s*$/i, '').trim();
                        }
                    }
                    
                    pessoasEstrangeiras.push({
                        id: id,
                        nome: nome,
                        cnpj: cnpj,
                        pais: pais,
                        endereco: endereco,
                        situacao: situacao,
                        restricao: restricao,
                        conexoes: conexoes
                    });
                } else {
                    // PJ nacional
                    pessoasJuridicas.push({
                        id: id,
                        nome: nome,
                        cnpj: cnpj,
                        endereco: linhaEndereco,
                        situacao: situacao,
                        restricao: restricao,
                        conexoes: conexoes
                    });
                }
                return;
            }
        });
        
        const totalPJ = pessoasJuridicas.length;
        const textoPJ = totalPJ === 1 ? 'PESSOA JURÍDICA (PJ) SEDIADA NO BRASIL' : 'PESSOAS JURÍDICAS (PJ) SEDIADAS NO BRASIL';
        
        const totalPE = pessoasEstrangeiras.length;
        const textoPE = totalPE === 1 ? 'PESSOA JURÍDICA (PJ) SEDIADA NO EXTERIOR OU PESSOA ESTRANGEIRA (PE)' : 'PESSOAS JURÍDICAS (PJ) SEDIADAS NO EXTERIOR OU PESSOAS ESTRANGEIRAS (PE)';
        

        // CALCULA TOTAL E EXTRAI DADOS DE EN (Endereço)
        const enderecos = [];

        selectedNodes.forEach(function (id) {
            if (typeof id !== 'string' || !id.startsWith('EN_')) return;

            const node = network.body.data.nodes.get(id);
            if (!node || !node.title) return;

            // Primeira linha do title
            const primeiraLinha = node.title.split('\n')[0].trim();

            const conexoes = network.getConnectedEdges(id).length;

            enderecos.push({
                id: id,
                endereco: primeiraLinha,
                conexoes: conexoes
            });
        });


        const totalEN = enderecos.length;
        const textoEN = totalEN === 1 ? 'ENDEREÇO (EN)' : 'ENDEREÇOS (EN)';

        // CALCULA TOTAL E EXTRAI DADOS DE TE (Telefone)
        const telefones = [];
        selectedNodes.forEach(function (id) {
            if (typeof id !== 'string' || !id.startsWith('TE_')) return;
            
            const telefone = id.substring(3);
            const conexoes = network.getConnectedEdges(id).length;
            
            telefones.push({
                id: id,
                telefone: telefone,
                conexoes: conexoes
            });
        });
        const totalTE = telefones.length;
        const textoTE = totalTE === 1 ? 'TELEFONE (TE)' : 'TELEFONES (TE)';

        // CALCULA TOTAL E EXTRAI DADOS DE EM (E-mail)
        const emails = [];
        selectedNodes.forEach(function (id) {
            if (typeof id !== 'string' || !id.startsWith('EM_')) return;
            
            const email = id.substring(3);
            const conexoes = network.getConnectedEdges(id).length;
            
            emails.push({
                id: id,
                email: email,
                conexoes: conexoes
            });
        });
        const totalEM = emails.length;
        const textoEM = totalEM === 1 ? 'E-MAIL (EM)' : 'E-MAILS (EM)';


        // CALCULA TOTAL PF
        let totalPF = 0;
        selectedNodes.forEach(function (id) {
            if (typeof id === 'string' && id.startsWith('PF_')) {
                totalPF++;
            }
        });
        const textoNosPF = totalPF === 1 ? 'PESSOA FÍSICA (PF)' : 'PESSOAS FÍSICAS (PF)';

        // GERA LINHAS DE PJ
        let linhasPJ = '';
        pessoasJuridicas.forEach(function (pj) {
            const badgeSituacao = pj.situacao === 'ATIVA' 
                ? '<span class="badge badge-success">ATIVA</span>' 
                : '<span class="badge badge-danger">BAIXADA</span>';
            const badgeRestricao = pj.restricao 
                ? '<span class="badge badge-danger">' + pj.restricao + '</span>' 
                : '';
            
            linhasPJ += '<tr>';
            linhasPJ += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Abrir dados da pessoa jurídica" onclick="window.opener.consultarCNPJ(\'' + pj.cnpj + '\'); return false;">' + pj.nome + '</a> 🔍</div></td>';
            linhasPJ += '<td><a href="#" onclick="window.open(\'https://solucoes.receita.fazenda.gov.br/servicos/cnpjreva/Cnpjreva_Solicitacao.asp?cnpj=' + pj.cnpj + '\', \'popupCNPJ\', \'left=50,top=50,width=800,height=600,scrollbars=yes,resizable=yes\'); return false;" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Consultar CNPJ na Receita Federal">' + pj.cnpj + '</a> 🔍</td>';
            linhasPJ += '<td><span class="connections">🔗 ' + pj.conexoes + '</span></td>';
            linhasPJ += '<td>' + badgeSituacao + '</td>';
            linhasPJ += '<td></td>';
            linhasPJ += '<td><div class="restrictions">' + badgeRestricao + '</div></td>';
            linhasPJ += '</tr>';
        });


        // GERA LINHAS DE PE
        let linhasPE = '';
        pessoasEstrangeiras.forEach(function (pe) {
            const badgeSituacao = pe.situacao === 'ATIVA' 
                ? '<span class="badge badge-success">ATIVA</span>' 
                : '<span class="badge badge-danger">BAIXADA</span>';
            const badgeRestricao = pe.restricao 
                ? '<span class="badge badge-danger">' + pe.restricao + '</span>' 
                : '';
            const badgePais = pe.pais 
                ? '<span class="badge badge-info">' + pe.pais + '</span>' 
                : '';
            const coluna2 = pe.cnpj ? pe.cnpj : pe.endereco;
            
            linhasPE += '<tr>';
            linhasPE += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Pesquisar no Google com IA" onclick="window.open(\'https://www.google.com/search?q=' + encodeURIComponent(textoPesquisa + ' Entidade: ' + pe.nome + (pe.cnpj ? ' (CNPJ: ' + pe.cnpj + ')' : ' (Pessoa Estrangeira)')) + '&udm=50\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + pe.nome + '</a> 🔍</div></td>';
            linhasPE += '<td>' + (pe.cnpj ? '<a href="#" onclick="window.open(\'https://solucoes.receita.fazenda.gov.br/servicos/cnpjreva/Cnpjreva_Solicitacao.asp?cnpj=' + pe.cnpj + '\', \'popupCNPJ\', \'left=50,top=50,width=800,height=600,scrollbars=yes,resizable=yes\'); return false;" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Consultar CNPJ na Receita Federal">' + pe.cnpj + '</a> 🔍</td>' : coluna2) + '</td>';
            linhasPE += '<td><span class="connections">🔗 ' + pe.conexoes + '</span></td>';
            linhasPE += '<td>' + badgeSituacao + '</td>';
            linhasPE += '<td>' + badgePais + '</td>';
            linhasPE += '<td><div class="restrictions">' + badgeRestricao + '</div></td>';
            linhasPE += '</tr>';
        });



        // GERA LINHAS DE EN
        let linhasEN = '';
        enderecos.forEach(function (en) {
            linhasEN += '<tr>';
            linhasEN += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Pesquisar no Google com IA" onclick="window.open(\'https://www.google.com/search?q=' + encodeURIComponent(textoPesquisa + ' Entidade: Endereço ' + en.endereco) + '&udm=50\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + en.endereco + '</a> 🔍</div></td>';
            linhasEN += '<td></td>';
            linhasEN += '<td><span class="connections">🔗 ' + en.conexoes + '</span></td>';
            linhasEN += '<td></td>';
            linhasEN += '<td></td>';
            linhasEN += '<td></td>';
            linhasEN += '</tr>';
        });



        // GERA LINHAS DE TE
        let linhasTE = '';
        telefones.forEach(function (te) {
            linhasTE += '<tr>';
            linhasTE += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Pesquisar no Google com IA" onclick="window.open(\'https://www.google.com/search?q=' + encodeURIComponent(textoPesquisa + ' Entidade: Telefone ' + te.telefone) + '&udm=50\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + te.telefone + '</a> 🔍</div></td>';
            linhasTE += '<td></td>';
            linhasTE += '<td><span class="connections">🔗 ' + te.conexoes + '</span></td>';
            linhasTE += '<td></td>';
            linhasTE += '<td></td>';
            linhasTE += '<td></td>';
            linhasTE += '</tr>';
        });



        // GERA LINHAS DE EM
        let linhasEM = '';
        emails.forEach(function (em) {
            linhasEM += '<tr>';
            linhasEM += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Pesquisar no Google com IA" onclick="window.open(\'https://www.google.com/search?q=' + encodeURIComponent(textoPesquisa + ' Entidade: E-mail ' + em.email) + '&udm=50\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + em.email + '</a> 🔍</div></td>';
            linhasEM += '<td></td>';
            linhasEM += '<td><span class="connections">🔗 ' + em.conexoes + '</span></td>';
            linhasEM += '<td></td>';
            linhasEM += '<td></td>';
            linhasEM += '<td></td>';
            linhasEM += '</tr>';
        });


        // EXTRAI NOME, CEP E CONEXÕES
        const pessoasFisicas = [];

        selectedNodes.forEach(function (id) {
            if (typeof id !== 'string' || !id.startsWith('PF_')) return;

            // Remove o prefixo "PF_"
            const dados = id.substring(3);

            // CPF é o primeiro bloco, nome vem depois
            const primeiroEspaco = dados.indexOf('-');
            if (primeiroEspaco === -1) return;

            const cpf = dados.substring(0, primeiroEspaco).trim();
            const nome = dados.substring(primeiroEspaco + 1).trim();

            // Conta conexões adjacentes
            const conexoes = network.getConnectedEdges(id).length;

            pessoasFisicas.push({
                id: id,
                nome: nome,
                cpf: cpf,
                conexoes: conexoes
            });
        });


        let linhasPF = '';
        pessoasFisicas.forEach(function (pf) {
            linhasPF += '<tr>';
            linhasPF += '<td><div class="node-name"><a href="#" style="color: #0066cc; text-decoration: none; cursor: pointer;" title="Pesquisar no Google com IA" onclick="window.open(\'https://www.google.com/search?q=' + encodeURIComponent(textoPesquisa + ' Entidade: ' + pf.nome + ' (CPF: ' + pf.cpf + ')') + '&udm=50\', \'\', \'left=50,top=100,width=800,height=800,scrollbars=yes,resizable=yes\'); return false;">' + pf.nome + '</a> 🔍</div></td>';
            linhasPF += '<td>' + pf.cpf + '</td>';
            linhasPF += '<td><span class="connections">🔗 ' + pf.conexoes + '</span></td>';
            linhasPF += '<td></td>';
            linhasPF += '<td></td>';
            linhasPF += '<td></td>';
            linhasPF += '</tr>';
        });



        let html = "";

        html += '<!DOCTYPE html>';
        html += '<html lang="pt-BR">';
        html += '<head>';
        html += '    <meta charset="UTF-8">';
        html += '    <meta name="viewport" content="width=device-width, initial-scale=1.0">';
        html += '    <title>SINARC - Nós Selecionados</title>';
        html += '    <style>';
        html += '    * {';
        html += '    margin: 0;';
        html += '    padding: 0;';
        html += '    box-sizing: border-box;';
        html += '    }';
        html += '    body {';
        html += '        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;';
        html += '        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);';
        html += '        padding: 20px;';
        html += '        color: #2c3e50;';
        html += '    }';
        html += '    .container {';
        html += '        max-width: 1200px;';
        html += '        margin: 0 auto;';
        html += '        background: white;';
        html += '        border-radius: 12px;';
        html += '            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);';
        html += '            overflow: hidden;';
        html += '        }';
        html += '        .header {';
        html += '            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);';
        html += '            color: white;';
        html += '            padding: 20px 30px;';
        html += '        }';
        html += '        .header h1 {';
        html += '            font-size: 24px;';
        html += '            margin-bottom: 0px;';
        html += '        }';
        html += '        .toolbar {';
        html += '            padding: 20px 30px;';
        html += '            background: transparent;';
        html += '            border-bottom: none;';
        html += '            display: flex;';
        html += '            gap: 15px;';
        html += '            flex-wrap: wrap;';
        html += '            align-items: center;';
        html += '        }';
        html += '        .search-box {';
        html += '            flex: 1;';
        html += '            min-width: 250px;';
        html += '            position: relative;';
        html += '        }';
        html += '        .search-box input {';
        html += '            width: 100%;';
        html += '            padding: 10px 40px 10px 15px;';
        html += '            border: 2px solid #e9ecef;';
        html += '            border-radius: 8px;';
        html += '            font-size: 14px;';
        html += '            transition: all 0.3s;';
        html += '        }';
        html += '        .search-box input:focus {';
        html += '            outline: none;';
        html += '            border-color: #667eea;';
        html += '        }';
        html += '        .search-icon {';
        html += '            position: absolute;';
        html += '            right: 12px;';
        html += '            top: 50%;';
        html += '            transform: translateY(-50%);';
        html += '            color: #adb5bd;';
        html += '        }';
        html += '        .btn {';
        html += '        padding: 10px 20px;';
        html += '            border: none;';
        html += '            border-radius: 8px;';
        html += '            cursor: pointer;';
        html += '            font-size: 14px;';
        html += '            font-weight: 600;';
        html += '            transition: all 0.3s;';
        html += '            display: inline-flex;';
        html += '            align-items: center;';
        html += '            gap: 8px;';
        html += '        }';
        html += '        .btn-primary {';
        html += '            background: #667eea;';
        html += '            color: white;';
        html += '        }';
        html += '        .btn-primary:hover {';
        html += '            background: #5568d3;';
        html += '            transform: translateY(-2px);';
        html += '            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);';
        html += '        }';
        html += '        .btn-secondary {';
        html += '            background: #28a745;';
        html += '            color: white;';
        html += '        }';
        html += '        .btn-secondary:hover {';
        html += '            background: #218838;';
        html += '            transform: translateY(-2px);';
        html += '            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);';
        html += '        }';
        html += '        .content {';
        html += '            padding: 30px;';
        html += '        }';
        html += '        .node-section {';
        html += '            margin-bottom: 30px;';
        html += '        }';
        html += '        .table-wrapper {';
        html += '            overflow-x: auto;';
        html += '            -webkit-overflow-scrolling: touch;';
        html += '        }';
        html += '        .section-header {';
        html += '            display: flex;';
        html += '            align-items: center;';
        html += '            gap: 15px;';
        html += '            margin-bottom: 15px;';
        html += '            padding: 15px;';
        html += '            border-radius: 8px;';
        html += '            cursor: pointer;';
        html += '            transition: all 0.3s;';
        html += '            background: linear-gradient(135deg, #667eea20 0%, #764ba220 100%);';
        html += '            border-left: 4px solid #667eea;';
        html += '        }';
        html += '        .section-header:hover {';
        html += '            transform: translateX(5px);';
        html += '        }';
        html += '        .section-header .icon {';
        html += '            width: 32px;';
        html += '            height: 32px;';
        html += '            object-fit: contain;';
        html += '            flex-shrink: 0;';
        html += '        }';
        html += '        @media (max-width: 768px) {';
        html += '            .section-header .icon {';
        html += '                width: 28px;';
        html += '                height: 28px;';
        html += '            }';
        html += '        }';
        html += '        .section-header .title {';
        html += '            flex: 1;';
        html += '        }';
        html += '        .section-header .title h2 {';
        html += '            font-size: 18px;';
        html += '            margin-bottom: 3px;';
        html += '        }';
        html += '        .section-header .title .count {';
        html += '            font-size: 12px;';
        html += '            opacity: 0.7;';
        html += '        }';
        html += '        .node-table {';
        html += '            width: 100%;';
        html += '            border-collapse: collapse;';
        html += '            margin-bottom: 20px;';
        html += '            display: none;';
        html += '            min-width: 1000px;';
        html += '        }';
        html += '        .node-table.show {';
        html += '            display: table;';
        html += '        }';
        html += '        .node-table {';
        html += '            table-layout: fixed;';
        html += '        }';
        html += '        .node-table th:nth-child(1),';
        html += '        .node-table td:nth-child(1) {';
        html += '            width: 40%;';
        html += '        }';
        html += '        .node-table th:nth-child(2),';
        html += '        .node-table td:nth-child(2) {';
        html += '            width: 15%;';
        html += '        }';
        html += '        .node-table th:nth-child(3),';
        html += '        .node-table td:nth-child(3) {';
        html += '            width: 10%;';
        html += '        }';
        html += '        .node-table th:nth-child(4),';
        html += '        .node-table td:nth-child(4) {';
        html += '            width: 10%;';
        html += '        }';
        html += '        .node-table th:nth-child(5),';
        html += '        .node-table td:nth-child(5) {';
        html += '            width: 15%;';
        html += '        }';
        html += '        .node-table th:nth-child(6),';
        html += '        .node-table td:nth-child(6) {';
        html += '            width: 10%;';
        html += '        }';
        html += '        .node-table thead {';
        html += '            background: #f8f9fa;';
        html += '        }';
        html += '        .node-table th {';
        html += '            padding: 12px;';
        html += '            text-align: left;';
        html += '            font-size: 12px;';
        html += '            font-weight: 600;';
        html += '            color: #6c757d;';
        html += '            text-transform: uppercase;';
        html += '            border-bottom: 2px solid #dee2e6;';
        html += '        }';
        html += '        .node-table th {';
        html += '            padding: 12px;';
        html += '            text-align: left;';
        html += '            font-size: 12px;';
        html += '            font-weight: 600;';
        html += '            color: #6c757d;';
        html += '            text-transform: uppercase;';
        html += '            border-bottom: 2px solid #dee2e6;';
        html += '        }';
        html += '        .node-table th.sortable {';
        html += '            cursor: pointer;';
        html += '            user-select: none;';
        html += '            position: relative;';
        html += '            padding-right: 25px;';
        html += '        }';
        html += '        .node-table th.sortable:hover {';
        html += '            background: #e9ecef;';
        html += '        }';
        html += '        .node-table th.sortable::after {';
        html += '            content: "⇅";';
        html += '            position: absolute;';
        html += '            right: 8px;';
        html += '            opacity: 0.3;';
        html += '            font-size: 14px;';
        html += '        }';
        html += '        .node-table th.sortable.asc::after {';
        html += '            content: "▲";';
        html += '            opacity: 1;';
        html += '            color: #667eea;';
        html += '        }';
        html += '        .node-table th.sortable.desc::after {';
        html += '            content: "▼";';
        html += '            opacity: 1;';
        html += '            color: #667eea;';
        html += '        }';
        html += '        .node-table td {';
        html += '            padding: 12px;';
        html += '            border-bottom: 1px solid #f1f3f5;';
        html += '            font-size: 14px;';
        html += '        }';
        html += '        .node-table tbody tr:hover {';
        html += '            background: #f8f9fa;';
        html += '        }';
        html += '        .node-table tbody tr:nth-child(even) {';
        html += '            background: #fafbfc;';
        html += '        }';
        html += '        .badge {';
        html += '            display: inline-block;';
        html += '            padding: 4px 8px;';
        html += '            border-radius: 4px;';
        html += '            font-size: 11px;';
        html += '            font-weight: 600;';
        html += '            margin-right: 5px;';
        html += '            margin-bottom: 3px;';
        html += '        }';
        html += '        .badge-success {';
        html += '            background: #d4edda;';
        html += '            color: #155724;';
        html += '        }';
        html += '        .badge-danger {';
        html += '            background: #f8d7da;';
        html += '            color: #721c24;';
        html += '        }';
        html += '        .badge-warning {';
        html += '            background: #fff3cd;';
        html += '            color: #856404;';
        html += '        }';
        html += '        .badge-info {';
        html += '            background: #d1ecf1;';
        html += '            color: #0c5460;';
        html += '        }';
        html += '        .badge-secondary {';
        html += '            background: #e2e3e5;';
        html += '            color: #383d41;';
        html += '        }';
        html += '        .node-name {';
        html += '            font-weight: 600;';
        html += '            color: #2c3e50;';
        html += '        }';
        html += '        .node-id {';
        html += '            font-size: 11px;';
        html += '            color: #6c757d;';
        html += '            font-family: "Courier New", monospace;';
        html += '        }';
        html += '        .connections {';
        html += '            display: inline-flex;';
        html += '            align-items: center;';
        html += '            gap: 5px;';
        html += '            padding: 4px 10px;';
        html += '            background: #e7f3ff;';
        html += '            border-radius: 12px;';
        html += '            font-size: 12px;';
        html += '            color: #0066cc;';
        html += '            font-weight: 600;';
        html += '        }';
        html += '        .restrictions {';
        html += '            display: flex;';
        html += '            flex-wrap: wrap;';
        html += '            gap: 5px;';
        html += '        }';
        html += '        .collapse-icon {';
        html += '            transition: transform 0.3s;';
        html += '        }';
        html += '        .collapse-icon.rotated {';
        html += '            transform: rotate(180deg);';
        html += '        }';
        html += '</style>';
        html += '</head>';

        html += '<body>';
        html += '<div class="container">';
        html += '<div class="header">';
        html += '<h1>🔍 ' + totalSelecionados + ' ' + textoNos + '</h1>';
        html += '</div>';
        html += '<div class="toolbar">';
        html += '            <div class="search-box">';
        html += '                <input type="text" id="searchInput" placeholder="🔎 Buscar por nome, CPF, CNPJ...">';
        html += '                <span class="search-icon">⌕</span>';
        html += '            </div>';
        html += '            <button class="btn btn-secondary" onclick="salvarArquivo()">';
        html += '                💾 Salvar Relatório';
        html += '            </button>';
        html += '        </div>';
        html += '<div class="content">';
        
        html += '    <div class="node-section">';
        html += '        <div class="section-header" onclick="toggleSection(\'pf\')">';
        html += '            <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/pf_homem.png" alt="Pessoa Física" class="icon">';
        html += '            <div class="title">';
        html += '                <h2>' + totalPF +  ' ' + textoNosPF + '</h2>';
        html += '            </div>';
        html += '            <span class="collapse-icon" id="icon-pf">▼</span>';
        html += '        </div>';
        html += '        <div class="table-wrapper">';
        html += '            <table class="node-table show" id="table-pf">';
        html += '                <thead>';
        html += '                    <tr>';
        html += '                        <th>Nome</th>';
        html += '                        <th>CPF</th>';
        html += '                        <th>Conexões</th>';
        html += '                        <th></th>';
        html += '                        <th></th>';
        html += '                        <th></th>';
        html += '                    </tr>';
        html += '                </thead>';
        html += '                <tbody>';
        html +=                      linhasPF;
        html += '                </tbody>';
        html += '            </table>';
        html += '        </div>';
        html += '    </div>';
        
        html += '            <div class="node-section">';
        html += '                <div class="section-header" onclick="toggleSection(\'pj\')">';
        html += '                    <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/pj_brasil_ativa.png" alt="Pessoa Jurídica" class="icon">';
        html += '                    <div class="title">';
        html += '                        <h2>' + totalPJ + ' ' + textoPJ + '</h2>';
        html += '                    </div>';
        html += '                    <span class="collapse-icon" id="icon-pj">▼</span>';
        html += '                </div>';
        html += '                <div class="table-wrapper">';
        html += '                    <table class="node-table show" id="table-pj">';
        html += '                        <thead>';
        html += '                            <tr>';
        html += '                                <th>Razão Social</th>';
        html += '                                <th>CNPJ</th>';
        html += '                                <th>Conexões</th>';
        html += '                                <th>Situação</th>';
        html += '                                <th>País</th>';
        html += '                                <th>Restrições</th>';
        html += '                            </tr>';
        html += '                        </thead>';
        html += '                        <tbody>';
        html +=                              linhasPJ;
        html += '                        </tbody>';
        html += '                    </table>';
        html += '                </div>';
        html += '            </div>';
        
        html += '            <div class="node-section">';
        html += '                <div class="section-header" onclick="toggleSection(\'pe\')">';
        html += '                    <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/pj_exterior_ativa.png" alt="Pessoa Estrangeira" class="icon">';
        html += '                    <div class="title">';
        html += '                        <h2>' + totalPE + ' ' + textoPE + '</h2>';
        html += '                    </div>';
        html += '                    <span class="collapse-icon" id="icon-pe">▼</span>';
        html += '                </div>';
        html += '                <div class="table-wrapper">';
        html += '                    <table class="node-table show" id="table-pe">';
        html += '                        <thead>';
        html += '                            <tr>';
        html += '                                <th>Razão Social</th>';
        html += '                                <th>CNPJ</th>';
        html += '                                <th>Conexões</th>';
        html += '                                <th>Situação</th>';
        html += '                                <th>País</th>';
        html += '                                <th>Restrições</th>';
        html += '                            </tr>';
        html += '                        </thead>';
        html += '                        <tbody>';
        html +=                              linhasPE;
        html += '                        </tbody>';
        html += '                    </table>';
        html += '                </div>';
        html += '            </div>';
        
        html += '            <div class="node-section">';
        html += '                <div class="section-header" onclick="toggleSection(\'en\')">';
        html += '                    <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/endereco.png" alt="Endereço" class="icon">';
        html += '                    <div class="title">';
        html += '                        <h2>' + totalEN + ' ' + textoEN + '</h2>';
        html += '                    </div>';
        html += '                    <span class="collapse-icon" id="icon-en">▼</span>';
        html += '                </div>';
        html += '                <div class="table-wrapper">';
        html += '                    <table class="node-table show" id="table-en">';
        html += '                        <thead>';
        html += '                            <tr>';
        html += '                                <th>Endereço</th>';
        html += '                                <th></th>';
        html += '                                <th>Conexões</th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                            </tr>';
        html += '                        </thead>';
        html += '                        <tbody>';
        html +=                              linhasEN;
        html += '                        </tbody>';
        html += '                    </table>';
        html += '                </div>';
        html += '            </div>';
        
        html += '            <div class="node-section">';
        html += '                <div class="section-header" onclick="toggleSection(\'te\')">';
        html += '                    <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/telefone.png" alt="Telefone" class="icon">';
        html += '                    <div class="title">';
        html += '                        <h2>' + totalTE + ' ' + textoTE + '</h2>';
        html += '                    </div>';
        html += '                    <span class="collapse-icon" id="icon-te">▼</span>';
        html += '                </div>';
        html += '                <div class="table-wrapper">';
        html += '                    <table class="node-table show" id="table-te">';
        html += '                        <thead>';
        html += '                            <tr>';
        html += '                                <th>Telefone</th>';
        html += '                                <th></th>';
        html += '                                <th>Conexões</th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                            </tr>';
        html += '                        </thead>';
        html += '                        <tbody>';
        html +=                              linhasTE;
        html += '                        </tbody>';
        html += '                    </table>';
        html += '                </div>';
        html += '            </div>';
        
        html += '            <div class="node-section">';
        html += '                <div class="section-header" onclick="toggleSection(\'em\')">';
        html += '                    <img src="https://raw.githubusercontent.com/controlecidadao/sinarc/refs/heads/main/images/email.png" alt="E-mail" class="icon">';
        html += '                    <div class="title">';
        html += '                        <h2>' + totalEM + ' ' + textoEM + '</h2>';
        html += '                    </div>';
        html += '                    <span class="collapse-icon" id="icon-em">▼</span>';
        html += '                </div>';
        html += '                <div class="table-wrapper">';
        html += '                    <table class="node-table show" id="table-em">';
        html += '                        <thead>';
        html += '                            <tr>';
        html += '                                <th>E-mail</th>';
        html += '                                <th></th>';
        html += '                                <th>Conexões</th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                                <th></th>';
        html += '                            </tr>';
        html += '                        </thead>';
        html += '                        <tbody>';
        html +=                              linhasEM;
        html += '                        </tbody>';
        html += '                    </table>';
        html += '                </div>';
        html += '            </div>';
        html += '        </div>';
        html += '    </div>';

        html += '<scr' + 'ipt>';
        html += '        function toggleSection(type) {';
        html += '            const table = document.getElementById(`table-${type}`);';
        html += '            const icon = document.getElementById(`icon-${type}`);';
        html += '            table.classList.toggle("show");';
        html += '            icon.classList.toggle("rotated");';    
        html += '        }';
        html += '        function salvarArquivo() {';
        html += '            const conteudoHTML = document.documentElement.outerHTML;';
        html += '            const blob = new Blob([conteudoHTML], { type: "text/html;charset=utf-8" });';
        html += '            const url = URL.createObjectURL(blob);';
        html += '            const link = document.createElement("a");';
        html += '            link.href = url;';
        html += '            const agora = new Date();';
        html += '            const dataHora = agora.getFullYear() + "-" + String(agora.getMonth() + 1).padStart(2, "0") + "-" + String(agora.getDate()).padStart(2, "0") + "_" + String(agora.getHours()).padStart(2, "0") + "-" + String(agora.getMinutes()).padStart(2, "0");';
        html += '            link.download = "SINARC_Relatorio_" + dataHora + ".html";';
        html += '            document.body.appendChild(link);';
        html += '            link.click();';
        html += '            document.body.removeChild(link);';
        html += '            URL.revokeObjectURL(url);';
        html += '        }';
        html += '        document.getElementById("searchInput").addEventListener("input", function(e) {';
        html += '            const searchTerm = e.target.value.toLowerCase();';
        html += '            const tables = document.querySelectorAll(".node-table");';
        html += '            tables.forEach(table => {';
        html += '                const rows = table.querySelectorAll("tbody tr");';
        html += '                rows.forEach(row => {';
        html += '                    const text = row.textContent.toLowerCase();';
        html += '                    row.style.display = text.includes(searchTerm) ? "" : "none";';
        html += '                });';
        html += '            });';
        html += '        });';
        html += '        function tornarColunasOrdenaveis() {';
        html += '            const tabelas = document.querySelectorAll(".node-table");';
        html += '            tabelas.forEach(tabela => {';
        html += '                const cabecalhos = tabela.querySelectorAll("thead th");';
        html += '                cabecalhos.forEach((th, index) => {';
        html += '                    if (th.textContent.trim() !== "") {';
        html += '                        th.classList.add("sortable");';
        html += '                        th.addEventListener("click", function() {';
        html += '                            ordenarTabela(tabela, index);';
        html += '                        });';
        html += '                    }';
        html += '                });';
        html += '            });';
        html += '        }';
        html += '        function ordenarTabela(tabela, colunaIndex) {';
        html += '            const tbody = tabela.querySelector("tbody");';
        html += '            const linhas = Array.from(tbody.querySelectorAll("tr"));';
        html += '            const cabecalhos = tabela.querySelectorAll("thead th");';
        html += '            const cabecalhoAtual = cabecalhos[colunaIndex];';
        html += '            let ordemAtual = "none";';
        html += '            if (cabecalhoAtual.classList.contains("asc")) ordemAtual = "asc";';
        html += '            if (cabecalhoAtual.classList.contains("desc")) ordemAtual = "desc";';
        html += '            cabecalhos.forEach(th => th.classList.remove("asc", "desc"));';
        html += '            let novaOrdem = ordemAtual === "asc" ? "desc" : "asc";';
        html += '            cabecalhoAtual.classList.add(novaOrdem);';
        html += '            linhas.sort(function(a, b) {';
        html += '                const celulaA = a.cells[colunaIndex];';
        html += '                const celulaB = b.cells[colunaIndex];';
        html += '                if (!celulaA || !celulaB) return 0;';
        html += '                let valorA = celulaA.querySelector(".node-name")';
        html += '                    ? celulaA.querySelector(".node-name").textContent';
        html += '                    : celulaA.querySelector(".connections")';
        html += '                        ? celulaA.querySelector(".connections").textContent';
        html += '                        : celulaA.textContent;';
        html += '                let valorB = celulaB.querySelector(".node-name")';
        html += '                    ? celulaB.querySelector(".node-name").textContent';
        html += '                    : celulaB.querySelector(".connections")';
        html += '                        ? celulaB.querySelector(".connections").textContent';
        html += '                        : celulaB.textContent;';
        html += '                valorA = valorA.trim();';
        html += '                valorB = valorB.trim();';
        html += '                const numA = parseFloat(valorA.replace(/[^\\d.-]/g, ""));';
        html += '                const numB = parseFloat(valorB.replace(/[^\\d.-]/g, ""));';
        html += '                let resultado;';
        html += '                if (!isNaN(numA) && !isNaN(numB)) {';
        html += '                    resultado = numA - numB;';
        html += '                } else {';
        html += '                    resultado = valorA.localeCompare(valorB, "pt-BR", { sensitivity: "base" });';
        html += '                }';
        html += '                return novaOrdem === "asc" ? resultado : -resultado;';
        html += '            });';
        html += '            linhas.forEach(function(linha) { tbody.appendChild(linha); });';
        html += '        }';
        html += '        function ordenarTabelas() {';
        html += '            const tabelas = document.querySelectorAll(".node-table tbody");';
        html += '            tabelas.forEach(tbody => {';
        html += '                const linhas = Array.from(tbody.querySelectorAll("tr"));';
        html += '                if (linhas.length === 0) return;';
        html += '                linhas.sort((a, b) => {';
        html += '                    const aNomeEl = a.querySelector(".node-name");';
        html += '                    const bNomeEl = b.querySelector(".node-name");';
        html += '                    if (!aNomeEl || !bNomeEl) return 0;';
        html += '                    const nomeA = aNomeEl.textContent.trim().toUpperCase();';
        html += '                    const nomeB = bNomeEl.textContent.trim().toUpperCase();';
        html += '                    return nomeA.localeCompare(nomeB, "pt-BR");';
        html += '                });';
        html += '                linhas.forEach(linha => tbody.appendChild(linha));';
        html += '            });';
        html += '        }';
        html += '        window.addEventListener("DOMContentLoaded", function() {';
        html += '            ordenarTabelas();';
        html += '            tornarColunasOrdenaveis();';
        html += '        });';
        html += '</scr' + 'ipt>';
        html += '</body>';
        html += '</html>'

        const janela = window.open(
            'about:blank',
            '_blank',
            'width=1200,height=800,scrollbars=yes,resizable=yes'
        );

        //console.log(html);

        // Escrever HTML na janela
        janela.document.open();
        janela.document.write(html);
        janela.document.close();
    }

    window.gerarRelatorio = gerarRelatorio;

    const selectedNodes_2 = network.getSelectedNodes();
    const totalSelecionados = selectedNodes_2.length;
    const textoNos = totalSelecionados === 1 ? 'NÓ SELECIONADO' : 'NÓS SELECIONADOS';

</script>







</body>
</html>